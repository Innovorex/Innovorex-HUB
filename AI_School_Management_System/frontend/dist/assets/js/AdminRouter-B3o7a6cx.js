var e=Object.defineProperty,s=(s,t,a)=>((s,t,a)=>t in s?e(s,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[t]=a)(s,"symbol"!=typeof t?t+"":t,a);import{b as t,j as a,c as r,u as l}from"./data-94D1OdVp.js";import{u as n,q as d,s as i,l as c,p as o,t as x,c as m,d as u,j as h,v as g,a as p,z as j,b as y,m as b,w as N,k as f,e as v,x as w,y as _,A as C,B as S,o as k,n as L,C as A,D,r as E,E as P,G as q,H as F,I,F as M,J as R,K as B,L as O,M as U,N as $,O as T,i as K,P as G}from"./index-BKaJI5T2.js";import{m as W,A as V}from"./ui-DvwotSXL.js";import{r as H,R as Q,u as z,L as Z,c as Y,d as J,N as X}from"./vendor-BHFNQwN6.js";import{F as ee}from"./PresentationChartLineIcon-fkxdXzlJ.js";import{F as se}from"./ExclamationTriangleIcon-CxKKRfxN.js";import{F as te}from"./CpuChipIcon-PbV9hcg8.js";import{F as ae}from"./EyeIcon-BVRVrNvG.js";import{F as re}from"./EnvelopeIcon-BzMY63Pz.js";import{F as le}from"./PhoneIcon-Dx7egdNE.js";function ne({title:e,titleId:s,...t},a){return H.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},t),e?H.createElement("title",{id:s},e):null,H.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"}))}const de=H.forwardRef(ne);function ie({title:e,titleId:s,...t},a){return H.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},t),e?H.createElement("title",{id:s},e):null,H.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15M12 9l-3 3m0 0 3 3m-3-3h12.75"}))}const ce=H.forwardRef(ie);function oe({title:e,titleId:s,...t},a){return H.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},t),e?H.createElement("title",{id:s},e):null,H.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15m3 0 3-3m0 0-3-3m3 3H9"}))}const xe=H.forwardRef(oe);function me({title:e,titleId:s,...t},a){return H.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},t),e?H.createElement("title",{id:s},e):null,H.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 4.5 21 12m0 0-7.5 7.5M21 12H3"}))}const ue=H.forwardRef(me);function he({title:e,titleId:s,...t},a){return H.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},t),e?H.createElement("title",{id:s},e):null,H.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 6H5.25A2.25 2.25 0 0 0 3 8.25v10.5A2.25 2.25 0 0 0 5.25 21h10.5A2.25 2.25 0 0 0 18 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25"}))}const ge=H.forwardRef(he);function pe({title:e,titleId:s,...t},a){return H.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},t),e?H.createElement("title",{id:s},e):null,H.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 12.75 6 6 9-13.5"}))}const je=H.forwardRef(pe);function ye({title:e,titleId:s,...t},a){return H.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},t),e?H.createElement("title",{id:s},e):null,H.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 15.75 7.5-7.5 7.5 7.5"}))}const be=H.forwardRef(ye);function Ne({title:e,titleId:s,...t},a){return H.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},t),e?H.createElement("title",{id:s},e):null,H.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.25 6.375c0 2.278-3.694 4.125-8.25 4.125S3.75 8.653 3.75 6.375m16.5 0c0-2.278-3.694-4.125-8.25-4.125S3.75 4.097 3.75 6.375m16.5 0v11.25c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125V6.375m16.5 0v3.75m-16.5-3.75v3.75m16.5 0v3.75C20.25 16.153 16.556 18 12 18s-8.25-1.847-8.25-4.125v-3.75m16.5 0c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125"}))}const fe=H.forwardRef(Ne);function ve({title:e,titleId:s,...t},a){return H.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},t),e?H.createElement("title",{id:s},e):null,H.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 16.5V9.75m0 0 3 3m-3-3-3 3M6.75 19.5a4.5 4.5 0 0 1-1.41-8.775 5.25 5.25 0 0 1 10.233-2.33 3 3 0 0 1 3.758 3.848A3.752 3.752 0 0 1 18 19.5H6.75Z"}))}const we=H.forwardRef(ve);function _e({title:e,titleId:s,...t},a){return H.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},t),e?H.createElement("title",{id:s},e):null,H.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 17.25v1.007a3 3 0 0 1-.879 2.122L7.5 21h9l-.621-.621A3 3 0 0 1 15 18.257V17.25m6-12V15a2.25 2.25 0 0 1-2.25 2.25H5.25A2.25 2.25 0 0 1 3 15V5.25m18 0A2.25 2.25 0 0 0 18.75 3H5.25A2.25 2.25 0 0 0 3 5.25m18 0V12a2.25 2.25 0 0 1-2.25 2.25H5.25A2.25 2.25 0 0 1 3 12V5.25"}))}const Ce=H.forwardRef(_e);function Se({title:e,titleId:s,...t},a){return H.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},t),e?H.createElement("title",{id:s},e):null,H.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 9.776c.112-.017.227-.026.344-.026h15.812c.117 0 .232.009.344.026m-16.5 0a2.25 2.25 0 0 0-1.883 2.542l.857 6a2.25 2.25 0 0 0 2.227 1.932H19.05a2.25 2.25 0 0 0 2.227-1.932l.857-6a2.25 2.25 0 0 0-1.883-2.542m-16.5 0V6A2.25 2.25 0 0 1 6 3.75h3.879a1.5 1.5 0 0 1 1.06.44l2.122 2.12a1.5 1.5 0 0 0 1.06.44H18A2.25 2.25 0 0 1 20.25 9v.776"}))}const ke=H.forwardRef(Se);function Le({title:e,titleId:s,...t},a){return H.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},t),e?H.createElement("title",{id:s},e):null,H.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 0 1-.659 1.591l-5.432 5.432a2.25 2.25 0 0 0-.659 1.591v2.927a2.25 2.25 0 0 1-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 0 0-.659-1.591L3.659 7.409A2.25 2.25 0 0 1 3 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0 1 12 3Z"}))}const Ae=H.forwardRef(Le);function De({title:e,titleId:s,...t},a){return H.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},t),e?H.createElement("title",{id:s},e):null,H.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 8.25h15m-16.5 7.5h15m-1.8-13.5-3.9 19.5m-2.1-19.5-3.9 19.5"}))}const Ee=H.forwardRef(De);function Pe({title:e,titleId:s,...t},a){return H.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},t),e?H.createElement("title",{id:s},e):null,H.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 9h3.75M15 12h3.75M15 15h3.75M4.5 19.5h15a2.25 2.25 0 0 0 2.25-2.25V6.75A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25v10.5A2.25 2.25 0 0 0 4.5 19.5Zm6-10.125a1.875 1.875 0 1 1-3.75 0 1.875 1.875 0 0 1 3.75 0Zm1.294 6.336a6.721 6.721 0 0 1-3.17.789 6.721 6.721 0 0 1-3.168-.789 3.376 3.376 0 0 1 6.338 0Z"}))}const qe=H.forwardRef(Pe);function Fe({title:e,titleId:s,...t},a){return H.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},t),e?H.createElement("title",{id:s},e):null,H.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 18v-5.25m0 0a6.01 6.01 0 0 0 1.5-.189m-1.5.189a6.01 6.01 0 0 1-1.5-.189m3.75 7.478a12.06 12.06 0 0 1-4.5 0m3.75 2.383a14.406 14.406 0 0 1-3 0M14.25 18v-.192c0-.983.658-1.823 1.508-2.316a7.5 7.5 0 1 0-7.517 0c.85.493 1.509 1.333 1.509 2.316V18"}))}const Ie=H.forwardRef(Fe);function Me({title:e,titleId:s,...t},a){return H.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},t),e?H.createElement("title",{id:s},e):null,H.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.19 8.688a4.5 4.5 0 0 1 1.242 7.244l-4.5 4.5a4.5 4.5 0 0 1-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5 0 0 0-6.364-6.364l-4.5 4.5a4.5 4.5 0 0 0 1.242 7.244"}))}const Re=H.forwardRef(Me);function Be({title:e,titleId:s,...t},a){return H.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},t),e?H.createElement("title",{id:s},e):null,H.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"}))}const Oe=H.forwardRef(Be);function Ue({title:e,titleId:s,...t},a){return H.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},t),e?H.createElement("title",{id:s},e):null,H.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.347a1.125 1.125 0 0 1 0 1.972l-11.54 6.347a1.125 1.125 0 0 1-1.667-.986V5.653Z"}))}const $e=H.forwardRef(Ue);function Te({title:e,titleId:s,...t},a){return H.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},t),e?H.createElement("title",{id:s},e):null,H.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}const Ke=H.forwardRef(Te);function Ge({title:e,titleId:s,...t},a){return H.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},t),e?H.createElement("title",{id:s},e):null,H.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.72 13.829c-.24.03-.48.062-.72.096m.72-.096a42.415 42.415 0 0 1 10.56 0m-10.56 0L6.34 18m10.94-4.171c.24.03.48.062.72.096m-.72-.096L17.66 18m0 0 .229 2.523a1.125 1.125 0 0 1-1.12 1.227H7.231c-.662 0-1.18-.568-1.12-1.227L6.34 18m11.318 0h1.091A2.25 2.25 0 0 0 21 15.75V9.456c0-1.081-.768-2.015-1.837-2.175a48.055 48.055 0 0 0-1.913-.247M6.34 18H5.25A2.25 2.25 0 0 1 3 15.75V9.456c0-1.081.768-2.015 1.837-2.175a48.041 48.041 0 0 1 1.913-.247m10.5 0a48.536 48.536 0 0 0-10.5 0m10.5 0V3.375c0-.621-.504-1.125-1.125-1.125h-8.25c-.621 0-1.125.504-1.125 1.125v3.659M18 10.5h.008v.008H18V10.5Zm-3 0h.008v.008H15V10.5Z"}))}const We=H.forwardRef(Ge);function Ve({title:e,titleId:s,...t},a){return H.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},t),e?H.createElement("title",{id:s},e):null,H.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 5.25h.008v.008H12v-.008Z"}))}const He=H.forwardRef(Ve);function Qe({title:e,titleId:s,...t},a){return H.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},t),e?H.createElement("title",{id:s},e):null,H.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3v17.25m0 0c-1.472 0-2.882.265-4.185.75M12 20.25c1.472 0 2.882.265 4.185.75M18.75 4.97A48.416 48.416 0 0 0 12 4.5c-2.291 0-4.545.16-6.75.47m13.5 0c1.01.143 2.01.317 3 .52m-3-.52 2.62 10.726c.122.499-.106 1.028-.589 1.202a5.988 5.988 0 0 1-2.031.352 5.988 5.988 0 0 1-2.031-.352c-.483-.174-.711-.703-.59-1.202L18.75 4.971Zm-16.5.52c.99-.203 1.99-.377 3-.52m0 0 2.62 10.726c.122.499-.106 1.028-.589 1.202a5.989 5.989 0 0 1-2.031.352 5.989 5.989 0 0 1-2.031-.352c-.483-.174-.711-.703-.59-1.202L5.25 4.971Z"}))}const ze=H.forwardRef(Qe);function Ze({title:e,titleId:s,...t},a){return H.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},t),e?H.createElement("title",{id:s},e):null,H.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.48 3.499a.562.562 0 0 1 1.04 0l2.125 5.111a.563.563 0 0 0 .475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 0 0-.182.557l1.285 5.385a.562.562 0 0 1-.84.61l-4.725-2.885a.562.562 0 0 0-.586 0L6.982 20.54a.562.562 0 0 1-.84-.61l1.285-5.386a.562.562 0 0 0-.182-.557l-4.204-3.602a.562.562 0 0 1 .321-.988l5.518-.442a.563.563 0 0 0 .475-.345L11.48 3.5Z"}))}const Ye=H.forwardRef(Ze);function Je({title:e,titleId:s,...t},a){return H.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},t),e?H.createElement("title",{id:s},e):null,H.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.568 3H5.25A2.25 2.25 0 0 0 3 5.25v4.318c0 .597.237 1.17.659 1.591l9.581 9.581c.699.699 1.78.872 2.607.33a18.095 18.095 0 0 0 5.223-5.223c.542-.827.369-1.908-.33-2.607L11.16 3.66A2.25 2.25 0 0 0 9.568 3Z"}),H.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 6h.008v.008H6V6Z"}))}const Xe=H.forwardRef(Je);function es({title:e,titleId:s,...t},a){return H.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},t),e?H.createElement("title",{id:s},e):null,H.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"}))}const ss=H.forwardRef(es);function ts({title:e,titleId:s,...t},a){return H.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},t),e?H.createElement("title",{id:s},e):null,H.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.288 15.038a5.25 5.25 0 0 1 7.424 0M5.106 11.856c3.807-3.808 9.98-3.808 13.788 0M1.924 8.674c5.565-5.565 14.587-5.565 20.152 0M12.53 18.22l-.53.53-.53-.53a.75.75 0 0 1 1.06 0Z"}))}const as=H.forwardRef(ts);function rs({title:e,titleId:s,...t},a){return H.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},t),e?H.createElement("title",{id:s},e):null,H.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const ls=H.forwardRef(rs),ns=()=>{const{user:e}=n(),{data:s,isLoading:r,refetch:l}=t({queryKey:["admin-dashboard",e?.id],queryFn:async()=>({total_users:1247,total_students:896,total_teachers:47,total_parents:651,active_alerts:2,memory_usage:67,cpu_usage:23,storage_usage:84,server_uptime:"99.9%"})});return r?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):a.jsx(a.Fragment,{children:a.jsxs("div",{className:"space-y-8",children:[a.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-800 text-white px-6 py-8",children:a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("h1",{className:"text-2xl font-bold",children:"System Command Center"}),a.jsxs("div",{className:"flex items-center bg-green-500 px-2 py-1 rounded-full text-xs",children:[a.jsx("div",{className:"w-2 h-2 bg-white rounded-full mr-2"}),"All Systems Operational"]})]}),a.jsx("p",{className:"text-blue-100 mt-1",children:"Comprehensive monitoring and management of Innovorex AI School Platform"})]}),a.jsxs(W.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>l(),className:"flex items-center bg-white/20 hover:bg-white/30 px-4 py-2 rounded-lg transition-colors",children:[a.jsx(d,{className:"h-4 w-4 mr-2"}),"Refresh"]})]})}),a.jsxs("div",{className:"px-6",children:[a.jsxs("div",{className:"grid grid-cols-4 gap-6 mb-8",children:[a.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white rounded-lg border border-gray-200 p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:a.jsx(i,{className:"h-5 w-5 text-blue-600"})}),a.jsx("div",{className:"ml-3",children:a.jsx("div",{className:"text-sm text-gray-600",children:"Total Users"})})]}),a.jsx("div",{className:"text-right",children:a.jsx("div",{className:"text-green-500 text-sm flex items-center",children:"↑ 12.5%"})})]}),a.jsx("div",{className:"text-3xl font-bold text-gray-900",children:s?.total_users}),a.jsx("div",{className:"text-sm text-gray-500",children:"All platform users"})]}),a.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white rounded-lg border border-gray-200 p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center",children:a.jsx(c,{className:"h-5 w-5 text-green-600"})}),a.jsx("div",{className:"ml-3",children:a.jsx("div",{className:"text-sm text-gray-600",children:"Active Students"})})]}),a.jsx("div",{className:"text-right",children:a.jsx("div",{className:"text-green-500 text-sm flex items-center",children:"↑ 8.2%"})})]}),a.jsx("div",{className:"text-3xl font-bold text-gray-900",children:s?.total_students}),a.jsx("div",{className:"text-sm text-gray-500",children:"Currently enrolled"})]}),a.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.25},className:"bg-white rounded-lg border border-gray-200 p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center",children:a.jsx(o,{className:"h-5 w-5 text-purple-600"})}),a.jsx("div",{className:"ml-3",children:a.jsx("div",{className:"text-sm text-gray-600",children:"Teaching Staff"})})]}),a.jsx("div",{className:"text-right",children:a.jsx("div",{className:"text-green-500 text-sm flex items-center",children:"↑ 5.1%"})})]}),a.jsx("div",{className:"text-3xl font-bold text-gray-900",children:s?.total_teachers}),a.jsx("div",{className:"text-sm text-gray-500",children:"Active instructors"})]}),a.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white rounded-lg border border-gray-200 p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"w-10 h-10 bg-orange-100 rounded-lg flex items-center justify-center",children:a.jsx(x,{className:"h-5 w-5 text-orange-600"})}),a.jsx("div",{className:"ml-3",children:a.jsx("div",{className:"text-sm text-gray-600",children:"Active Alerts"})})]}),a.jsx("div",{className:"text-right",children:a.jsx("div",{className:"text-red-500 text-sm flex items-center",children:"↓ 40.0%"})})]}),a.jsx("div",{className:"text-3xl font-bold text-gray-900",children:s?.active_alerts}),a.jsx("div",{className:"text-sm text-gray-500",children:"1 requires attention"})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-8",children:[a.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-white rounded-lg border border-gray-200",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(Ce,{className:"h-5 w-5 text-blue-600 mr-2"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"System Performance Monitoring"})]}),a.jsx("div",{className:"text-sm text-gray-500",children:"Real-time metrics"})]}),a.jsx("div",{className:"p-6",children:a.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[s?.memory_usage,"%"]}),a.jsx("div",{className:"text-sm text-gray-600",children:"Memory Usage"}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-2",children:a.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${s?.memory_usage}%`}})})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[s?.cpu_usage,"%"]}),a.jsx("div",{className:"text-sm text-gray-600",children:"CPU Usage"}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-2",children:a.jsx("div",{className:"bg-green-600 h-2 rounded-full",style:{width:`${s?.cpu_usage}%`}})})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"text-2xl font-bold text-orange-600",children:[s?.storage_usage,"%"]}),a.jsx("div",{className:"text-sm text-gray-600",children:"Storage Usage"}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-2",children:a.jsx("div",{className:"bg-orange-600 h-2 rounded-full",style:{width:`${s?.storage_usage}%`}})})]})]})})]}),a.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"bg-white rounded-lg border border-gray-200",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(o,{className:"h-5 w-5 text-blue-600 mr-2"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"User Management Activity"})]}),a.jsxs("div",{className:"flex items-center text-green-600",children:[a.jsx(m,{className:"h-4 w-4 mr-1"}),a.jsx("span",{className:"text-sm",children:"All Current"})]})]}),a.jsx("div",{className:"p-6",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 border border-green-200 rounded-lg",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(m,{className:"h-5 w-5 text-green-600 mr-3"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-green-900",children:"New Teacher Registration"}),a.jsx("div",{className:"text-sm text-green-700",children:"Dr. Sarah Wilson - Mathematics Dept."})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-green-700 font-medium",children:"APPROVED"}),a.jsx("div",{className:"text-sm text-green-600",children:"2 hours ago"})]})]}),a.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(u,{className:"h-5 w-5 text-blue-600 mr-3"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-blue-900",children:"Bulk Student Import"}),a.jsx("div",{className:"text-sm text-blue-700",children:"Processing 45 new student records"})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-blue-700 font-medium",children:"IN PROGRESS"}),a.jsx("div",{className:"text-sm text-blue-600",children:"85% complete"})]})]}),a.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 border border-gray-200 rounded-lg",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(i,{className:"h-5 w-5 text-gray-600 mr-3"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-gray-900",children:"Parent Access Review"}),a.jsx("div",{className:"text-sm text-gray-700",children:"Quarterly security audit scheduled"})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-gray-700 font-medium",children:"SCHEDULED"}),a.jsx("div",{className:"text-sm text-gray-600",children:"Sept 20, 10:00 AM"})]})]})]})})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[a.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},className:"bg-white rounded-lg border border-gray-200",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(h,{className:"h-5 w-5 text-orange-600 mr-2"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"System Alerts & Issues"})]}),a.jsx("a",{href:"#",className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:"View All →"})]}),a.jsx("div",{className:"p-6",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"w-2 h-2 bg-orange-500 rounded-full mr-3"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-gray-900",children:"Database backup running slower than usual"}),a.jsx("div",{className:"text-sm text-gray-600",children:"System Maintenance • 2 hours ago"})]})]}),a.jsx("div",{className:"bg-orange-100 text-orange-700 px-2 py-1 rounded text-xs font-medium",children:"medium"})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full mr-3"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-gray-900",children:"Multiple failed login attempts detected"}),a.jsx("div",{className:"text-sm text-gray-600",children:"Security Alert • 1 hour ago"})]})]}),a.jsx("div",{className:"bg-red-100 text-red-700 px-2 py-1 rounded text-xs font-medium",children:"high"})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mr-3"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-gray-900",children:"All scheduled maintenance completed"}),a.jsx("div",{className:"text-sm text-gray-600",children:"System Update • 6 hours ago"})]})]}),a.jsx("div",{className:"bg-green-100 text-green-700 px-2 py-1 rounded text-xs font-medium",children:"resolved"})]})]})})]}),a.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7},className:"bg-white rounded-lg border border-gray-200",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(ee,{className:"h-5 w-5 text-green-600 mr-2"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Platform Analytics"})]}),a.jsxs("div",{className:"flex items-center text-green-600",children:[a.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mr-2"}),a.jsx("span",{className:"text-sm font-medium",children:"Trending Up"})]})]}),a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-3xl font-bold text-gray-900",children:s?.server_uptime}),a.jsx("div",{className:"text-sm text-gray-600",children:"Server Uptime"}),a.jsx("div",{className:"text-xs text-green-600",children:"Last 30 days"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-3xl font-bold text-blue-600",children:"1.2M"}),a.jsx("div",{className:"text-sm text-gray-600",children:"Total Interactions"}),a.jsx("div",{className:"text-xs text-blue-600",children:"This month"})]})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[a.jsxs("div",{className:"p-3 bg-blue-50 rounded border border-blue-200",children:[a.jsx("div",{className:"text-lg font-bold text-blue-600",children:s?.total_students}),a.jsx("div",{className:"text-xs text-gray-600",children:"Active Students"})]}),a.jsxs("div",{className:"p-3 bg-purple-50 rounded border border-purple-200",children:[a.jsx("div",{className:"text-lg font-bold text-purple-600",children:s?.total_teachers}),a.jsx("div",{className:"text-xs text-gray-600",children:"Teaching Staff"})]}),a.jsxs("div",{className:"p-3 bg-green-50 rounded border border-green-200",children:[a.jsx("div",{className:"text-lg font-bold text-green-600",children:s?.total_parents}),a.jsx("div",{className:"text-xs text-gray-600",children:"Parent Accounts"})]})]})]})]})]})]})]})})},ds=()=>{const{data:e,isLoading:s,error:r,refetch:l}=t({queryKey:["admin-system-health"],queryFn:async()=>(await p.get("/admin/system-health")).data,refetchInterval:3e4}),n=e=>{if(0===e)return"0 B";const s=Math.floor(Math.log(e)/Math.log(1024));return Math.round(e/Math.pow(1024,s)*100)/100+" "+["B","KB","MB","GB"][s]},i=e=>{switch(e.toLowerCase()){case"connected":case"healthy":case"online":return"text-green-600 bg-green-100";case"disconnected":case"unhealthy":case"offline":return"text-red-600 bg-red-100";case"warning":case"degraded":return"text-yellow-600 bg-yellow-100";default:return"text-gray-600 bg-gray-100"}};return s?a.jsx(DashboardLayout,{children:a.jsxs("div",{className:"flex items-center justify-center h-64",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),a.jsx("span",{className:"ml-3 text-gray-600",children:"Loading system health..."})]})}):r?a.jsx(DashboardLayout,{children:a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsxs("div",{className:"text-center",children:[a.jsx(g,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Failed to load system health"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"Unable to fetch system status."}),a.jsx("button",{onClick:()=>l(),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors",children:"Retry"})]})})}):a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"System Health"}),a.jsx("p",{className:"text-gray-600",children:"Monitor system performance and service status"})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[a.jsx(u,{className:"h-4 w-4"}),a.jsxs("span",{children:["Last updated: ",new Date(e?.timestamp||"").toLocaleTimeString()]})]}),a.jsxs(W.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>l(),className:"flex items-center bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors",children:[a.jsx(d,{className:"h-4 w-4 mr-2"}),"Refresh"]})]})]}),a.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6 mb-8",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"w-12 h-12 rounded-lg flex items-center justify-center "+("healthy"===e?.status?"bg-green-100":"bg-red-100"),children:"healthy"===e?.status?a.jsx(m,{className:"h-6 w-6 text-green-600"}):a.jsx(se,{className:"h-6 w-6 text-red-600"})}),a.jsxs("div",{children:[a.jsxs("h2",{className:"text-xl font-bold text-gray-900",children:["System Status: ",e?.status?.charAt(0).toUpperCase()+(e?.status?.slice(1)||"")]}),a.jsxs("p",{className:"text-gray-600",children:["Environment: ",e?.environment]})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:["v",e?.version]}),a.jsxs("div",{className:"text-sm text-gray-600",children:["Uptime: ",e?.uptime?(e=>{const s=Math.floor(e/86400),t=Math.floor(e%86400/3600),a=Math.floor(e%3600/60);return s>0?`${s}d ${t}h ${a}m`:t>0?`${t}h ${a}m`:`${a}m`})(e.uptime):"Unknown"]})]})]})}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:Object.entries(e?.services||{}).map(([e,s])=>{const t=(e=>{switch(e.toLowerCase()){case"connected":case"healthy":case"online":return m;case"disconnected":case"unhealthy":case"offline":return se;default:return u}})(s);return a.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-lg border border-gray-200 p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center "+("erpnext"===e?"bg-blue-100":"database"===e?"bg-green-100":"redis"===e?"bg-red-100":"bg-purple-100"),children:"erpnext"===e?a.jsx(as,{className:"h-5 w-5 text-blue-600"}):"database"===e?a.jsx(fe,{className:"h-5 w-5 text-green-600"}):"redis"===e?a.jsx(g,{className:"h-5 w-5 text-red-600"}):a.jsx(te,{className:"h-5 w-5 text-purple-600"})}),a.jsx("div",{children:a.jsx("h3",{className:"font-semibold text-gray-900 capitalize",children:e})})]}),a.jsx(t,{className:"h-5 w-5 "+("connected"===s||"healthy"===s?"text-green-500":"disconnected"===s||"unhealthy"===s?"text-red-500":"text-yellow-500")})]}),a.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${i(s)}`,children:s.charAt(0).toUpperCase()+s.slice(1)})]},e)})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[a.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Memory Usage"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm text-gray-600",children:"RSS"}),a.jsx("span",{className:"text-sm font-medium",children:n(e?.memory?.rss||0)})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm text-gray-600",children:"Heap Total"}),a.jsx("span",{className:"text-sm font-medium",children:n(e?.memory?.heapTotal||0)})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm text-gray-600",children:"Heap Used"}),a.jsx("span",{className:"text-sm font-medium",children:n(e?.memory?.heapUsed||0)})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm text-gray-600",children:"External"}),a.jsx("span",{className:"text-sm font-medium",children:n(e?.memory?.external||0)})]}),a.jsxs("div",{className:"mt-4",children:[a.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-1",children:[a.jsx("span",{children:"Heap Usage"}),a.jsxs("span",{children:[e?.memory?.heapTotal?Math.round(e.memory.heapUsed/e.memory.heapTotal*100):0,"%"]})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${e?.memory?.heapTotal?Math.round(e.memory.heapUsed/e.memory.heapTotal*100):0}%`}})})]})]})]}),a.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Performance Metrics"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm text-gray-600",children:"CPU Usage"}),a.jsxs("span",{className:"text-sm font-medium",children:[e?.cpu_usage||"N/A","%"]})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm text-gray-600",children:"Disk Usage"}),a.jsxs("span",{className:"text-sm font-medium",children:[e?.disk_usage||"N/A","%"]})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm text-gray-600",children:"Active Connections"}),a.jsx("span",{className:"text-sm font-medium",children:e?.active_connections||"N/A"})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm text-gray-600",children:"Response Time"}),a.jsx("span",{className:"text-sm font-medium text-green-600",children:"~15ms"})]})]})]})]}),a.jsxs("div",{className:"bg-white rounded-lg border border-gray-200",children:[a.jsx("div",{className:"p-6 border-b border-gray-200",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Recent System Events"})}),a.jsx("div",{className:"p-6",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx(m,{className:"h-5 w-5 text-green-500 mt-0.5"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-900",children:"System health check passed"}),a.jsx("p",{className:"text-xs text-gray-500",children:"2 minutes ago"})]})]}),a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx(m,{className:"h-5 w-5 text-green-500 mt-0.5"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-900",children:"ERPNext connection verified"}),a.jsx("p",{className:"text-xs text-gray-500",children:"5 minutes ago"})]})]}),a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx(g,{className:"h-5 w-5 text-blue-500 mt-0.5"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-900",children:"Server restarted successfully"}),a.jsx("p",{className:"text-xs text-gray-500",children:"1 hour ago"})]})]})]})})]})]})};const is=new class{constructor(){s(this,"baseUrl","/api/sync")}async syncUser(e){try{return(await p.post(`${this.baseUrl}/user`,e)).data}catch(s){return{success:!1,error:s.response?.data?.message||"Failed to sync user"}}}async syncProgram(e){try{return(await p.post(`${this.baseUrl}/program`,e)).data}catch(s){return{success:!1,error:s.response?.data?.message||"Failed to sync program"}}}async syncCourse(e){try{return(await p.post(`${this.baseUrl}/course`,e)).data}catch(s){return{success:!1,error:s.response?.data?.message||"Failed to sync course"}}}async syncStudent(e){try{return(await p.post(`${this.baseUrl}/student`,e)).data}catch(s){return{success:!1,error:s.response?.data?.message||"Failed to sync student"}}}async syncInstructor(e){try{return(await p.post(`${this.baseUrl}/instructor`,e)).data}catch(s){return{success:!1,error:s.response?.data?.message||"Failed to sync instructor"}}}async syncAttendance(e){try{return(await p.post(`${this.baseUrl}/attendance`,e)).data}catch(s){return{success:!1,error:s.response?.data?.message||"Failed to sync attendance"}}}async syncAssessment(e){try{return(await p.post(`${this.baseUrl}/assessment`,e)).data}catch(s){return{success:!1,error:s.response?.data?.message||"Failed to sync assessment"}}}async syncFees(e){try{return(await p.post(`${this.baseUrl}/fees`,e)).data}catch(s){return{success:!1,error:s.response?.data?.message||"Failed to sync fees"}}}async triggerFullSync(){try{return(await p.post(`${this.baseUrl}/full`)).data}catch(e){return{success:!1,error:e.response?.data?.message||"Failed to trigger full sync"}}}async getSyncStatus(){try{return(await p.get(`${this.baseUrl}/status`)).data}catch(e){return null}}prepareUserForSync(e){return{id:e.id,firstName:e.firstName||e.first_name,middleName:e.middleName||e.middle_name,lastName:e.lastName||e.last_name,email:e.email,phone:e.phone||e.mobile||e.student_mobile_number,role:e.role,gender:e.gender,dateOfBirth:e.dateOfBirth||e.date_of_birth,bloodGroup:e.bloodGroup||e.blood_group,address:e.address||e.address_line_1,city:e.city,state:e.state,pincode:e.pincode,isActive:void 0===e.isActive||e.isActive,employeeId:e.employeeId||e.employee_id||e.employee,department:e.department,erpnextId:e.erpnextId||e.name}}prepareStudentForSync(e){return{id:e.id,firstName:e.firstName||e.first_name,middleName:e.middleName||e.middle_name,lastName:e.lastName||e.last_name,email:e.email||e.student_email_id,phone:e.phone||e.student_mobile_number,gender:e.gender,dateOfBirth:e.dateOfBirth||e.date_of_birth,bloodGroup:e.bloodGroup||e.blood_group,category:e.category||e.student_category,batch:e.batch||e.student_batch_name,program:e.program,isActive:1===e.enabled||e.isActive,erpnextId:e.erpnextId||e.name}}prepareInstructorForSync(e){return{id:e.id,name:e.instructor_name||`${e.firstName} ${e.lastName}`,gender:e.gender,employeeId:e.employee||e.employee_id,department:e.department,course:e.custom_course||e.course,isActive:"Active"===e.status||e.isActive,erpnextId:e.erpnextId||e.name}}},cs=()=>{const e=r(),[s,n]=H.useState(""),[c,x]=H.useState("all"),[m,u]=H.useState("all"),[h,g]=H.useState("all"),[_,C]=H.useState("all"),[S,k]=H.useState(!1),[L,A]=H.useState(!1),[D,E]=H.useState(!1),[P,q]=H.useState(!1),[F,I]=H.useState(!1),[M,R]=H.useState(null),[B,O]=H.useState({role:"student",status:"active",gender:"Male"}),{data:U,isLoading:$,refetch:T}=t({queryKey:["all-users",c,m,h,_,s],queryFn:async()=>{const e=new URLSearchParams;"all"!==c&&e.append("role",c),"all"!==m&&e.append("status",m),"all"!==h&&e.append("program",h),"all"!==_&&e.append("batch",_),s&&e.append("search",s);return(await p.get(`/users/all?${e}`)).data}}),{data:K=[]}=t({queryKey:["programs"],queryFn:async()=>(await p.get("/programs")).data}),{data:G=[]}=t({queryKey:["student-groups"],queryFn:async()=>(await p.get("/student-groups")).data}),W=l({mutationFn:async e=>{const s=await p.post("/users/create",e),t=is.prepareUserForSync({...e,id:s.data.id});return await is.syncUser(t),s.data},onSuccess:()=>{j.success("User created and synced to ERPNext successfully"),e.invalidateQueries({queryKey:["all-users"]}),A(!1),X()},onError:e=>{j.error(e.response?.data?.message||"Failed to create user")}}),V=l({mutationFn:async({id:e,data:s})=>{const t=await p.put(`/users/${e}`,s),a=is.prepareUserForSync({...s,id:e});return await is.syncUser(a),t.data},onSuccess:async()=>{j.success("User updated and synced to ERPNext successfully"),await e.invalidateQueries({queryKey:["all-users"]}),await e.refetchQueries({queryKey:["all-users"]}),E(!1),R(null),X()},onError:e=>{j.error(e.response?.data?.message||"Failed to update user")}}),Q=l({mutationFn:async e=>(await p.delete(`/users/${e}`)).data,onSuccess:s=>{s&&s.data?e.setQueryData(["all-users"],{users:s.data}):e.invalidateQueries({queryKey:["all-users"]}),j.success("User deleted successfully"),I(!1),R(null)},onError:e=>{j.error(e.response?.data?.message||"Failed to delete user")}}),z=U?.users||[],Z=[...new Set(G.map(e=>e.batch).filter(Boolean))].sort(),Y=[c,m,h,_].filter(e=>"all"!==e).length,J=()=>{x("all"),u("all"),g("all"),C("all"),n("")},X=()=>{O({role:"student",status:"active",gender:"Male"})},ee=e=>e.student_name||e.employee_name||e.name||`${e.first_name||""} ${e.last_name||""}`.trim()||"Unknown User",se=e=>{switch(e){case"student":return"bg-blue-100 text-blue-800";case"teacher":return"bg-green-100 text-green-800";case"admin":return"bg-purple-100 text-purple-800";case"parent":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}};return a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"User Management"}),a.jsx("p",{className:"text-gray-600",children:"Manage all users, assign classes and subjects"})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsxs("button",{onClick:()=>{X(),A(!0)},className:"flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors",children:[a.jsx(Ke,{className:"h-5 w-5"}),a.jsx("span",{children:"Add User"})]}),a.jsxs("button",{onClick:()=>{const e=z.map(e=>({Name:ee(e),ID:e.id,Email:e.email,Role:e.role,Status:e.status||"Active",Program:e.program||"N/A",Department:e.department||"N/A"})),s=[Object.keys(e[0]||{}).join(","),...e.map(e=>Object.values(e).join(","))].join("\n"),t=new Blob([s],{type:"text/csv"}),a=window.URL.createObjectURL(t),r=document.createElement("a");r.href=a,r.download=`users-export-${(new Date).toISOString().split("T")[0]}.csv`,r.click(),window.URL.revokeObjectURL(a),j.success("Users exported successfully")},disabled:0===z.length,className:"flex items-center gap-2 bg-green-600 hover:bg-green-700 disabled:bg-gray-400 text-white px-4 py-2 rounded-lg transition-colors",children:[a.jsx(de,{className:"h-5 w-5"}),a.jsx("span",{children:"Export"})]}),a.jsx("button",{onClick:()=>T(),className:"flex items-center bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg transition-colors",children:a.jsx(d,{className:"h-5 w-5"})})]})]}),a.jsxs("div",{className:"grid grid-cols-4 gap-6 mb-8",children:[a.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:a.jsx(y,{className:"h-6 w-6 text-blue-600"})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("div",{className:"text-2xl font-bold text-gray-900",children:z.filter(e=>"student"===e.role).length}),a.jsx("div",{className:"text-sm text-gray-600",children:"Total Students"})]})]})}),a.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:a.jsx(i,{className:"h-6 w-6 text-green-600"})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("div",{className:"text-2xl font-bold text-gray-900",children:z.filter(e=>"teacher"===e.role).length}),a.jsx("div",{className:"text-sm text-gray-600",children:"Total Teachers"})]})]})}),a.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center",children:a.jsx(b,{className:"h-6 w-6 text-purple-600"})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("div",{className:"text-2xl font-bold text-gray-900",children:K.length}),a.jsx("div",{className:"text-sm text-gray-600",children:"Programs"})]})]})}),a.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center",children:a.jsx(o,{className:"h-6 w-6 text-orange-600"})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("div",{className:"text-2xl font-bold text-gray-900",children:G.length}),a.jsx("div",{className:"text-sm text-gray-600",children:"Student Groups"})]})]})})]}),a.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 mb-6",children:[a.jsx("div",{className:"p-4 border-b border-gray-200",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{className:"flex-1 relative",children:[a.jsx(N,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Search by name, email, or ID...",value:s,onChange:e=>n(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),a.jsxs("select",{value:c,onChange:e=>x(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[a.jsx("option",{value:"all",children:"All Roles"}),a.jsx("option",{value:"student",children:"Students"}),a.jsx("option",{value:"teacher",children:"Teachers"}),a.jsx("option",{value:"admin",children:"Admins"}),a.jsx("option",{value:"parent",children:"Parents"})]}),a.jsxs("button",{onClick:()=>k(!S),className:"flex items-center gap-2 px-4 py-2 border rounded-lg transition-colors "+(S?"bg-blue-50 border-blue-300 text-blue-700":"border-gray-300 hover:bg-gray-50"),children:[a.jsx(Ae,{className:"h-5 w-5"}),a.jsx("span",{children:"Filters"}),Y>0&&a.jsx("span",{className:"bg-blue-600 text-white text-xs px-2 py-0.5 rounded-full",children:Y}),a.jsx(f,{className:"h-4 w-4 transition-transform "+(S?"rotate-180":"")})]}),Y>0&&a.jsxs("button",{onClick:J,className:"flex items-center gap-1 px-3 py-2 text-sm text-gray-600 hover:text-gray-900 transition-colors",children:[a.jsx(v,{className:"h-4 w-4"}),"Clear"]})]})}),S&&a.jsxs("div",{className:"p-4 bg-gray-50 border-t border-gray-200",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),a.jsxs("select",{value:m,onChange:e=>u(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[a.jsx("option",{value:"all",children:"All Status"}),a.jsx("option",{value:"active",children:"Active"}),a.jsx("option",{value:"inactive",children:"Inactive"}),a.jsx("option",{value:"pending",children:"Pending"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Program/Class"}),a.jsxs("select",{value:h,onChange:e=>g(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",disabled:"teacher"===c||"admin"===c,children:[a.jsx("option",{value:"all",children:"All Programs"}),K.map(e=>a.jsx("option",{value:e.id,children:e.name},e.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Batch/Section"}),a.jsxs("select",{value:_,onChange:e=>C(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",disabled:"teacher"===c||"admin"===c,children:[a.jsx("option",{value:"all",children:"All Batches"}),Z.map(e=>a.jsxs("option",{value:e,children:["Batch ",e]},e))]})]})]}),a.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[a.jsxs("div",{className:"text-sm text-gray-600",children:[z.length," users found",s&&` matching "${s}"`]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:J,className:"px-4 py-2 text-sm border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Reset Filters"}),a.jsx("button",{onClick:()=>T(),className:"px-4 py-2 text-sm bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Apply Filters"})]})]})]})]}),a.jsx("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Classes/Department"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-200",children:$?a.jsx("tr",{children:a.jsx("td",{colSpan:6,className:"px-6 py-4 text-center text-gray-500",children:"Loading users..."})}):0===z.length?a.jsx("tr",{children:a.jsx("td",{colSpan:6,className:"px-6 py-4 text-center text-gray-500",children:"No users found"})}):z.map(e=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:ee(e)}),a.jsxs("div",{className:"text-sm text-gray-500",children:["ID: ",e.id]})]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${se(e.role)}`,children:e.role})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.email}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:"student"===e.role?e.assigned_classes?.join(", ")||e.program||"None":e.department||"N/A"}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full "+("active"===e.status?"bg-green-100 text-green-800":"inactive"===e.status?"bg-gray-100 text-gray-800":"bg-yellow-100 text-yellow-800"),children:e.status||"Active"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>(e=>{R(e),q(!0)})(e),className:"text-blue-600 hover:text-blue-800 p-1",title:"View",children:a.jsx(ae,{className:"h-5 w-5"})}),a.jsx("button",{onClick:()=>(e=>{R(e),O({first_name:e.first_name||e.name?.split(" ")[0]||"",last_name:e.last_name||e.name?.split(" ").slice(1).join(" ")||"",email:e.email,phone:e.phone,role:e.role,status:e.status||"active",gender:e.gender||"Male",date_of_birth:e.date_of_birth,program:e.program,department:e.department,address:e.address,city:e.city,state:e.state,pincode:e.pincode,blood_group:e.blood_group,employee_id:e.employee_id}),E(!0)})(e),className:"text-gray-600 hover:text-gray-800 p-1",title:"Edit",children:a.jsx(Oe,{className:"h-5 w-5"})}),a.jsx("button",{onClick:()=>(e=>{R(e),I(!0)})(e),className:"text-red-600 hover:text-red-800 p-1",title:"Delete",children:a.jsx(w,{className:"h-5 w-5"})})]})})]},e.id))})]})})}),L&&a.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsx("div",{className:"p-6 border-b border-gray-200",children:a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Add New User"})}),a.jsxs("form",{onSubmit:e=>{e.preventDefault(),W.mutate(B)},className:"p-6",children:[a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-3 pb-2 border-b",children:"Basic Information"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name *"}),a.jsx("input",{type:"text",required:!0,value:B.first_name||"",onChange:e=>O({...B,first_name:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Middle Name"}),a.jsx("input",{type:"text",value:B.middle_name||"",onChange:e=>O({...B,middle_name:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name"}),a.jsx("input",{type:"text",value:B.last_name||"",onChange:e=>O({...B,last_name:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role *"}),a.jsxs("select",{required:!0,value:B.role||"student",onChange:e=>O({...B,role:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"student",children:"Student"}),a.jsx("option",{value:"teacher",children:"Teacher"}),a.jsx("option",{value:"admin",children:"Admin"}),a.jsx("option",{value:"parent",children:"Parent"})]})]})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-3 pb-2 border-b",children:"Contact Information"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email *"}),a.jsx("input",{type:"email",required:!0,value:B.email||"",onChange:e=>O({...B,email:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mobile Number"}),a.jsx("input",{type:"tel",value:B.phone||"",onChange:e=>O({...B,phone:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-3 pb-2 border-b",children:"Personal Information"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Gender"}),a.jsxs("select",{value:B.gender||"Male",onChange:e=>O({...B,gender:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"Male",children:"Male"}),a.jsx("option",{value:"Female",children:"Female"}),a.jsx("option",{value:"Other",children:"Other"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date of Birth"}),a.jsx("input",{type:"date",value:B.date_of_birth||"",onChange:e=>O({...B,date_of_birth:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Blood Group"}),a.jsxs("select",{value:B.blood_group||"",onChange:e=>O({...B,blood_group:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"",children:"Select"}),a.jsx("option",{value:"A+",children:"A+"}),a.jsx("option",{value:"A-",children:"A-"}),a.jsx("option",{value:"B+",children:"B+"}),a.jsx("option",{value:"B-",children:"B-"}),a.jsx("option",{value:"AB+",children:"AB+"}),a.jsx("option",{value:"AB-",children:"AB-"}),a.jsx("option",{value:"O+",children:"O+"}),a.jsx("option",{value:"O-",children:"O-"})]})]})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-3 pb-2 border-b",children:"Address Information"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address Line 1"}),a.jsx("input",{type:"text",value:B.address||"",onChange:e=>O({...B,address:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City"}),a.jsx("input",{type:"text",value:B.city||"",onChange:e=>O({...B,city:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"State"}),a.jsx("input",{type:"text",value:B.state||"",onChange:e=>O({...B,state:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Pincode"}),a.jsx("input",{type:"text",value:B.pincode||"",onChange:e=>O({...B,pincode:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]})]}),"student"===B.role&&a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-3 pb-2 border-b",children:"Academic Information"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Program/Class"}),a.jsxs("select",{value:B.program||"",onChange:e=>O({...B,program:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"",children:"Select Program"}),K.map(e=>a.jsx("option",{value:e.name,children:e.name},e.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Batch/Section"}),a.jsx("input",{type:"text",value:B.student_batch_name||"",onChange:e=>O({...B,student_batch_name:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Student Category"}),a.jsxs("select",{value:B.student_category||"General",onChange:e=>O({...B,student_category:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"General",children:"General"}),a.jsx("option",{value:"SC",children:"SC"}),a.jsx("option",{value:"ST",children:"ST"}),a.jsx("option",{value:"OBC",children:"OBC"}),a.jsx("option",{value:"EWS",children:"EWS"})]})]})]})]}),"teacher"===B.role&&a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-3 pb-2 border-b",children:"Professional Information"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Employee ID"}),a.jsx("input",{type:"text",value:B.employee_id||"",onChange:e=>O({...B,employee_id:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Department"}),a.jsx("input",{type:"text",value:B.department||"",onChange:e=>O({...B,department:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]})]}),"parent"===B.role&&a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-3 pb-2 border-b",children:"Guardian Information"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Relation Type"}),a.jsxs("select",{value:B.relation_type||"",onChange:e=>O({...B,relation_type:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"",children:"Select"}),a.jsx("option",{value:"Father",children:"Father"}),a.jsx("option",{value:"Mother",children:"Mother"}),a.jsx("option",{value:"Guardian",children:"Guardian"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Occupation"}),a.jsx("input",{type:"text",value:B.occupation||"",onChange:e=>O({...B,occupation:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Annual Income"}),a.jsx("input",{type:"text",value:B.annual_income||"",onChange:e=>O({...B,annual_income:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Linked Student(s)"}),a.jsx("input",{type:"text",value:B.linked_students||"",onChange:e=>O({...B,linked_students:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Enter student IDs separated by comma"})]})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-3 pb-2 border-b",children:"System Information"}),a.jsx("div",{className:"grid grid-cols-2 gap-4",children:a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),a.jsxs("select",{value:B.status||"active",onChange:e=>O({...B,status:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"active",children:"Active"}),a.jsx("option",{value:"inactive",children:"Inactive"}),a.jsx("option",{value:"pending",children:"Pending"})]})]})})]})]}),a.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[a.jsx("button",{type:"button",onClick:()=>A(!1),className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:W.isPending,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400",children:W.isPending?"Creating...":"Create User"})]})]})]})}),D&&M&&a.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsx("div",{className:"p-6 border-b border-gray-200",children:a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Edit User"})}),a.jsxs("form",{onSubmit:e=>{e.preventDefault(),M&&V.mutate({id:M.id,data:B})},className:"p-6",children:[a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-3 pb-2 border-b",children:"Basic Information"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name *"}),a.jsx("input",{type:"text",required:!0,value:B.first_name||"",onChange:e=>O({...B,first_name:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Middle Name"}),a.jsx("input",{type:"text",value:B.middle_name||"",onChange:e=>O({...B,middle_name:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name"}),a.jsx("input",{type:"text",value:B.last_name||"",onChange:e=>O({...B,last_name:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role *"}),a.jsxs("select",{required:!0,value:B.role||"student",onChange:e=>O({...B,role:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"student",children:"Student"}),a.jsx("option",{value:"teacher",children:"Teacher"}),a.jsx("option",{value:"admin",children:"Admin"}),a.jsx("option",{value:"parent",children:"Parent"})]})]})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-3 pb-2 border-b",children:"Contact Information"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email *"}),a.jsx("input",{type:"email",required:!0,value:B.email||"",onChange:e=>O({...B,email:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mobile Number"}),a.jsx("input",{type:"tel",value:B.phone||"",onChange:e=>O({...B,phone:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-3 pb-2 border-b",children:"Personal Information"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Gender"}),a.jsxs("select",{value:B.gender||"Male",onChange:e=>O({...B,gender:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"Male",children:"Male"}),a.jsx("option",{value:"Female",children:"Female"}),a.jsx("option",{value:"Other",children:"Other"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date of Birth"}),a.jsx("input",{type:"date",value:B.date_of_birth||"",onChange:e=>O({...B,date_of_birth:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Blood Group"}),a.jsxs("select",{value:B.blood_group||"",onChange:e=>O({...B,blood_group:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"",children:"Select"}),a.jsx("option",{value:"A+",children:"A+"}),a.jsx("option",{value:"A-",children:"A-"}),a.jsx("option",{value:"B+",children:"B+"}),a.jsx("option",{value:"B-",children:"B-"}),a.jsx("option",{value:"AB+",children:"AB+"}),a.jsx("option",{value:"AB-",children:"AB-"}),a.jsx("option",{value:"O+",children:"O+"}),a.jsx("option",{value:"O-",children:"O-"})]})]})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-3 pb-2 border-b",children:"Address Information"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address Line 1"}),a.jsx("input",{type:"text",value:B.address||"",onChange:e=>O({...B,address:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City"}),a.jsx("input",{type:"text",value:B.city||"",onChange:e=>O({...B,city:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"State"}),a.jsx("input",{type:"text",value:B.state||"",onChange:e=>O({...B,state:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Pincode"}),a.jsx("input",{type:"text",value:B.pincode||"",onChange:e=>O({...B,pincode:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]})]}),"student"===B.role&&a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-3 pb-2 border-b",children:"Academic Information"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Program/Class"}),a.jsxs("select",{value:B.program||"",onChange:e=>O({...B,program:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"",children:"Select Program"}),K.map(e=>a.jsx("option",{value:e.name,children:e.name},e.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Batch/Section"}),a.jsx("input",{type:"text",value:B.student_batch_name||"",onChange:e=>O({...B,student_batch_name:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Student Category"}),a.jsxs("select",{value:B.student_category||"General",onChange:e=>O({...B,student_category:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"General",children:"General"}),a.jsx("option",{value:"SC",children:"SC"}),a.jsx("option",{value:"ST",children:"ST"}),a.jsx("option",{value:"OBC",children:"OBC"}),a.jsx("option",{value:"EWS",children:"EWS"})]})]})]})]}),"teacher"===B.role&&a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-3 pb-2 border-b",children:"Professional Information"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Employee ID"}),a.jsx("input",{type:"text",value:B.employee_id||"",onChange:e=>O({...B,employee_id:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Department"}),a.jsx("input",{type:"text",value:B.department||"",onChange:e=>O({...B,department:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]})]}),"parent"===B.role&&a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-3 pb-2 border-b",children:"Guardian Information"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Relation Type"}),a.jsxs("select",{value:B.relation_type||"",onChange:e=>O({...B,relation_type:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"",children:"Select"}),a.jsx("option",{value:"Father",children:"Father"}),a.jsx("option",{value:"Mother",children:"Mother"}),a.jsx("option",{value:"Guardian",children:"Guardian"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Occupation"}),a.jsx("input",{type:"text",value:B.occupation||"",onChange:e=>O({...B,occupation:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Annual Income"}),a.jsx("input",{type:"text",value:B.annual_income||"",onChange:e=>O({...B,annual_income:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Linked Student(s)"}),a.jsx("input",{type:"text",value:B.linked_students||"",onChange:e=>O({...B,linked_students:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Enter student IDs separated by comma"})]})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-3 pb-2 border-b",children:"System Information"}),a.jsx("div",{className:"grid grid-cols-2 gap-4",children:a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),a.jsxs("select",{value:B.status||"active",onChange:e=>O({...B,status:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"active",children:"Active"}),a.jsx("option",{value:"inactive",children:"Inactive"}),a.jsx("option",{value:"pending",children:"Pending"})]})]})})]})]}),a.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[a.jsx("button",{type:"button",onClick:()=>{E(!1),R(null)},className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:V.isPending,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400",children:V.isPending?"Updating...":"Update User"})]})]})]})}),P&&M&&a.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"p-6 border-b border-gray-200 flex justify-between items-center",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"User Details - Complete Profile"}),a.jsx("button",{onClick:()=>{q(!1),R(null)},className:"text-gray-400 hover:text-gray-600",children:a.jsx(v,{className:"h-6 w-6"})})]}),a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4 border-b pb-2",children:"Basic Information"}),a.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"ID"}),a.jsx("p",{className:"mt-1 text-sm text-gray-900",children:M.id||M.name||"N/A"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"First Name"}),a.jsx("p",{className:"mt-1 text-sm text-gray-900",children:M.first_name||"N/A"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Middle Name"}),a.jsx("p",{className:"mt-1 text-sm text-gray-900",children:M.middle_name||"N/A"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Last Name"}),a.jsx("p",{className:"mt-1 text-sm text-gray-900",children:M.last_name||"N/A"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Full Name"}),a.jsx("p",{className:"mt-1 text-sm text-gray-900",children:ee(M)})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Role"}),a.jsx("p",{className:"mt-1",children:a.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${se(M.role)}`,children:M.role})})]})]})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4 border-b pb-2",children:"Contact Information"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Email"}),a.jsx("p",{className:"mt-1 text-sm text-gray-900",children:M.email||M.student_email_id||"N/A"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Mobile Number"}),a.jsx("p",{className:"mt-1 text-sm text-gray-900",children:M.phone||M.student_mobile_number||M.mobile_number||"N/A"})]})]})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4 border-b pb-2",children:"Personal Information"}),a.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Gender"}),a.jsx("p",{className:"mt-1 text-sm text-gray-900",children:M.gender||"N/A"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Date of Birth"}),a.jsx("p",{className:"mt-1 text-sm text-gray-900",children:M.date_of_birth||"N/A"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Blood Group"}),a.jsx("p",{className:"mt-1 text-sm text-gray-900",children:M.blood_group||"N/A"})]})]})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4 border-b pb-2",children:"Address Information"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Address Line 1"}),a.jsx("p",{className:"mt-1 text-sm text-gray-900",children:M.address||M.address_line_1||"N/A"})]}),a.jsxs("div",{className:"col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Address Line 2"}),a.jsx("p",{className:"mt-1 text-sm text-gray-900",children:M.address_line_2||"N/A"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"City"}),a.jsx("p",{className:"mt-1 text-sm text-gray-900",children:M.city||"N/A"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"State"}),a.jsx("p",{className:"mt-1 text-sm text-gray-900",children:M.state||"N/A"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Country"}),a.jsx("p",{className:"mt-1 text-sm text-gray-900",children:M.country||"N/A"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Pincode"}),a.jsx("p",{className:"mt-1 text-sm text-gray-900",children:M.pincode||"N/A"})]})]})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4 border-b pb-2",children:"student"===M.role?"Academic Information":"Professional Information"}),a.jsxs("div",{className:"grid grid-cols-3 gap-4",children:["student"===M.role&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Program"}),a.jsx("p",{className:"mt-1 text-sm text-gray-900",children:M.program||"N/A"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Batch"}),a.jsx("p",{className:"mt-1 text-sm text-gray-900",children:M.student_batch_name||M.batch||"N/A"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Category"}),a.jsx("p",{className:"mt-1 text-sm text-gray-900",children:M.student_category||"N/A"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Admission Date"}),a.jsx("p",{className:"mt-1 text-sm text-gray-900",children:M.joining_date||"N/A"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Student Group"}),a.jsx("p",{className:"mt-1 text-sm text-gray-900",children:M.student_group||"N/A"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Roll Number"}),a.jsx("p",{className:"mt-1 text-sm text-gray-900",children:M.roll_number||"N/A"})]})]}),"teacher"===M.role&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Employee ID"}),a.jsx("p",{className:"mt-1 text-sm text-gray-900",children:M.employee_id||M.employee||"N/A"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Department"}),a.jsx("p",{className:"mt-1 text-sm text-gray-900",children:M.department||"N/A"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Designation"}),a.jsx("p",{className:"mt-1 text-sm text-gray-900",children:M.designation||"N/A"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Joining Date"}),a.jsx("p",{className:"mt-1 text-sm text-gray-900",children:M.joining_date||"N/A"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Qualification"}),a.jsx("p",{className:"mt-1 text-sm text-gray-900",children:M.qualification||"N/A"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Experience"}),a.jsx("p",{className:"mt-1 text-sm text-gray-900",children:M.experience||"N/A"})]})]}),"parent"===M.role&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Occupation"}),a.jsx("p",{className:"mt-1 text-sm text-gray-900",children:M.occupation||"N/A"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Company"}),a.jsx("p",{className:"mt-1 text-sm text-gray-900",children:M.company||"N/A"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Work Address"}),a.jsx("p",{className:"mt-1 text-sm text-gray-900",children:M.work_address||"N/A"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Annual Income"}),a.jsx("p",{className:"mt-1 text-sm text-gray-900",children:M.annual_income||"N/A"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Education"}),a.jsx("p",{className:"mt-1 text-sm text-gray-900",children:M.education||"N/A"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Relationship"}),a.jsx("p",{className:"mt-1 text-sm text-gray-900",children:M.relationship||"N/A"})]})]})]})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4 border-b pb-2",children:"System Information"}),a.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Status"}),a.jsx("p",{className:"mt-1",children:a.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full "+("active"===M.status||1===M.enabled?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:M.status||(M.enabled?"Active":"Inactive")})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Created By"}),a.jsx("p",{className:"mt-1 text-sm text-gray-900",children:M.owner||M.created_by||"N/A"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Created On"}),a.jsx("p",{className:"mt-1 text-sm text-gray-900",children:M.creation||M.created_at||"N/A"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Modified By"}),a.jsx("p",{className:"mt-1 text-sm text-gray-900",children:M.modified_by||"N/A"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Modified On"}),a.jsx("p",{className:"mt-1 text-sm text-gray-900",children:M.modified||M.updated_at||"N/A"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"ERPNext ID"}),a.jsx("p",{className:"mt-1 text-sm text-gray-900",children:M.name||M.erpnextId||"N/A"})]})]})]}),Object.keys(M).filter(e=>!["id","name","first_name","middle_name","last_name","email","phone","role","status","gender","date_of_birth","blood_group","address","city","state","pincode","program","department","created_at","updated_at","password"].includes(e)).length>0&&a.jsxs("div",{className:"mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4 border-b pb-2",children:"Additional Information"}),a.jsx("div",{className:"grid grid-cols-3 gap-4",children:Object.entries(M).filter(([e])=>!["id","name","first_name","middle_name","last_name","email","phone","role","status","gender","date_of_birth","blood_group","address","city","state","pincode","program","department","created_at","updated_at","password","student_email_id","student_mobile_number","address_line_1","address_line_2","student_batch_name","student_category","employee_id","employee","mobile_number","enabled","owner","creation","modified","modified_by","erpnextId"].includes(e)).map(([e,s])=>a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:e.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase())}),a.jsx("p",{className:"mt-1 text-sm text-gray-900",children:s?.toString()||"N/A"})]},e))})]}),a.jsxs("div",{className:"mt-6 flex justify-end gap-3 border-t pt-4",children:[a.jsx("button",{onClick:()=>{q(!1),E(!0)},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Edit User"}),a.jsx("button",{onClick:()=>{q(!1),R(null)},className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Close"})]})]})]})}),F&&M&&a.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center p-4 z-50",children:a.jsx("div",{className:"bg-white rounded-lg max-w-md w-full",children:a.jsxs("div",{className:"p-6",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Delete User"}),a.jsxs("p",{className:"mt-2 text-sm text-gray-500",children:["Are you sure you want to delete ",a.jsx("strong",{children:ee(M)}),"? This action cannot be undone."]}),a.jsxs("div",{className:"mt-4 flex justify-end gap-3",children:[a.jsx("button",{onClick:()=>{I(!1),R(null)},className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),a.jsx("button",{onClick:()=>{M&&Q.mutate(M.id)},disabled:Q.isPending,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:bg-gray-400",children:Q.isPending?"Deleting...":"Delete"})]})]})})})]})},os=(e,s,a)=>{const{user:r,isAuthenticated:l,isLoading:d}=n(),i="teacher"===r?.role,c=r?.instructorId||"EDU-INS-2025-00001",o=(i?s.teacher:s.admin).replace("{instructorId}",c);return t({queryKey:[e,r?.role,c],queryFn:async()=>{const e=await p.get(o);return e.data&&e.data.data?e.data.data:e.data},enabled:l&&!d&&!!r,...a})},xs=()=>os("courses",{admin:"/courses",teacher:"/teacher/courses/{instructorId}"}),ms=()=>os("programs",{admin:"/programs",teacher:"/teacher/programs/{instructorId}"}),us=({isOpen:e,onClose:s,course:t,onSave:r})=>{const[l,n]=H.useState({course_name:"",course_code:"",department:"",course_abbreviation:""});Q.useEffect(()=>{n(t?{course_name:t.course_name||"",course_code:t.course_code||"",department:t.department||"",course_abbreviation:t.course_abbreviation||""}:{course_name:"",course_code:"",department:"",course_abbreviation:""})},[t]);return e?a.jsx(V,{children:a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs(W.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white rounded-lg p-6 w-full max-w-md",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h2",{className:"text-xl font-semibold",children:t?"Edit Course":"Add New Course"}),a.jsx("button",{onClick:s,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:a.jsx(v,{className:"h-5 w-5"})})]}),a.jsxs("form",{onSubmit:e=>{e.preventDefault(),r(l)},className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Course Name *"}),a.jsx("input",{type:"text",required:!0,value:l.course_name,onChange:e=>n({...l,course_name:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g., Mathematics"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Course Code"}),a.jsx("input",{type:"text",value:l.course_code,onChange:e=>n({...l,course_code:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g., MATH101"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Department"}),a.jsxs("select",{value:l.department,onChange:e=>n({...l,department:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"Select Department"}),a.jsx("option",{value:"CBSE - SRS",children:"CBSE - SRS"}),a.jsx("option",{value:"ICSE - SRS",children:"ICSE - SRS"}),a.jsx("option",{value:"STATE - SRS",children:"STATE - SRS"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Course Abbreviation"}),a.jsx("input",{type:"text",value:l.course_abbreviation,onChange:e=>n({...l,course_abbreviation:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g., MATH"})]}),a.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[a.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:t?"Update":"Create"})]})]})]})})}):null},hs=({readOnly:e=!1})=>{const{user:s}=n(),t="teacher"===s?.role,[d,i]=H.useState(""),[c,o]=H.useState(!1),[x,m]=H.useState(null),[u,h]=H.useState(null),g=r(),{data:j,isLoading:f,error:v}=xs(),C=l({mutationFn:async e=>(await p.post("/courses",e)).data,onSuccess:e=>{e&&e.data?g.setQueryData(["courses"],e.data):g.invalidateQueries({queryKey:["courses"]}),_.success("Course created successfully"),o(!1)},onError:e=>{_.error("Failed to create course")}}),S=l({mutationFn:async({id:e,...s})=>(await p.put(`/courses/${e}`,s)).data,onSuccess:e=>{e&&e.data?g.setQueryData(["courses"],e.data):g.invalidateQueries({queryKey:["courses"]}),_.success("Course updated successfully"),o(!1),m(null)},onError:e=>{_.error("Failed to update course")}}),k=l({mutationFn:async e=>(await p.delete(`/courses/${e}`)).data,onSuccess:e=>{e&&e.data?g.setQueryData(["courses"],e.data):g.invalidateQueries({queryKey:["courses"]}),_.success("Course deleted successfully"),h(null)},onError:e=>{_.error("Failed to delete course")}}),L=Array.isArray(j)?j:[],A=L.filter(e=>{const s=d.toLowerCase();return(e.course_name?.toLowerCase()||"").includes(s)||(e.course_code?.toLowerCase()||"").includes(s)||(e.name?.toLowerCase()||"").includes(s)});return f?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):v?a.jsx("div",{className:"text-center py-12",children:a.jsx("p",{className:"text-red-600",children:"Error loading courses. Please try again."})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Courses"}),a.jsxs("p",{className:"text-gray-600 mt-1",children:["Manage all courses from ERPNext (",L.length," total)"]})]}),!t&&!e&&a.jsxs("button",{onClick:()=>{m(null),o(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center",children:[a.jsx(Ke,{className:"h-5 w-5 mr-2"}),"Add Course"]})]}),a.jsxs("div",{className:"relative",children:[a.jsx(N,{className:"h-5 w-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Search courses...",value:d,onChange:e=>i(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:A.map((s,r)=>a.jsxs(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*r},className:"bg-white rounded-lg border border-gray-200 p-6 hover:shadow-lg transition-shadow",children:[a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center mb-3",children:[a.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center mr-3",children:a.jsx(b,{className:"h-5 w-5 text-blue-600"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900",children:s.course_name||s.name}),a.jsx("p",{className:"text-sm text-gray-600",children:s.course_code||""})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[a.jsx(y,{className:"h-4 w-4 mr-2"}),a.jsxs("span",{children:["Department: ",s.department||"N/A"]})]}),s.course_abbreviation&&a.jsx("div",{className:"inline-block bg-gray-100 text-gray-700 px-2 py-1 rounded text-xs",children:s.course_abbreviation})]})]}),!t&&!e&&a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{onClick:()=>(e=>{m(e),o(!0)})(s),className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:a.jsx(Oe,{className:"h-4 w-4"})}),a.jsx("button",{onClick:()=>h(s.id),className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:a.jsx(w,{className:"h-4 w-4"})})]})]}),u===s.id&&a.jsxs("div",{className:"mt-4 p-3 bg-red-50 rounded-lg",children:[a.jsx("p",{className:"text-sm text-red-800 mb-2",children:"Are you sure you want to delete this course?"}),a.jsxs("div",{className:"flex justify-end space-x-2",children:[a.jsx("button",{onClick:()=>h(null),className:"px-3 py-1 text-sm text-gray-600 bg-white rounded border border-gray-300 hover:bg-gray-50",children:"Cancel"}),a.jsx("button",{onClick:()=>{return e=s.id,void k.mutate(e);var e},className:"px-3 py-1 text-sm text-white bg-red-600 rounded hover:bg-red-700",children:"Delete"})]})]})]},s.id))}),0===A.length&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(b,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"No courses found matching your search."})]}),a.jsx(us,{isOpen:c,onClose:()=>{o(!1),m(null)},course:x,onSave:e=>{x?S.mutate({...x,...e,id:x.id}):C.mutate(e)}})]})},gs=({readOnly:e=!1})=>{const{user:s}=n(),d="teacher"===s?.role,[i,c]=H.useState(""),[o,x]=H.useState(""),[m,u]=H.useState(new Set),[h,g]=H.useState(!1),[j,S]=H.useState(!1),[k,L]=H.useState(!1),[A,D]=H.useState(!1),[E,P]=H.useState(!1),[q,F]=H.useState(null),[I,M]=H.useState({}),[R,B]=H.useState([]),O=r(),{data:U,isLoading:$,error:T}=ms(),{data:K={}}=t({queryKey:["program-details",Array.from(m)],queryFn:async()=>{const e={};for(const t of m)try{const s=await p.get(`/programs/${t}`);e[t]=s.data.data}catch(s){e[t]={id:t,name:t,courses:[]}}return e},enabled:m.size>0}),{data:G=[]}=xs(),{data:V=[]}=(()=>{const{user:e,isAuthenticated:s,isLoading:a}=n(),r="teacher"===e?.role;return t({queryKey:["departments",e?.role],queryFn:async()=>(await p.get("/departments")).data,enabled:s&&!a&&!!e&&!r})})(),Q=l({mutationFn:async e=>(await p.post("/programs/create",e)).data,onSuccess:()=>{_.success("Program created and synced to ERPNext successfully"),O.invalidateQueries({queryKey:["programs"]}),g(!1),ee()},onError:e=>{_.error(e.response?.data?.message||"Failed to create program")}}),z=l({mutationFn:async({id:e,data:s})=>(await p.put(`/programs/${e}`,s)).data,onSuccess:async()=>{_.success("Program updated and synced to ERPNext successfully"),await O.invalidateQueries({queryKey:["programs"]}),await O.refetchQueries({queryKey:["programs"]}),S(!1),F(null),ee()},onError:e=>{_.error(e.response?.data?.message||"Failed to update program")}}),Z=l({mutationFn:async e=>await p.delete(`/programs/${e}`),onSuccess:()=>{_.success("Program deleted successfully"),O.invalidateQueries({queryKey:["programs"]}),L(!1),F(null)},onError:e=>{_.error(e.response?.data?.message||"Failed to delete program")}}),Y=l({mutationFn:async({programId:e,courses:s})=>(await p.put(`/programs/${e}/courses`,{courses:s})).data,onSuccess:(e,s)=>{_.success("Courses updated successfully"),O.invalidateQueries({queryKey:["program-details"]}),O.invalidateQueries({queryKey:["programs"]}),P(!1);const t=new Set(m);t.add(s.programId),u(t)},onError:e=>{_.error(e.response?.data?.message||"Failed to update courses")}}),J=Array.isArray(U)?U:[],X=J.filter(e=>{const s=""===i||(e.program_name||e.name||"").toLowerCase().includes(i.toLowerCase())||(e.program_code||"").toLowerCase().includes(i.toLowerCase())||(e.program_abbreviation||"").toLowerCase().includes(i.toLowerCase()),t=""===o||e.department===o;return s&&t}),ee=()=>{M({})};return $?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):T?a.jsx("div",{className:"text-center py-12",children:a.jsx("p",{className:"text-red-600",children:"Error loading programs. Please try again."})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Program"}),a.jsxs("p",{className:"text-gray-600 mt-1",children:["Manage academic programs synced with ERPNext (",J.length," total)"]})]}),!d&&!e&&a.jsxs("button",{onClick:()=>{ee(),g(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center",children:[a.jsx(Ke,{className:"h-5 w-5 mr-2"}),"Add Program"]})]}),a.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx(N,{className:"h-5 w-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Search programs...",value:i,onChange:e=>c(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsx("div",{className:"md:w-64",children:a.jsxs("select",{value:o,onChange:e=>x(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"All Departments"}),V.map(e=>a.jsx("option",{value:e.name,children:e.department_name||e.name},e.id))]})})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:X.map((s,t)=>a.jsx(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*t},className:"bg-white rounded-lg border border-gray-200 p-6 hover:shadow-lg transition-shadow",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center mb-3",children:[a.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center mr-3",children:a.jsx(y,{className:"h-5 w-5 text-green-600"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900",children:s.program_name||s.name}),a.jsx("p",{className:"text-sm text-gray-600",children:s.program_code||"No code"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[a.jsx(C,{className:"h-4 w-4 mr-2"}),a.jsxs("span",{children:["Department: ",s.department||"Not specified"]})]}),a.jsx("div",{className:"flex gap-2",children:s.program_abbreviation&&a.jsx("span",{className:"inline-block bg-green-100 text-green-700 px-2 py-1 rounded text-xs",children:s.program_abbreviation})}),a.jsxs("button",{onClick:()=>(e=>{const s=new Set(m);s.has(e)?s.delete(e):s.add(e),u(s)})(s.id||s.name),className:"mt-3 flex items-center text-sm text-blue-600 hover:text-blue-800 transition-colors",children:[a.jsx(b,{className:"h-4 w-4 mr-1"}),a.jsx("span",{children:"Courses"}),m.has(s.id||s.name)?a.jsx(be,{className:"h-4 w-4 ml-1"}):a.jsx(f,{className:"h-4 w-4 ml-1"})]}),m.has(s.id||s.name)&&a.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("h4",{className:"text-xs font-semibold text-gray-700",children:"Connected Courses:"}),!d&&!e&&a.jsx("button",{onClick:e=>{e.stopPropagation(),(e=>{F(e);const s=K[e.id||e.name];s&&s.courses?B(s.courses):B([]),P(!0)})(s)},className:"text-xs text-blue-600 hover:text-blue-800",children:"Manage Courses"})]}),K[s.id||s.name]?a.jsx("div",{className:"space-y-1",children:K[s.id||s.name].courses&&K[s.id||s.name].courses.length>0?K[s.id||s.name].courses.map(e=>a.jsxs("div",{className:"flex items-center text-xs",children:[a.jsx(b,{className:"h-3 w-3 mr-1 text-gray-400"}),a.jsx("span",{className:"text-gray-600",children:e.course_name||e.course}),(1===e.required||!0===e.required)&&a.jsx("span",{className:"ml-1 text-xs text-green-600",children:"(Required)"})]},e.name||e.course)):a.jsx("p",{className:"text-xs text-gray-500 italic",children:"No courses connected"})}):a.jsxs("div",{className:"flex items-center text-xs text-gray-400",children:[a.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-gray-400 mr-2"}),"Loading courses..."]})]})]})]}),!d&&!e&&a.jsxs("div",{className:"flex space-x-1 ml-2",children:[a.jsx("button",{onClick:()=>(e=>{F(e),D(!0)})(s),className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"View Details",children:a.jsx(ae,{className:"h-4 w-4"})}),a.jsx("button",{onClick:()=>(e=>{F(e),M({program_name:e.program_name||e.name,program_code:e.program_code,program_abbreviation:e.program_abbreviation,department:e.department,description:e.description}),S(!0)})(s),className:"p-2 text-gray-400 hover:text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"Edit Program",children:a.jsx(Oe,{className:"h-4 w-4"})}),a.jsx("button",{onClick:()=>(e=>{F(e),L(!0)})(s),className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete Program",children:a.jsx(w,{className:"h-4 w-4"})})]})]})},s.id||s.name))}),0===X.length&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(y,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"No programs found matching your search."})]}),h&&a.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full",children:[a.jsx("div",{className:"p-6 border-b border-gray-200",children:a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Add New Program"})}),a.jsxs("form",{onSubmit:e=>{e.preventDefault(),Q.mutate(I)},className:"p-6",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Program Name *"}),a.jsx("input",{type:"text",required:!0,value:I.program_name||"",onChange:e=>M({...I,program_name:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"e.g., Bachelor of Computer Science"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Program Code"}),a.jsx("input",{type:"text",value:I.program_code||"",onChange:e=>M({...I,program_code:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"e.g., BCS"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Program Abbreviation"}),a.jsx("input",{type:"text",value:I.program_abbreviation||"",onChange:e=>M({...I,program_abbreviation:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"e.g., B.Sc CS"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Department"}),a.jsxs("select",{value:I.department||"",onChange:e=>M({...I,department:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"",children:"Select Department"}),V.map(e=>a.jsx("option",{value:e.name,children:e.department_name||e.name},e.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),a.jsx("textarea",{value:I.description||"",onChange:e=>M({...I,description:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"Enter program description..."})]})]}),a.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[a.jsx("button",{type:"button",onClick:()=>g(!1),className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:Q.isPending,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400",children:Q.isPending?"Creating...":"Create Program"})]})]})]})}),j&&q&&a.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full",children:[a.jsx("div",{className:"p-6 border-b border-gray-200",children:a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Edit Program"})}),a.jsxs("form",{onSubmit:e=>{e.preventDefault(),q&&z.mutate({id:q.id||q.name,data:I})},className:"p-6",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Program Name *"}),a.jsx("input",{type:"text",required:!0,value:I.program_name||"",onChange:e=>M({...I,program_name:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Program Code"}),a.jsx("input",{type:"text",value:I.program_code||"",onChange:e=>M({...I,program_code:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Program Abbreviation"}),a.jsx("input",{type:"text",value:I.program_abbreviation||"",onChange:e=>M({...I,program_abbreviation:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Department"}),a.jsxs("select",{value:I.department||"",onChange:e=>M({...I,department:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"",children:"Select Department"}),V.map(e=>a.jsx("option",{value:e.name,children:e.department_name||e.name},e.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),a.jsx("textarea",{value:I.description||"",onChange:e=>M({...I,description:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",rows:3})]})]}),a.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[a.jsx("button",{type:"button",onClick:()=>{S(!1),F(null)},className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:z.isPending,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400",children:z.isPending?"Updating...":"Update Program"})]})]})]})}),A&&q&&a.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[80vh] overflow-y-auto",children:[a.jsxs("div",{className:"p-6 border-b border-gray-200 flex justify-between items-center",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Program Details"}),a.jsx("button",{onClick:()=>{D(!1),F(null)},className:"text-gray-400 hover:text-gray-600",children:a.jsx(v,{className:"h-6 w-6"})})]}),a.jsx("div",{className:"p-6",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Program ID"}),a.jsx("p",{className:"mt-1 text-sm text-gray-900",children:q.id||q.name})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Program Name"}),a.jsx("p",{className:"mt-1 text-sm text-gray-900",children:q.program_name||q.name})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Program Code"}),a.jsx("p",{className:"mt-1 text-sm text-gray-900",children:q.program_code||"Not specified"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Abbreviation"}),a.jsx("p",{className:"mt-1 text-sm text-gray-900",children:q.program_abbreviation||"Not specified"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Department"}),a.jsx("p",{className:"mt-1 text-sm text-gray-900",children:q.department||"Not specified"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Description"}),a.jsx("p",{className:"mt-1 text-sm text-gray-900",children:q.description||"No description available"})]}),q.courses&&q.courses.length>0&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-2",children:"Courses"}),a.jsx("div",{className:"space-y-1",children:q.courses.map(e=>a.jsxs("div",{className:"flex items-center text-sm",children:[a.jsx(b,{className:"h-4 w-4 mr-2 text-gray-400"}),a.jsx("span",{className:"text-gray-700",children:e.course_name||e.course}),e.required&&a.jsx("span",{className:"ml-2 text-xs text-green-600",children:"(Required)"})]},e.id||e.course))})]}),q.modified&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Last Modified"}),a.jsx("p",{className:"mt-1 text-sm text-gray-900",children:new Date(q.modified).toLocaleString()})]})]})})]})}),k&&q&&a.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center p-4 z-50",children:a.jsx("div",{className:"bg-white rounded-lg max-w-md w-full",children:a.jsxs("div",{className:"p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Delete Program"}),a.jsxs("p",{className:"text-gray-600 mb-6",children:['Are you sure you want to delete "',q.program_name||q.name,'"? This action cannot be undone.']}),a.jsxs("div",{className:"flex justify-end gap-3",children:[a.jsx("button",{onClick:()=>{L(!1),F(null)},className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),a.jsx("button",{onClick:()=>{q&&Z.mutate(q.id||q.name)},disabled:Z.isPending,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:bg-gray-400",children:Z.isPending?"Deleting...":"Delete"})]})]})})}),E&&q&&a.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[80vh] overflow-y-auto",children:[a.jsx("div",{className:"p-6 border-b border-gray-200",children:a.jsxs("h2",{className:"text-xl font-semibold text-gray-900",children:["Manage Courses for ",q.program_name||q.name]})}),a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"mb-4",children:[a.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Add Course"}),a.jsx("div",{className:"flex gap-2",children:a.jsxs("select",{onChange:e=>{e.target.value&&((e=>{const s={course:e,course_name:e,required:!1};B([...R,s])})(e.target.value),e.target.value="")},className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"",children:"Select a course to add..."}),Array.isArray(G)?G.filter(e=>!R.some(s=>s.course===e.name)):[].map(e=>a.jsx("option",{value:e.name,children:e.name},e.id||e.name))]})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("h3",{className:"text-sm font-medium text-gray-700",children:"Current Courses"}),R.length>0?a.jsx("div",{className:"space-y-2",children:R.map((e,s)=>a.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(b,{className:"h-5 w-5 text-gray-400"}),a.jsx("span",{className:"font-medium text-gray-900",children:e.course_name||e.course}),a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",checked:!0===e.required||1===e.required,onChange:()=>(e=>{const s=[...R];s[e].required=!s[e].required,B(s)})(s),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500 mr-2"}),a.jsx("span",{className:"text-sm text-gray-600",children:"Required"})]})]}),a.jsx("button",{onClick:()=>(e=>{B(R.filter((s,t)=>t!==e))})(s),className:"text-red-600 hover:text-red-800",children:a.jsx(w,{className:"h-4 w-4"})})]},s))}):a.jsx("p",{className:"text-gray-500 italic",children:"No courses assigned to this program"})]}),a.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[a.jsx("button",{onClick:()=>{P(!1),B([])},className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),a.jsx("button",{onClick:()=>{q&&Y.mutate({programId:q.id||q.name,courses:R})},disabled:Y.isPending,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400",children:Y.isPending?"Updating...":"Update Courses"})]})]})]})})]})},ps=()=>{const[e,s]=H.useState(""),[r,l]=H.useState(new Set),{data:n,isLoading:d,error:c}=t({queryKey:["student-groups"],queryFn:async()=>(await p.get("/student-groups")).data}),x=n||[],m=x.filter(s=>s.name?.toLowerCase().includes(e.toLowerCase())||s.program?.toLowerCase().includes(e.toLowerCase())||s.batch?.toLowerCase().includes(e.toLowerCase()));return d?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):c?a.jsx("div",{className:"text-center py-12",children:a.jsx("p",{className:"text-red-600",children:"Error loading student groups. Please try again."})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Student Groups"}),a.jsxs("p",{className:"text-gray-600 mt-1",children:["Manage all student groups (",x.length," total)"]})]}),a.jsxs("button",{className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center",children:[a.jsx(Ke,{className:"h-5 w-5 mr-2"}),"Create Group"]})]}),a.jsxs("div",{className:"relative",children:[a.jsx(N,{className:"h-5 w-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Search student groups...",value:e,onChange:e=>s(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:m.map((e,s)=>a.jsx(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*s},className:"bg-white rounded-lg border border-gray-200 p-6 hover:shadow-lg transition-shadow",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center mb-3",children:[a.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center mr-3",children:a.jsx(o,{className:"h-5 w-5 text-purple-600"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-semibold text-gray-900",children:e.name}),a.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[a.jsx("span",{className:"text-xs bg-gray-100 px-2 py-0.5 rounded",children:e.groupBasedOn}),e.disabled&&a.jsx("span",{className:"text-xs bg-red-100 text-red-700 px-2 py-0.5 rounded",children:"Disabled"})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[a.jsx(S,{className:"h-4 w-4 mr-2"}),a.jsxs("span",{children:[e.academicYear," • ",e.academicTerm]})]}),e.program&&a.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[a.jsx(y,{className:"h-4 w-4 mr-2"}),a.jsxs("span",{children:["Program: ",e.program]})]}),e.batch&&a.jsxs("div",{className:"inline-block bg-purple-100 text-purple-700 px-2 py-1 rounded text-xs",children:["Batch: ",e.batch]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center text-sm",children:[a.jsx(i,{className:"h-4 w-4 mr-1 text-gray-400"}),a.jsxs("span",{className:"text-gray-600",children:[e.currentStrength,"/",e.maxStrength," Students"]})]}),e.instructors.length>0&&a.jsxs("div",{className:"flex items-center text-sm",children:[a.jsx(ss,{className:"h-4 w-4 mr-1 text-gray-400"}),a.jsxs("span",{className:"text-gray-600",children:[e.instructors.length," Instructor",e.instructors.length>1?"s":""]})]})]}),a.jsxs("button",{onClick:()=>(e=>{const s=new Set(r);s.has(e)?s.delete(e):s.add(e),l(s)})(e.id),className:"mt-3 flex items-center text-sm text-blue-600 hover:text-blue-800 transition-colors",children:[a.jsx("span",{children:"View Details"}),r.has(e.id)?a.jsx(be,{className:"h-4 w-4 ml-1"}):a.jsx(f,{className:"h-4 w-4 ml-1"})]}),r.has(e.id)&&a.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200 space-y-3",children:[e.instructors.length>0&&a.jsxs("div",{children:[a.jsx("h4",{className:"text-xs font-semibold text-gray-700 mb-1",children:"Instructors:"}),a.jsx("div",{className:"space-y-1",children:e.instructors.map(e=>a.jsxs("div",{className:"flex items-center text-xs",children:[a.jsx(ss,{className:"h-3 w-3 mr-1 text-gray-400"}),a.jsx("span",{className:"text-gray-600",children:e.name})]},e.id))})]}),e.students.length>0&&a.jsxs("div",{children:[a.jsxs("h4",{className:"text-xs font-semibold text-gray-700 mb-1",children:["Students (",e.students.length,"):"]}),a.jsx("div",{className:"max-h-32 overflow-y-auto space-y-1",children:e.students.map(e=>a.jsxs("div",{className:"flex items-center justify-between text-xs",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsxs("span",{className:"text-gray-500 mr-2",children:["#",e.rollNumber]}),a.jsx("span",{className:"text-gray-600",children:e.name})]}),e.active?a.jsx("span",{className:"text-green-600 text-xs",children:"Active"}):a.jsx("span",{className:"text-gray-400 text-xs",children:"Inactive"})]},e.id))})]}),0===e.students.length&&0===e.instructors.length&&a.jsx("p",{className:"text-xs text-gray-500 italic",children:"No students or instructors assigned"})]})]})]}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:a.jsx(Oe,{className:"h-4 w-4"})}),a.jsx("button",{className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:a.jsx(w,{className:"h-4 w-4"})})]})]})},e.id))}),0===m.length&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(o,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"No student groups found matching your search."})]})]})},js=({isOpen:e,onClose:s,enrollment:r,onSave:l})=>{const[n,d]=H.useState({student:"",program:"",academic_year:"",academic_term:"",enrollment_date:(new Date).toISOString().split("T")[0],courses:[]}),[i,c]=H.useState([]),{data:o=[]}=t({queryKey:["students-list"],queryFn:async()=>(await p.get("/students-list")).data}),{data:x=[]}=t({queryKey:["programs"],queryFn:async()=>(await p.get("/programs")).data}),{data:m=[]}=t({queryKey:["academic-years"],queryFn:async()=>(await p.get("/academic-years")).data}),{data:u=[]}=t({queryKey:["academic-terms"],queryFn:async()=>(await p.get("/academic-terms")).data});Q.useEffect(()=>{d(r?{student:r.student||"",program:r.program||"",academic_year:r.academic_year||"",academic_term:r.academic_term||"",enrollment_date:r.enrollment_date||(new Date).toISOString().split("T")[0],courses:r.courses||[]}:{student:"",program:"",academic_year:"",academic_term:"",enrollment_date:(new Date).toISOString().split("T")[0],courses:[]})},[r]),Q.useEffect(()=>{if(n.program){(async()=>{try{const e=await p.get(`/programs/${n.program}/courses`);if(c(e.data),!r){const s=e.data.filter(e=>e.required);d(e=>({...e,courses:s}))}}catch(e){c([])}})()}else c([]),d(e=>({...e,courses:[]}))},[n.program,r]);return e?a.jsx(V,{children:a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs(W.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white rounded-lg p-6 w-full max-w-md",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h2",{className:"text-xl font-semibold",children:r?"Edit Enrollment":"New Enrollment"}),a.jsx("button",{onClick:s,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:a.jsx(v,{className:"h-5 w-5"})})]}),a.jsxs("form",{onSubmit:e=>{e.preventDefault(),l(n)},className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Student *"}),a.jsxs("select",{required:!0,value:n.student,onChange:e=>d({...n,student:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"Select Student"}),o.map(e=>a.jsxs("option",{value:e.id,children:[e.student_name," (",e.name,")"]},e.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Program *"}),a.jsxs("select",{required:!0,value:n.program,onChange:e=>d({...n,program:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"Select Program"}),x.map(e=>a.jsx("option",{value:e.id,children:e.program_name||e.name},e.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Academic Year *"}),a.jsxs("select",{required:!0,value:n.academic_year,onChange:e=>d({...n,academic_year:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"Select Academic Year"}),m.map(e=>a.jsx("option",{value:e.name,children:e.name},e.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Academic Term"}),a.jsxs("select",{value:n.academic_term,onChange:e=>d({...n,academic_term:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"Select Academic Term"}),u.map(e=>a.jsx("option",{value:e.name,children:e.name},e.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Enrollment Date *"}),a.jsx("input",{type:"date",required:!0,value:n.enrollment_date,onChange:e=>d({...n,enrollment_date:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),i.length>0&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Courses *"}),a.jsx("div",{className:"border border-gray-300 rounded-lg p-3 max-h-40 overflow-y-auto",children:i.map(e=>{const s=n.courses.some(s=>s.course===e.course);return a.jsxs("div",{className:"flex items-center mb-2 last:mb-0",children:[a.jsx("input",{type:"checkbox",id:`course-${e.course}`,checked:s,onChange:()=>(e=>{if(n.courses.some(s=>s.course===e.course)){if(e.required)return void _.error("Required courses cannot be deselected");d(s=>({...s,courses:s.courses.filter(s=>s.course!==e.course)}))}else d(s=>({...s,courses:[...s.courses,e]}))})(e),disabled:e.required&&s,className:"h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),a.jsxs("label",{htmlFor:`course-${e.course}`,className:"ml-2 text-sm text-gray-700 flex-1",children:[e.course_name,e.required&&a.jsx("span",{className:"ml-1 text-red-500 text-xs",children:"(Required)"})]})]},e.course)})}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Selected ",n.courses.length," out of ",i.length," courses"]})]}),a.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[a.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:r?"Update":"Create"})]})]})]})})}):null},ys=()=>{const[e,s]=H.useState(""),[n,d]=H.useState(!1),[i,c]=H.useState(null),[o,x]=H.useState(null),m=r(),{data:u,isLoading:h,error:g}=t({queryKey:["program-enrollments"],queryFn:async()=>(await p.get("/program-enrollments")).data}),j=l({mutationFn:async e=>(await p.post("/program-enrollments",e)).data,onSuccess:e=>{e&&e.data?m.setQueryData(["program-enrollments"],e.data):m.invalidateQueries({queryKey:["program-enrollments"]}),_.success("Enrollment created successfully"),d(!1)},onError:e=>{_.error("Failed to create enrollment")}}),b=l({mutationFn:async({id:e,...s})=>(await p.put(`/program-enrollments/${e}`,s)).data,onSuccess:e=>{e&&e.data?m.setQueryData(["program-enrollments"],e.data):m.invalidateQueries({queryKey:["program-enrollments"]}),_.success("Enrollment updated successfully"),d(!1),c(null)},onError:e=>{_.error("Failed to update enrollment")}}),f=l({mutationFn:async e=>(await p.delete(`/program-enrollments/${e}`)).data,onSuccess:e=>{e&&e.data?m.setQueryData(["program-enrollments"],e.data):m.invalidateQueries({queryKey:["program-enrollments"]}),_.success("Enrollment deleted successfully"),x(null)},onError:e=>{_.error("Failed to delete enrollment")}}),v=u||[],C=v.filter(s=>{const t=e.toLowerCase();return(s.student_name?.toLowerCase()||"").includes(t)||(s.student?.toLowerCase()||"").includes(t)||(s.program?.toLowerCase()||"").includes(t)||(s.academic_year?.toLowerCase()||"").includes(t)});return h?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):g?a.jsx("div",{className:"text-center py-12",children:a.jsx("p",{className:"text-red-600",children:"Error loading program enrollments. Please try again."})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Program Enrollment"}),a.jsxs("p",{className:"text-gray-600 mt-1",children:["Manage student program enrollments from ERPNext (",v.length," total)"]})]}),a.jsxs("button",{onClick:()=>{c(null),d(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center",children:[a.jsx(Ke,{className:"h-5 w-5 mr-2"}),"New Enrollment"]})]}),a.jsxs("div",{className:"relative",children:[a.jsx(N,{className:"h-5 w-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Search enrollments...",value:e,onChange:e=>s(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsx("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Program"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Academic Year"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Term"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Courses"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Enrollment Date"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:C.map((e,s)=>a.jsxs(W.tr,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.05*s},className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center mr-3",children:a.jsx(ss,{className:"h-4 w-4 text-blue-600"})}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:e.student_name}),a.jsx("div",{className:"text-sm text-gray-500",children:e.student})]})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(y,{className:"h-4 w-4 text-green-600 mr-2"}),a.jsx("div",{className:"text-sm text-gray-900",children:e.program})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.academic_year}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.academic_term||"N/A"}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"text-sm text-gray-900",children:[e.courses?.length||0," courses",e.courses&&e.courses.length>0&&a.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[e.courses.slice(0,2).map(e=>e.course_name).join(", "),e.courses.length>2&&` +${e.courses.length-2} more`]})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center text-sm text-gray-900",children:[a.jsx(k,{className:"h-4 w-4 text-gray-400 mr-2"}),e.enrollment_date?new Date(e.enrollment_date).toLocaleDateString():"N/A"]})}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{onClick:()=>(e=>{c(e),d(!0)})(e),className:"text-blue-600 hover:text-blue-900",children:a.jsx(Oe,{className:"h-4 w-4"})}),a.jsx("button",{onClick:()=>x(e.id),className:"text-red-600 hover:text-red-900",children:a.jsx(w,{className:"h-4 w-4"})})]}),o===e.id&&a.jsxs("div",{className:"absolute right-6 mt-2 p-3 bg-red-50 rounded-lg shadow-lg z-10",children:[a.jsx("p",{className:"text-sm text-red-800 mb-2",children:"Delete this enrollment?"}),a.jsxs("div",{className:"flex justify-end space-x-2",children:[a.jsx("button",{onClick:()=>x(null),className:"px-3 py-1 text-sm text-gray-600 bg-white rounded border border-gray-300 hover:bg-gray-50",children:"Cancel"}),a.jsx("button",{onClick:()=>{return s=e.id,void f.mutate(s);var s},className:"px-3 py-1 text-sm text-white bg-red-600 rounded hover:bg-red-700",children:"Delete"})]})]})]})]},e.id))})]})})}),0===C.length&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(L,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"No program enrollments found matching your search."})]}),a.jsx(js,{isOpen:n,onClose:()=>{d(!1),c(null)},enrollment:i,onSave:e=>{i?b.mutate({...i,...e,id:i.id}):j.mutate(e)}})]})},bs=()=>{const[e,s]=H.useState(""),[r,l]=H.useState([]),[n,i]=H.useState(""),[x,u]=H.useState(!1),{data:h}=t({queryKey:["programs"],queryFn:async()=>{const e=await p.get("/frappe/Program");return e.data?.data||[]}}),{data:g}=t({queryKey:["students"],queryFn:async()=>{const e=await p.get("/frappe/Student");return e.data?.data||[]}}),{data:j,refetch:b}=t({queryKey:["program-enrollments"],queryFn:async()=>{const e=await p.get("/frappe/Program Enrollment");return e.data?.data||[]}});return a.jsx("div",{className:"space-y-6",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[a.jsx("div",{className:"p-6 border-b border-gray-200",children:a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{children:[a.jsxs("h2",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[a.jsx(A,{className:"h-7 w-7 mr-3 text-purple-600"}),"Program Enrollment Tool"]}),a.jsx("p",{className:"text-gray-600 mt-1",children:"Batch enrollment and management of student program registrations"})]})})}),a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Enrollment Parameters"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Select Program"}),a.jsxs("select",{value:e,onChange:e=>s(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500",children:[a.jsx("option",{value:"",children:"Choose a program..."}),h?.map(e=>a.jsx("option",{value:e.name,children:e.program_name||e.name},e.name))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Enrollment Date"}),a.jsx("input",{type:"date",value:n,onChange:e=>i(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500"})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"checkbox",id:"batchMode",checked:x,onChange:e=>u(e.target.checked),className:"h-4 w-4 text-purple-600 focus:ring-purple-500 border-gray-300 rounded"}),a.jsx("label",{htmlFor:"batchMode",className:"text-sm text-gray-700",children:"Enable batch enrollment mode"})]}),a.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("h4",{className:"font-medium text-gray-900",children:"Select Students"}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{onClick:()=>{r.length===g?.length?l([]):l(g?.map(e=>e.name)||[])},className:"text-sm text-purple-600 hover:text-purple-800",children:r.length===g?.length?"Deselect All":"Select All"}),a.jsxs("span",{className:"text-sm text-gray-500",children:["(",r.length," selected)"]})]})]}),a.jsxs("div",{className:"max-h-64 overflow-y-auto border border-gray-100 rounded",children:[g?.map(e=>a.jsxs("div",{className:"flex items-center p-2 hover:bg-gray-50 border-b border-gray-100 last:border-b-0",children:[a.jsx("input",{type:"checkbox",checked:r.includes(e.name),onChange:()=>{return s=e.name,void l(e=>e.includes(s)?e.filter(e=>e!==s):[...e,s]);var s},className:"h-4 w-4 text-purple-600 focus:ring-purple-500 border-gray-300 rounded mr-3"}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[e.first_name," ",e.last_name]}),a.jsx("p",{className:"text-xs text-gray-500",children:e.student_email_id||"No email"})]}),a.jsx("span",{className:"text-xs text-gray-400",children:e.name})]},e.name)),(!g||0===g.length)&&a.jsx("div",{className:"p-4 text-center text-gray-500 text-sm",children:"No students found"})]})]}),a.jsxs("div",{className:"flex space-x-3 pt-4",children:[a.jsxs("button",{onClick:()=>{e&&0!==r.length?alert(`Batch enrollment feature will be implemented with backend integration.\nSelected: ${r.length} students for program: ${e}`):alert("Please select a program and at least one student")},className:"flex items-center px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",disabled:!e||0===r.length,children:[a.jsx(D,{className:"h-5 w-5 mr-2"}),"Enroll Students (",r.length,")"]}),a.jsxs("button",{onClick:()=>b(),className:"flex items-center px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:[a.jsx(d,{className:"h-5 w-5 mr-2"}),"Refresh"]})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Enrollment Statistics"}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("div",{className:"bg-purple-50 p-4 rounded-lg",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(y,{className:"h-8 w-8 text-purple-600 mr-3"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Total Programs"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:h?.length||0})]})]})}),a.jsx("div",{className:"bg-blue-50 p-4 rounded-lg",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(o,{className:"h-8 w-8 text-blue-600 mr-3"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Available Students"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:g?.length||0})]})]})}),a.jsx("div",{className:"bg-green-50 p-4 rounded-lg",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(L,{className:"h-8 w-8 text-green-600 mr-3"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Total Enrollments"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:j?.length||0})]})]})}),a.jsx("div",{className:"bg-yellow-50 p-4 rounded-lg",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(c,{className:"h-8 w-8 text-yellow-600 mr-3"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Selected for Enrollment"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:r.length})]})]})})]}),a.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[a.jsxs("h4",{className:"font-medium text-gray-900 mb-2 flex items-center",children:[a.jsx(se,{className:"h-4 w-4 mr-1"}),"Enrollment Tips"]}),a.jsxs("ul",{className:"space-y-1 text-sm text-gray-600",children:[a.jsx("li",{children:"• Select program before choosing students"}),a.jsx("li",{children:"• Check student eligibility requirements"}),a.jsx("li",{children:"• Set appropriate enrollment date"}),a.jsx("li",{children:"• Use batch mode for multiple enrollments"}),a.jsx("li",{children:"• Review enrollments before confirming"})]})]})]})]}),a.jsxs("div",{className:"mt-8",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Enrollments"}),a.jsx("div",{className:"bg-gray-50 rounded-lg overflow-hidden",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-100",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Student"}),a.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Program"}),a.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Enrollment Date"}),a.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"})]})}),a.jsxs("tbody",{className:"divide-y divide-gray-200 bg-white",children:[j?.slice(0,5).map(e=>a.jsxs("tr",{children:[a.jsx("td",{className:"px-4 py-2 text-sm",children:e.student||"N/A"}),a.jsx("td",{className:"px-4 py-2 text-sm",children:e.program||"N/A"}),a.jsx("td",{className:"px-4 py-2 text-sm",children:e.enrollment_date||"N/A"}),a.jsx("td",{className:"px-4 py-2",children:a.jsxs("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:[a.jsx(m,{className:"h-3 w-3 mr-1"}),"Active"]})})]},e.name)),(!j||0===j.length)&&a.jsx("tr",{children:a.jsx("td",{colSpan:4,className:"px-4 py-8 text-center text-gray-500 text-sm",children:"No enrollments found. Use the tool above to create new enrollments."})})]})]})})]})]})]})})},Ns=()=>{const[e,s]=H.useState(""),{data:r,isLoading:l,error:n}=t({queryKey:["course-enrollments"],queryFn:async()=>(await p.get("/course-enrollments")).data}),d=r||[],i=d.filter(s=>s.student?.toLowerCase().includes(e.toLowerCase())||s.course?.toLowerCase().includes(e.toLowerCase())||s.course_name?.toLowerCase().includes(e.toLowerCase()));return l?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):n?a.jsx("div",{className:"text-center py-12",children:a.jsx("p",{className:"text-red-600",children:"Error loading course enrollments. Please try again."})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Course Enrollment"}),a.jsxs("p",{className:"text-gray-600 mt-1",children:["Assign courses to students (",d.length," total)"]})]}),a.jsxs("button",{className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center",children:[a.jsx(Ke,{className:"h-5 w-5 mr-2"}),"New Enrollment"]})]}),a.jsxs("div",{className:"relative",children:[a.jsx(N,{className:"h-5 w-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Search course enrollments...",value:e,onChange:e=>s(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsx("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Course Code"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Course Name"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Enrollment Date"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.map((e,s)=>a.jsxs(W.tr,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.05*s},className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center mr-3",children:a.jsx(ss,{className:"h-4 w-4 text-blue-600"})}),a.jsx("div",{className:"text-sm font-medium text-gray-900",children:e.student})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(b,{className:"h-4 w-4 text-blue-600 mr-2"}),a.jsx("div",{className:"text-sm text-gray-900",children:e.course})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.course_name||"N/A"}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center text-sm text-gray-900",children:[a.jsx(k,{className:"h-4 w-4 text-gray-400 mr-2"}),e.enrollment_date?new Date(e.enrollment_date).toLocaleDateString():"N/A"]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{className:"text-blue-600 hover:text-blue-900",children:a.jsx(Oe,{className:"h-4 w-4"})}),a.jsx("button",{className:"text-red-600 hover:text-red-900",children:a.jsx(w,{className:"h-4 w-4"})})]})})]},e.name))})]})})}),0===i.length&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(E,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"No course enrollments found matching your search."})]})]})},fs=()=>{const[e,s]=H.useState(""),{data:r,isLoading:l,error:n}=t({queryKey:["course-schedules"],queryFn:async()=>{const e=await p.get("/frappe/Course Schedule");return e.data?.data||[]}}),d=r?.filter(s=>s.name?.toLowerCase().includes(e.toLowerCase())||s.course?.toLowerCase().includes(e.toLowerCase())||s.instructor?.toLowerCase().includes(e.toLowerCase()));return l?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):n?a.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:"Error loading course schedules. Please try again later."}):a.jsx("div",{className:"space-y-6",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[a.jsxs("div",{className:"p-6 border-b border-gray-200",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Course Schedule"}),a.jsx("p",{className:"text-gray-600 mt-1",children:"Manage course schedules and timings"})]}),a.jsxs("button",{className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[a.jsx(Ke,{className:"h-5 w-5 mr-2"}),"Add Schedule"]})]}),a.jsxs("div",{className:"relative",children:[a.jsx(N,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Search schedules...",value:e,onChange:e=>s(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Schedule ID"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Course"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Instructor"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Room"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Schedule"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:d?.length>0?d.map(e=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(k,{className:"h-5 w-5 text-gray-400 mr-2"}),a.jsx("span",{className:"text-sm font-medium text-gray-900",children:e.name})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(b,{className:"h-4 w-4 text-gray-400 mr-2"}),a.jsx("span",{className:"text-sm text-gray-900",children:e.course||"N/A"})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(ss,{className:"h-4 w-4 text-gray-400 mr-2"}),a.jsx("span",{className:"text-sm text-gray-900",children:e.instructor||"N/A"})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.room||"N/A"}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(u,{className:"h-4 w-4 text-gray-400 mr-2"}),a.jsxs("span",{className:"text-sm text-gray-900",children:[e.from_time||"N/A"," - ",e.to_time||"N/A"]})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full "+("Active"===e.schedule_status?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:e.schedule_status||"Pending"})}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[a.jsx("button",{className:"text-blue-600 hover:text-blue-900 mr-3",children:a.jsx(Oe,{className:"h-5 w-5"})}),a.jsx("button",{className:"text-red-600 hover:text-red-900",children:a.jsx(w,{className:"h-5 w-5"})})]})]},e.name)):a.jsx("tr",{children:a.jsx("td",{colSpan:7,className:"px-6 py-12 text-center text-gray-500",children:'No course schedules found. Click "Add Schedule" to create one.'})})})]})})]})})},vs=()=>{const[e,s]=H.useState(""),{data:r,isLoading:l,error:n}=t({queryKey:["topics"],queryFn:async()=>{const e=await p.get("/frappe/Topic");return e.data?.data||[]}}),d=r?.filter(s=>s.name?.toLowerCase().includes(e.toLowerCase())||s.topic_name?.toLowerCase().includes(e.toLowerCase())||s.course?.toLowerCase().includes(e.toLowerCase()));return l?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):n?a.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:"Error loading topics. Please try again later."}):a.jsx("div",{className:"space-y-6",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[a.jsxs("div",{className:"p-6 border-b border-gray-200",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Topics"}),a.jsx("p",{className:"text-gray-600 mt-1",children:"Manage course topics and content"})]}),a.jsxs("button",{className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[a.jsx(Ke,{className:"h-5 w-5 mr-2"}),"Add Topic"]})]}),a.jsxs("div",{className:"relative",children:[a.jsx(N,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Search topics...",value:e,onChange:e=>s(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Topic ID"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Topic Name"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Course"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Duration"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:d?.length>0?d.map(e=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(P,{className:"h-5 w-5 text-gray-400 mr-2"}),a.jsx("span",{className:"text-sm font-medium text-gray-900",children:e.name})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:"text-sm text-gray-900",children:e.topic_name||"N/A"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(b,{className:"h-4 w-4 text-gray-400 mr-2"}),a.jsx("span",{className:"text-sm text-gray-900",children:e.course||"N/A"})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(Xe,{className:"h-4 w-4 text-gray-400 mr-2"}),a.jsx("span",{className:"text-sm text-gray-900",children:e.category||"General"})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(c,{className:"h-4 w-4 text-gray-400 mr-2"}),a.jsxs("span",{className:"text-sm text-gray-900",children:[e.duration||"N/A"," hrs"]})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full "+(e.enabled?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:e.enabled?"Active":"Inactive"})}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[a.jsx("button",{className:"text-blue-600 hover:text-blue-900 mr-3",children:a.jsx(Oe,{className:"h-5 w-5"})}),a.jsx("button",{className:"text-red-600 hover:text-red-900",children:a.jsx(w,{className:"h-5 w-5"})})]})]},e.name)):a.jsx("tr",{children:a.jsx("td",{colSpan:7,className:"px-6 py-12 text-center text-gray-500",children:'No topics found. Click "Add Topic" to create one.'})})})]})})]})})},ws=()=>{const[e,s]=H.useState(""),[r,l]=H.useState(""),[n,i]=H.useState(""),[c,x]=H.useState(""),[m,u]=H.useState(""),{data:h}=t({queryKey:["courses"],queryFn:async()=>{const e=await p.get("/frappe/Course");return e.data?.data||[]}}),{data:g}=t({queryKey:["instructors"],queryFn:async()=>{const e=await p.get("/frappe/Instructor");return e.data?.data||[]}}),{data:j}=t({queryKey:["rooms"],queryFn:async()=>{const e=await p.get("/frappe/Room");return e.data?.data||[]}}),{data:y,refetch:N}=t({queryKey:["scheduling-tool-data"],queryFn:async()=>{const e=await p.get("/frappe/Course Schedule");return e.data?.data||[]}});return a.jsx("div",{className:"space-y-6",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[a.jsx("div",{className:"p-6 border-b border-gray-200",children:a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{children:[a.jsxs("h2",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[a.jsx(A,{className:"h-7 w-7 mr-3 text-blue-600"}),"Course Scheduling Tool"]}),a.jsx("p",{className:"text-gray-600 mt-1",children:"Automated course schedule generation and management"})]})})}),a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Schedule Parameters"}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Select Course"}),a.jsxs("select",{value:e,onChange:e=>s(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"",children:"Choose a course..."}),h?.map(e=>a.jsx("option",{value:e.name,children:e.course_name||e.name},e.name))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Select Instructor"}),a.jsxs("select",{value:r,onChange:e=>l(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"",children:"Choose an instructor..."}),g?.map(e=>a.jsx("option",{value:e.name,children:e.instructor_name||e.name},e.name))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Select Room"}),a.jsxs("select",{value:n,onChange:e=>i(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"",children:"Choose a room..."}),j?.map(e=>a.jsxs("option",{value:e.name,children:[e.room_name||e.name," - Capacity: ",e.seating_capacity||"N/A"]},e.name))]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),a.jsx("input",{type:"date",value:c,onChange:e=>x(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),a.jsx("input",{type:"date",value:m,onChange:e=>u(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]}),a.jsxs("div",{className:"flex space-x-3 pt-4",children:[a.jsxs("button",{onClick:()=>{alert("Schedule generation feature will be implemented with backend integration")},className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[a.jsx($e,{className:"h-5 w-5 mr-2"}),"Generate Schedule"]}),a.jsxs("button",{onClick:()=>N(),className:"flex items-center px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:[a.jsx(d,{className:"h-5 w-5 mr-2"}),"Refresh"]})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Scheduling Statistics"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsx("div",{className:"bg-blue-50 p-4 rounded-lg",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(b,{className:"h-8 w-8 text-blue-600 mr-3"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Total Courses"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:h?.length||0})]})]})}),a.jsx("div",{className:"bg-green-50 p-4 rounded-lg",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(o,{className:"h-8 w-8 text-green-600 mr-3"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Instructors"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:g?.length||0})]})]})}),a.jsx("div",{className:"bg-purple-50 p-4 rounded-lg",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(q,{className:"h-8 w-8 text-purple-600 mr-3"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Available Rooms"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:j?.length||0})]})]})}),a.jsx("div",{className:"bg-yellow-50 p-4 rounded-lg",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(k,{className:"h-8 w-8 text-yellow-600 mr-3"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Schedules"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:y?.length||0})]})]})})]}),a.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[a.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Scheduling Tips"}),a.jsxs("ul",{className:"space-y-1 text-sm text-gray-600",children:[a.jsx("li",{children:"• Select all parameters before generating a schedule"}),a.jsx("li",{children:"• Check room availability and capacity"}),a.jsx("li",{children:"• Verify instructor availability for the selected period"}),a.jsx("li",{children:"• Review generated schedules before confirming"})]})]})]})]}),a.jsxs("div",{className:"mt-8",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Schedules"}),a.jsx("div",{className:"bg-gray-50 rounded-lg overflow-hidden",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-100",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Course"}),a.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Instructor"}),a.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Room"}),a.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Time"}),a.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"})]})}),a.jsxs("tbody",{className:"divide-y divide-gray-200 bg-white",children:[y?.slice(0,5).map(e=>a.jsxs("tr",{children:[a.jsx("td",{className:"px-4 py-2 text-sm",children:e.course||"N/A"}),a.jsx("td",{className:"px-4 py-2 text-sm",children:e.instructor||"N/A"}),a.jsx("td",{className:"px-4 py-2 text-sm",children:e.room||"N/A"}),a.jsxs("td",{className:"px-4 py-2 text-sm",children:[e.from_time||"N/A"," - ",e.to_time||"N/A"]}),a.jsx("td",{className:"px-4 py-2",children:a.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:"Active"})})]},e.name)),(!y||0===y.length)&&a.jsx("tr",{children:a.jsx("td",{colSpan:5,className:"px-4 py-8 text-center text-gray-500 text-sm",children:"No schedules found. Generate a new schedule to get started."})})]})]})})]})]})]})})},_s=()=>{z();const{user:e}=n(),s=r(),[i,c]=H.useState("documents"),[o,x]=H.useState(""),[u,h]=H.useState(""),[g,y]=H.useState(""),[b,f]=H.useState(!1),[v,_]=H.useState(null),[C,S]=H.useState(0),[k,L]=H.useState([]),[A,D]=H.useState(""),[P,q]=H.useState(!1),{data:R=[]}=t({queryKey:["programs"],queryFn:async()=>{const e=await p.get("/programs");return Array.isArray(e.data)?e.data:[]}}),{data:B=[]}=t({queryKey:["courses",o],queryFn:async()=>{const e=o?`/courses?program=${o}`:"/courses",s=await p.get(e);return Array.isArray(s.data)?s.data:[]},enabled:!0}),{data:O=[],isLoading:U,refetch:$}=t({queryKey:["kb-documents",o,u,g],queryFn:async()=>{const e=new URLSearchParams;o&&e.append("program_id",o),u&&e.append("course_id",u),g&&e.append("search",g);const s=await p.get(`/kb/documents?${e}`),t=s.data?.data||s.data||[];return Array.isArray(t)?t:[]}}),T=l({mutationFn:async e=>(await p.post("/kb/documents/upload",e)).data,onSuccess:()=>{j.success("Document uploaded successfully"),s.invalidateQueries({queryKey:["kb-documents"]}),f(!1),_(null),S(0)},onError:e=>{j.error(e.message||"Failed to upload document"),S(0)}}),K=l({mutationFn:async e=>(await p.delete(`/kb/documents/${e}`)).data,onSuccess:()=>{j.success("Document deleted successfully"),s.invalidateQueries({queryKey:["kb-documents"]})},onError:()=>{j.error("Failed to delete document")}}),G=async()=>{if(!A.trim()||!u)return void j.error("Please select a course and enter a message");const s={id:Date.now().toString(),role:"user",content:A,timestamp:(new Date).toISOString()};L(e=>[...e,s]),D(""),q(!0);try{const s=await p.post("/kb/chat/message",{message:A,program_id:o,course_id:u,session_id:e?.id}),t={id:(Date.now()+1).toString(),role:"assistant",content:s.data.answer,timestamp:(new Date).toISOString(),documents:s.data.sources};L(e=>[...e,t])}catch(t){j.error("Failed to get response from AI"),L(e=>e.filter(e=>e.id!==s.id))}finally{q(!1)}},Q=e=>{if(0===e)return"0 Bytes";const s=Math.floor(Math.log(e)/Math.log(1024));return Math.round(e/Math.pow(1024,s)*100)/100+" "+["Bytes","KB","MB","GB"][s]};return a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"mb-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[a.jsx(F,{className:"h-7 w-7 mr-2 text-blue-600"}),"Knowledge Base"]}),a.jsx("p",{className:"text-gray-600",children:"Manage course documents and access AI-powered assistance"})]}),a.jsxs("div",{className:"flex bg-gray-200 rounded-lg p-1",children:[a.jsxs("button",{onClick:()=>c("documents"),className:"px-4 py-2 rounded-md transition-colors "+("documents"===i?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"),children:[a.jsx(E,{className:"h-5 w-5 inline-block mr-2"}),"Documents"]}),a.jsxs("button",{onClick:()=>c("ai-chat"),className:"px-4 py-2 rounded-md transition-colors "+("ai-chat"===i?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"),children:[a.jsx(I,{className:"h-5 w-5 inline-block mr-2"}),"AI Chat"]})]})]}),a.jsx("div",{className:"mt-4 bg-white rounded-lg border border-gray-200 p-4",children:a.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Select Program"}),a.jsxs("select",{value:o,onChange:e=>{x(e.target.value),h("")},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[a.jsx("option",{value:"",children:"All Programs"}),R.map(e=>a.jsxs("option",{value:e.id,children:[e.name," (",e.code,")"]},e.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Select Course"}),a.jsxs("select",{value:u,onChange:e=>h(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",disabled:!o&&0===B.length,children:[a.jsx("option",{value:"",children:"All Courses"}),B.map(e=>a.jsxs("option",{value:e.id,children:[e.name," (",e.code,")"]},e.id))]})]}),a.jsxs("div",{className:"relative",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Search"}),a.jsxs("div",{className:"relative",children:[a.jsx(N,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Search documents...",value:g,onChange:e=>y(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]})]})})]}),a.jsx(V,{mode:"wait",children:"documents"===i?a.jsx(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.2},children:a.jsxs("div",{className:"bg-white rounded-lg border border-gray-200",children:[a.jsxs("div",{className:"p-4 border-b border-gray-200 flex justify-between items-center",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Course Documents"}),a.jsxs("button",{onClick:()=>f(!0),className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[a.jsx(we,{className:"h-5 w-5 mr-2"}),"Upload Document"]})]}),a.jsx("div",{className:"p-4",children:U?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(d,{className:"h-8 w-8 text-gray-400 animate-spin mx-auto mb-4"}),a.jsx("p",{className:"text-gray-500",children:"Loading documents..."})]}):0===O.length?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(ke,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No documents found"}),a.jsx("p",{className:"text-gray-500",children:u?"Upload documents for this course":"Select a course to view documents"})]}):a.jsx("div",{className:"grid gap-4",children:O.map(s=>a.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:a.jsx(E,{className:"h-6 w-6 text-blue-600"})}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-semibold text-gray-900",children:s.title}),a.jsxs("p",{className:"text-xs text-gray-500",children:[s.course_name," • ",s.program_name]}),a.jsxs("p",{className:"text-xs text-gray-400",children:[Q(s.file_size)," • Uploaded ",new Date(s.uploaded_at).toLocaleDateString()]})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:["processed"===s.status&&a.jsx(m,{className:"h-5 w-5 text-green-500"}),"pending"===s.status&&a.jsx(d,{className:"h-5 w-5 text-yellow-500 animate-spin"}),"failed"===s.status&&a.jsx(M,{className:"h-5 w-5 text-red-500"}),a.jsx("button",{onClick:()=>(async e=>{try{const s=localStorage.getItem("token"),t=await fetch(`undefined/kb/documents/${e}/view`,{headers:{Authorization:`Bearer ${s}`}});if(!t.ok)throw new Error("View failed");const a=await t.blob(),r=window.URL.createObjectURL(a);window.open(r,"_blank","noopener,noreferrer"),setTimeout(()=>{window.URL.revokeObjectURL(r)},1e3)}catch(s){j.error("Failed to view document")}})(s.id),className:"p-2 text-gray-400 hover:text-blue-600 transition-colors",title:"View Document",children:a.jsx(ae,{className:"h-5 w-5"})}),a.jsx("button",{onClick:()=>(async(e,s)=>{try{const t=localStorage.getItem("token"),a=await fetch(`undefined/kb/documents/${e}/download`,{headers:{Authorization:`Bearer ${t}`}});if(!a.ok)throw new Error("Download failed");const r=await a.blob(),l=window.URL.createObjectURL(r),n=document.createElement("a");n.href=l,n.download=s,document.body.appendChild(n),n.click(),window.URL.revokeObjectURL(l),document.body.removeChild(n)}catch(t){j.error("Failed to download document")}})(s.id,s.title),className:"p-2 text-gray-400 hover:text-green-600 transition-colors",title:"Download Document",children:a.jsx(de,{className:"h-5 w-5"})}),"admin"===e?.role&&a.jsx("button",{onClick:()=>K.mutate(s.id),className:"p-2 text-gray-400 hover:text-red-600 transition-colors",children:a.jsx(w,{className:"h-5 w-5"})})]})]})},s.id))})})]})},"documents"):a.jsx(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.2},children:a.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 h-[600px] flex flex-col",children:[a.jsxs("div",{className:"p-4 border-b border-gray-200",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"AI Assistant"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Ask questions about your course materials"})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[u?0===k.length?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(I,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-500",children:"Start a conversation by asking a question"})]}):k.map(e=>a.jsx("div",{className:"flex "+("user"===e.role?"justify-end":"justify-start"),children:a.jsxs("div",{className:"max-w-2xl px-4 py-3 rounded-lg "+("user"===e.role?"bg-blue-600 text-white":"bg-gray-100 text-gray-900"),children:[a.jsx("p",{className:"text-sm whitespace-pre-wrap",children:e.content}),e.documents&&e.documents.length>0&&a.jsxs("div",{className:"mt-2 pt-2 border-t border-gray-300",children:[a.jsx("p",{className:"text-xs font-medium mb-1",children:"Sources:"}),e.documents.map(e=>a.jsxs("p",{className:"text-xs opacity-75",children:["• ",e.title]},e.id))]})]})},e.id)):a.jsxs("div",{className:"text-center py-12",children:[a.jsx(I,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-500",children:"Please select a course to start chatting"})]}),P&&a.jsx("div",{className:"flex justify-start",children:a.jsx("div",{className:"bg-gray-100 px-4 py-3 rounded-lg",children:a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),a.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),a.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})})]}),a.jsx("div",{className:"p-4 border-t border-gray-200",children:a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("input",{type:"text",placeholder:u?"Ask a question about your course...":"Select a course first",value:A,onChange:e=>D(e.target.value),onKeyPress:e=>"Enter"===e.key&&G(),disabled:!u||P,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-100"}),a.jsx("button",{onClick:G,disabled:!u||!A.trim()||P,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed",children:"Send"})]})})]})},"ai-chat")}),b&&a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Upload Document"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Program *"}),a.jsxs("select",{value:o,onChange:e=>x(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",required:!0,children:[a.jsx("option",{value:"",children:"Select Program"}),R.map(e=>a.jsx("option",{value:e.id,children:e.name},e.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Course *"}),a.jsxs("select",{value:u,onChange:e=>h(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",disabled:!o,required:!0,children:[a.jsx("option",{value:"",children:"Select Course"}),B.map(e=>a.jsx("option",{value:e.id,children:e.name},e.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Document File *"}),a.jsx("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-lg",children:a.jsx("div",{className:"space-y-1 text-center",children:v?a.jsxs(a.Fragment,{children:[a.jsx(E,{className:"mx-auto h-12 w-12 text-green-500"}),a.jsx("p",{className:"text-sm text-gray-600",children:v.name}),a.jsx("p",{className:"text-xs text-gray-500",children:Q(v.size)})]}):a.jsxs(a.Fragment,{children:[a.jsx(we,{className:"mx-auto h-12 w-12 text-gray-400"}),a.jsxs("div",{className:"flex text-sm text-gray-600",children:[a.jsxs("label",{className:"relative cursor-pointer bg-white rounded-md font-medium text-blue-600 hover:text-blue-500 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-blue-500",children:[a.jsx("span",{children:"Upload a file"}),a.jsx("input",{type:"file",className:"sr-only",accept:".pdf,.doc,.docx,.txt,.ppt,.pptx",onChange:e=>_(e.target.files?.[0]||null)})]}),a.jsx("p",{className:"pl-1",children:"or drag and drop"})]}),a.jsx("p",{className:"text-xs text-gray-500",children:"PDF, DOC, DOCX, TXT, PPT up to 50MB"})]})})})]}),C>0&&a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${C}%`}})})]}),a.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[a.jsx("button",{onClick:()=>{f(!1),_(null),S(0)},className:"px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),a.jsx("button",{onClick:()=>{if(!v||!o||!u)return void j.error("Please select a file, program, and course");const s=new FormData;s.append("file",v),s.append("program_id",o),s.append("course_id",u),s.append("uploaded_by",e?.id||""),T.mutate(s)},disabled:!v||!o||!u||T.isPending,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed",children:T.isPending?"Uploading...":"Upload"})]})]})})]})},Cs=()=>{const{user:e}=n(),s=H.useRef(null),[t,r]=H.useState(""),[l,d]=H.useState(""),[i,c]=H.useState([]),[o,x]=H.useState(""),[m,u]=H.useState(!1),{data:h=[]}=ms(),{data:g=[]}=xs(),y=t?Array.isArray(g)?g.filter(e=>e.program===t):[]:Array.isArray(g)?g:[];H.useEffect(()=>{s.current?.scrollIntoView({behavior:"smooth"})},[i]),H.useEffect(()=>{const s=localStorage.getItem(`ai_chat_${e?.id}`);s&&c(JSON.parse(s))},[e]),H.useEffect(()=>{i.length>0&&localStorage.setItem(`ai_chat_${e?.id}`,JSON.stringify(i))},[i,e]);const b=async s=>{const a=s||o;if(!a.trim())return void j.error("Please enter a message");if(!l)return void j.error("Please select a course first");const r={id:Date.now().toString(),role:"user",content:a,timestamp:(new Date).toISOString()};c(e=>[...e,r]),x(""),u(!0);try{const s=await p.post("/kb/chat/message",{message:a,program_id:t,course_id:l,session_id:e?.id}),r={id:(Date.now()+1).toString(),role:"assistant",content:s.data.answer,timestamp:(new Date).toISOString(),sources:s.data.sources};c(e=>[...e,r])}catch(n){j.error("Failed to get response from AI"),c(e=>e.filter(e=>e.id!==r.id))}finally{u(!1)}};return a.jsxs("div",{className:"h-full flex flex-col bg-gradient-to-br from-blue-50 to-indigo-50",children:[a.jsx("div",{className:"bg-white shadow-sm border-b border-gray-200 px-6 py-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl flex items-center justify-center shadow-lg",children:a.jsx(I,{className:"h-6 w-6 text-white"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"AI Learning Assistant"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Get instant help with your course materials"})]})]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("select",{value:t,onChange:e=>{r(e.target.value),d("")},className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[a.jsx("option",{value:"",children:"Select Program"}),h.map(e=>a.jsx("option",{value:e.id,children:e.name},e.id))]}),a.jsxs("select",{value:l,onChange:e=>d(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",disabled:!t,children:[a.jsx("option",{value:"",children:"Select Course"}),y.map(e=>a.jsx("option",{value:e.id,children:e.name},e.id))]}),a.jsxs("button",{onClick:()=>{c([]),localStorage.removeItem(`ai_chat_${e?.id}`),j.success("Chat history cleared")},className:"px-4 py-2 text-gray-600 hover:text-red-600 transition-colors flex items-center space-x-2",children:[a.jsx(w,{className:"h-5 w-5"}),a.jsx("span",{children:"Clear"})]})]})]})}),a.jsxs("div",{className:"flex-1 overflow-hidden flex",children:[a.jsxs("div",{className:"flex-1 flex flex-col",children:[a.jsx("div",{className:"flex-1 overflow-y-auto px-6 py-4 space-y-4",children:l?0===i.length?a.jsx("div",{className:"h-full flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx(R,{className:"h-16 w-16 text-blue-300 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Ready to Help!"}),a.jsx("p",{className:"text-gray-500 max-w-md mb-6",children:"Ask me anything about your course materials. I'm here to help you learn and understand better."}),a.jsx("div",{className:"grid grid-cols-2 gap-3 max-w-lg mx-auto",children:["Explain this topic in simple terms","Give me practice questions","What are the key concepts?","How does this relate to real world?","Summarize this chapter","Help me prepare for exam"].map((e,s)=>a.jsx("button",{onClick:()=>b(e),className:"px-4 py-2 bg-white border border-gray-200 rounded-lg hover:bg-blue-50 hover:border-blue-300 transition-colors text-sm text-gray-700",children:e},s))})]})}):a.jsxs(a.Fragment,{children:[i.map(s=>a.jsx(W.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"flex "+("user"===s.role?"justify-end":"justify-start"),children:a.jsxs("div",{className:"flex items-start space-x-2 max-w-3xl "+("user"===s.role?"flex-row-reverse space-x-reverse":""),children:[a.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 "+("user"===s.role?"bg-blue-500":"bg-gradient-to-br from-purple-500 to-indigo-600"),children:"user"===s.role?a.jsx("span",{className:"text-white text-sm font-medium",children:e?.name?.charAt(0).toUpperCase()||"U"}):a.jsx(R,{className:"h-4 w-4 text-white"})}),a.jsxs("div",{className:"px-4 py-3 rounded-2xl "+("user"===s.role?"bg-blue-500 text-white":"bg-white border border-gray-200 text-gray-900"),children:[a.jsx("p",{className:"text-sm whitespace-pre-wrap",children:s.content}),s.sources&&s.sources.length>0&&a.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[a.jsxs("p",{className:"text-xs font-medium mb-1 flex items-center text-gray-600",children:[a.jsx(E,{className:"h-3 w-3 mr-1"}),"Sources"]}),s.sources.map((e,s)=>a.jsxs("p",{className:"text-xs text-gray-500",children:["• ",e.title]},s))]})]})]})},s.id)),m&&a.jsx(W.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"flex justify-start",children:a.jsxs("div",{className:"flex items-start space-x-2",children:[a.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-purple-500 to-indigo-600 flex items-center justify-center",children:a.jsx(R,{className:"h-4 w-4 text-white"})}),a.jsx("div",{className:"bg-white border border-gray-200 px-4 py-3 rounded-2xl",children:a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),a.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),a.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})]})}),a.jsx("div",{ref:s})]}):a.jsx("div",{className:"h-full flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx(F,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Select a Course to Start"}),a.jsx("p",{className:"text-gray-500 max-w-md",children:"Choose your program and course above to begin chatting with your AI learning assistant"})]})})}),a.jsx("div",{className:"border-t border-gray-200 bg-white px-6 py-4",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("input",{type:"text",value:o,onChange:e=>x(e.target.value),onKeyPress:e=>"Enter"===e.key&&!e.shiftKey&&b(),placeholder:l?"Ask me anything...":"Select a course first",disabled:!l||m,className:"flex-1 px-4 py-3 bg-gray-50 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-100 disabled:cursor-not-allowed"}),a.jsxs("button",{onClick:()=>b(),disabled:!l||!o.trim()||m,className:"px-6 py-3 bg-gradient-to-r from-blue-500 to-indigo-600 text-white rounded-xl hover:from-blue-600 hover:to-indigo-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2 shadow-lg",children:[a.jsx(B,{className:"h-5 w-5"}),a.jsx("span",{children:"Send"})]})]})})]}),a.jsxs("div",{className:"w-80 border-l border-gray-200 bg-white p-6",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[a.jsx(Ie,{className:"h-5 w-5 mr-2 text-yellow-500"}),"Tips for Better Results"]}),a.jsxs("div",{className:"space-y-4 text-sm",children:[a.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg",children:[a.jsx("p",{className:"font-medium text-blue-900 mb-1",children:"Be Specific"}),a.jsx("p",{className:"text-blue-700",children:"Ask detailed questions about specific topics or concepts"})]}),a.jsxs("div",{className:"p-3 bg-green-50 rounded-lg",children:[a.jsx("p",{className:"font-medium text-green-900 mb-1",children:"Context Matters"}),a.jsx("p",{className:"text-green-700",children:"Mention the chapter or topic for more relevant answers"})]}),a.jsxs("div",{className:"p-3 bg-purple-50 rounded-lg",children:[a.jsx("p",{className:"font-medium text-purple-900 mb-1",children:"Learn Actively"}),a.jsx("p",{className:"text-purple-700",children:"Ask for examples, practice questions, or explanations"})]}),a.jsxs("div",{className:"p-3 bg-orange-50 rounded-lg",children:[a.jsx("p",{className:"font-medium text-orange-900 mb-1",children:"Review & Practice"}),a.jsx("p",{className:"text-orange-700",children:"Request summaries and key points for better retention"})]})]}),a.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Example Questions:"}),a.jsxs("ul",{className:"space-y-2 text-sm text-gray-600",children:[a.jsxs("li",{className:"flex items-start",children:[a.jsx(He,{className:"h-4 w-4 mr-2 mt-0.5 text-gray-400"}),a.jsx("span",{children:"What are the main concepts in Chapter 3?"})]}),a.jsxs("li",{className:"flex items-start",children:[a.jsx(He,{className:"h-4 w-4 mr-2 mt-0.5 text-gray-400"}),a.jsx("span",{children:"Explain photosynthesis in simple terms"})]}),a.jsxs("li",{className:"flex items-start",children:[a.jsx(He,{className:"h-4 w-4 mr-2 mt-0.5 text-gray-400"}),a.jsx("span",{children:"Give me 5 practice questions on algebra"})]}),a.jsxs("li",{className:"flex items-start",children:[a.jsx(He,{className:"h-4 w-4 mr-2 mt-0.5 text-gray-400"}),a.jsx("span",{children:"How do I solve quadratic equations?"})]})]})]})]})]})]})},Ss=()=>{const[e,s]=H.useState(""),{data:r,isLoading:l,error:n}=t({queryKey:["academic-years"],queryFn:async()=>(await p.get("/frappe/Academic Year")).data.data||[]}),d=(r||[]).filter(s=>s.academic_year_name?.toLowerCase().includes(e.toLowerCase()));return l?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):n?a.jsx("div",{className:"text-center py-12",children:a.jsx("p",{className:"text-red-600",children:"Error loading academic years. Please try again."})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Academic Years"}),a.jsx("p",{className:"text-gray-600 mt-1",children:"Manage academic year settings"})]}),a.jsxs("button",{className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center",children:[a.jsx(Ke,{className:"h-5 w-5 mr-2"}),"Add Year"]})]}),a.jsxs("div",{className:"relative",children:[a.jsx(N,{className:"h-5 w-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Search academic years...",value:e,onChange:e=>s(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsx("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:a.jsx("ul",{className:"divide-y divide-gray-200",children:d.map(e=>a.jsx("li",{children:a.jsx("div",{className:"px-4 py-4 sm:px-6 hover:bg-gray-50",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0 h-10 w-10 bg-blue-100 rounded-lg flex items-center justify-center",children:a.jsx(k,{className:"h-6 w-6 text-blue-600"})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:e.academic_year_name}),a.jsxs("div",{className:"text-sm text-gray-500",children:[new Date(e.year_start_date).toLocaleDateString()," - ",new Date(e.year_end_date).toLocaleDateString()]})]})]}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:a.jsx(Oe,{className:"h-4 w-4"})}),a.jsx("button",{className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:a.jsx(w,{className:"h-4 w-4"})})]})]})})},e.name))})}),0===d.length&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(k,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"No academic years found."})]})]})},ks=()=>{const[e,s]=H.useState(""),{data:r,isLoading:l,error:n}=t({queryKey:["academic-terms"],queryFn:async()=>{try{const e=await p.get("/frappe/Academic Term");let s=[];return e.data&&e.data.data&&Array.isArray(e.data.data)?s=e.data.data:e.data&&Array.isArray(e.data)?s=e.data:e.data&&e.data.message&&(s=e.data.message),s||[]}catch(e){return[]}}}),d=(r||[]).filter(s=>(s.term_name||s.title||s.name||"")?.toLowerCase().includes(e.toLowerCase())||(s.academic_year||"")?.toLowerCase().includes(e.toLowerCase()));return l?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):n?a.jsx("div",{className:"text-center py-12",children:a.jsx("p",{className:"text-red-600",children:"Error loading academic terms. Please try again."})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Academic Terms"}),a.jsx("p",{className:"text-gray-600 mt-1",children:"Manage academic terms and semesters"})]}),a.jsxs("button",{className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center",children:[a.jsx(Ke,{className:"h-5 w-5 mr-2"}),"Add Term"]})]}),a.jsxs("div",{className:"relative",children:[a.jsx(N,{className:"h-5 w-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Search academic terms...",value:e,onChange:e=>s(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:d.map(e=>a.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6 hover:shadow-lg transition-shadow",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center mb-3",children:[a.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center mr-3",children:a.jsx(S,{className:"h-5 w-5 text-green-600"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900",children:e.term_name||e.title}),a.jsx("p",{className:"text-sm text-gray-500",children:e.academic_year})]})]}),a.jsxs("div",{className:"space-y-1 text-sm text-gray-600",children:[e.term_start_date&&a.jsxs("p",{children:["Start: ",new Date(e.term_start_date).toLocaleDateString()]}),e.term_end_date&&a.jsxs("p",{children:["End: ",new Date(e.term_end_date).toLocaleDateString()]}),!e.term_start_date&&!e.term_end_date&&a.jsx("p",{className:"text-gray-400 italic",children:"No date information available"})]})]}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:a.jsx(Oe,{className:"h-4 w-4"})}),a.jsx("button",{className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:a.jsx(w,{className:"h-4 w-4"})})]})]})},e.name))}),0===d.length&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(S,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"No academic terms found."})]})]})},Ls=()=>{const[e,s]=H.useState(""),{data:r,isLoading:l,error:n}=t({queryKey:["rooms"],queryFn:async()=>(await p.get("/frappe/Room")).data.data||[]}),d=(r||[]).filter(s=>s.room_name?.toLowerCase().includes(e.toLowerCase())||s.room_number?.toLowerCase().includes(e.toLowerCase())||s.building?.toLowerCase().includes(e.toLowerCase()));return l?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):n?a.jsx("div",{className:"text-center py-12",children:a.jsx("p",{className:"text-red-600",children:"Error loading rooms. Please try again."})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Rooms"}),a.jsx("p",{className:"text-gray-600 mt-1",children:"Manage classroom and facility rooms"})]}),a.jsxs("button",{className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center",children:[a.jsx(Ke,{className:"h-5 w-5 mr-2"}),"Add Room"]})]}),a.jsxs("div",{className:"relative",children:[a.jsx(N,{className:"h-5 w-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Search rooms...",value:e,onChange:e=>s(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:d.map(e=>a.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6 hover:shadow-lg transition-shadow",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center mb-3",children:[a.jsx("div",{className:"w-10 h-10 bg-indigo-100 rounded-lg flex items-center justify-center mr-3",children:a.jsx(q,{className:"h-5 w-5 text-indigo-600"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900",children:e.room_name}),a.jsxs("p",{className:"text-sm text-gray-500",children:["Room ",e.room_number]})]})]}),a.jsxs("div",{className:"space-y-2",children:[e.building&&a.jsxs("p",{className:"text-sm text-gray-600",children:["Building: ",e.building]}),e.location&&a.jsxs("p",{className:"text-sm text-gray-600",children:["Location: ",e.location]}),a.jsxs("div",{className:"flex items-center text-sm",children:[a.jsx(i,{className:"h-4 w-4 mr-1 text-gray-400"}),a.jsxs("span",{className:"text-gray-600",children:["Capacity: ",e.seating_capacity||"N/A"]})]})]})]}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:a.jsx(Oe,{className:"h-4 w-4"})}),a.jsx("button",{className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:a.jsx(w,{className:"h-4 w-4"})})]})]})},e.name))}),0===d.length&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(q,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"No rooms found."})]})]})},As=()=>{const[e,s]=H.useState(""),{data:r,isLoading:l,error:n}=t({queryKey:["instructors"],queryFn:async()=>(await p.get("/frappe/Instructor")).data.data||[]}),d=(r||[]).filter(s=>s.instructor_name?.toLowerCase().includes(e.toLowerCase())||s.employee?.toLowerCase().includes(e.toLowerCase())||s.employee_id?.toLowerCase().includes(e.toLowerCase())||s.department?.toLowerCase().includes(e.toLowerCase()));return l?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):n?a.jsx("div",{className:"text-center py-12",children:a.jsx("p",{className:"text-red-600",children:"Error loading instructors. Please try again."})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Instructors"}),a.jsx("p",{className:"text-gray-600 mt-1",children:"Manage teaching staff and track attendance with Employee IDs"})]}),a.jsxs("button",{className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center",children:[a.jsx(Ke,{className:"h-5 w-5 mr-2"}),"Add Instructor"]})]}),a.jsxs("div",{className:"relative",children:[a.jsx(N,{className:"h-5 w-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Search by name, employee ID, or department...",value:e,onChange:e=>s(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:d.map(e=>a.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6 hover:shadow-lg transition-shadow",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center mb-3",children:[a.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center mr-3",children:a.jsx(ss,{className:"h-5 w-5 text-blue-600"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-semibold text-gray-900",children:e.instructor_name}),a.jsx("p",{className:"text-sm text-gray-500",children:e.designation})]})]}),a.jsxs("div",{className:"space-y-2",children:[(e.employee||e.employee_id)&&a.jsxs("div",{className:"flex items-center text-sm font-medium bg-blue-50 text-blue-700 px-2 py-1 rounded",children:[a.jsx(qe,{className:"h-4 w-4 mr-1"}),a.jsxs("span",{children:["Employee ID: ",e.employee||e.employee_id||"N/A"]})]}),e.department&&a.jsxs("p",{className:"text-sm text-gray-600",children:["Dept: ",e.department]}),e.email&&a.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[a.jsx(re,{className:"h-4 w-4 mr-1 text-gray-400"}),a.jsx("span",{className:"truncate",children:e.email})]}),e.mobile_number&&a.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[a.jsx(le,{className:"h-4 w-4 mr-1 text-gray-400"}),a.jsx("span",{children:e.mobile_number})]})]})]}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:a.jsx(Oe,{className:"h-4 w-4"})}),a.jsx("button",{className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:a.jsx(w,{className:"h-4 w-4"})})]})]})},e.name))}),0===d.length&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(ss,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"No instructors found."})]})]})},Ds=()=>{const[e,s]=H.useState(""),[r,l]=H.useState(""),[n,d]=H.useState("all"),[i,c]=H.useState(""),[o,x]=H.useState(""),[h,g]=H.useState("attendance"),{data:j,isLoading:y,error:b}=t({queryKey:["employee-attendance"],queryFn:async()=>{try{const e=await p.get("/frappe/Attendance");let s=[];return e.data&&e.data.data&&Array.isArray(e.data.data)?s=e.data.data:e.data&&Array.isArray(e.data)&&(s=e.data),s||[]}catch(e){return[]}}}),{data:f,isLoading:v,error:w}=t({queryKey:["employee-checkin"],queryFn:async()=>{try{const e=await p.get("/frappe/Employee Checkin");let s=[];return e.data&&e.data.data&&Array.isArray(e.data.data)?s=e.data.data:e.data&&Array.isArray(e.data)&&(s=e.data),s||[]}catch(e){return[]}}}),_=j||[],C=f||[],S=_.filter(s=>{const t=""===e||s.employee?.toLowerCase().includes(e.toLowerCase())||s.employee_name?.toLowerCase().includes(e.toLowerCase())||s.department?.toLowerCase().includes(e.toLowerCase());let a=!0;if(s.attendance_date){const e=new Date(s.attendance_date);if("single"===n&&r){const s=new Date(r);a=e.toDateString()===s.toDateString()}else if("range"===n&&i&&o){const s=new Date(i),t=new Date(o);t.setHours(23,59,59,999),a=e>=s&&e<=t}}return t&&a}),L=C.filter(s=>{const t=""===e||s.employee?.toLowerCase().includes(e.toLowerCase())||s.employee_name?.toLowerCase().includes(e.toLowerCase());let a=!0;if(s.time){const e=new Date(s.time);if("single"===n&&r){const s=new Date(r);a=e.toDateString()===s.toDateString()}else if("range"===n&&i&&o){const s=new Date(i),t=new Date(o);t.setHours(23,59,59,999),a=e>=s&&e<=t}}return t&&a}),A="attendance"===h?b:w;if("attendance"===h?y:v)return a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})});if(A)return a.jsx("div",{className:"text-center py-12",children:a.jsx("p",{className:"text-red-600",children:"Error loading instructor attendance. Please try again."})});const D=e=>{switch(e?.toLowerCase()){case"present":return a.jsx(m,{className:"h-5 w-5 text-green-600"});case"absent":return a.jsx(ls,{className:"h-5 w-5 text-red-600"});case"half day":case"half-day":return a.jsx(u,{className:"h-5 w-5 text-yellow-600"});case"on leave":return a.jsx(k,{className:"h-5 w-5 text-blue-600"});default:return a.jsx(O,{className:"h-5 w-5 text-gray-600"})}},E=e=>{switch(e?.toLowerCase()){case"present":return"bg-green-100 text-green-700";case"absent":return"bg-red-100 text-red-700";case"half day":case"half-day":return"bg-yellow-100 text-yellow-700";case"on leave":return"bg-blue-100 text-blue-700";default:return"bg-gray-100 text-gray-700"}};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Instructor Attendance"}),a.jsxs("p",{className:"text-gray-600 mt-1",children:["Track instructor attendance using Employee IDs","attendance"===h?` (Showing ${S.length} of ${_.length} records)`:` (Showing ${L.length} of ${C.length} check-ins)`]})]}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsxs("button",{onClick:()=>g("attendance"),className:"px-4 py-2 rounded-lg transition-colors flex items-center "+("attendance"===h?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:[a.jsx(O,{className:"h-5 w-5 mr-2"}),"Attendance"]}),a.jsxs("button",{onClick:()=>g("checkin"),className:"px-4 py-2 rounded-lg transition-colors flex items-center "+("checkin"===h?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:[a.jsx(u,{className:"h-5 w-5 mr-2"}),"Check-ins"]})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx(N,{className:"h-5 w-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Search by employee ID, name, or department...",value:e,onChange:e=>s(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsx("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:a.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(k,{className:"h-5 w-5 text-gray-500"}),a.jsxs("select",{value:n,onChange:e=>{d(e.target.value),l(""),c(""),x("")},className:"px-3 py-1.5 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"all",children:"All Dates"}),a.jsx("option",{value:"single",children:"Specific Date"}),a.jsx("option",{value:"range",children:"Date Range"})]})]}),"single"===n&&a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Date:"}),a.jsx("input",{type:"date",value:r,onChange:e=>l(e.target.value),className:"px-3 py-1.5 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),"range"===n&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700",children:"From:"}),a.jsx("input",{type:"date",value:i,onChange:e=>c(e.target.value),className:"px-3 py-1.5 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700",children:"To:"}),a.jsx("input",{type:"date",value:o,onChange:e=>x(e.target.value),min:i,className:"px-3 py-1.5 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),("all"!==n||e)&&a.jsxs("button",{onClick:()=>{d("all"),l(""),c(""),x(""),s("")},className:"px-3 py-1.5 bg-gray-100 text-gray-700 rounded-md text-sm hover:bg-gray-200 transition-colors flex items-center",children:[a.jsx(ls,{className:"h-4 w-4 mr-1"}),"Clear Filters"]})]})})]}),"attendance"===h&&a.jsxs("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:[a.jsx("ul",{className:"divide-y divide-gray-200",children:S.map(e=>a.jsx("li",{children:a.jsx("div",{className:"px-4 py-4 sm:px-6 hover:bg-gray-50",children:a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0 h-10 w-10 bg-blue-100 rounded-full flex items-center justify-center",children:D(e.status)}),a.jsxs("div",{className:"ml-4",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("p",{className:"text-sm font-medium text-gray-900",children:e.employee_name||"Unknown"}),a.jsx("span",{className:`ml-2 px-2 py-0.5 text-xs rounded ${E(e.status)}`,children:e.status}),1===e.late_entry&&a.jsx("span",{className:"ml-2 px-2 py-0.5 text-xs bg-orange-100 text-orange-700 rounded",children:"Late Entry"}),1===e.early_exit&&a.jsx("span",{className:"ml-2 px-2 py-0.5 text-xs bg-purple-100 text-purple-700 rounded",children:"Early Exit"})]}),a.jsxs("div",{className:"flex items-center space-x-4 mt-1",children:[a.jsxs("div",{className:"flex items-center text-xs text-gray-500",children:[a.jsx(qe,{className:"h-3 w-3 mr-1"}),e.employee]}),e.attendance_date&&a.jsxs("div",{className:"flex items-center text-xs text-gray-500",children:[a.jsx(k,{className:"h-3 w-3 mr-1"}),new Date(e.attendance_date).toLocaleDateString()]}),e.department&&a.jsx("span",{className:"text-xs bg-gray-100 text-gray-700 px-2 py-0.5 rounded",children:e.department}),e.shift&&a.jsxs("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-0.5 rounded",children:["Shift: ",e.shift]})]}),a.jsxs("div",{className:"flex items-center space-x-4 mt-2",children:[e.check_in_time&&a.jsxs("span",{className:"text-xs text-gray-600",children:[a.jsx("strong",{children:"In:"})," ",e.check_in_time]}),e.check_out_time&&a.jsxs("span",{className:"text-xs text-gray-600",children:[a.jsx("strong",{children:"Out:"})," ",e.check_out_time]}),e.working_hours&&a.jsxs("span",{className:"text-xs text-gray-600",children:[a.jsx("strong",{children:"Hours:"})," ",e.working_hours]})]})]})]})})})},e.name))}),0===S.length&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(O,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"No attendance records found."})]})]}),"checkin"===h&&a.jsxs("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:[a.jsx("ul",{className:"divide-y divide-gray-200",children:L.map(e=>{return a.jsx("li",{children:a.jsx("div",{className:"px-4 py-4 sm:px-6 hover:bg-gray-50",children:a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0 h-10 w-10 bg-gray-100 rounded-full flex items-center justify-center",children:(s=e.log_type,"in"===s?.toLowerCase()?a.jsx(xe,{className:"h-5 w-5 text-green-600"}):a.jsx(ce,{className:"h-5 w-5 text-orange-600"}))}),a.jsxs("div",{className:"ml-4",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("p",{className:"text-sm font-medium text-gray-900",children:e.employee_name||"Unknown"}),a.jsxs("span",{className:"ml-2 px-2 py-0.5 text-xs rounded "+("in"===e.log_type?.toLowerCase()?"bg-green-100 text-green-700":"bg-orange-100 text-orange-700"),children:["Check ",e.log_type]})]}),a.jsxs("div",{className:"flex items-center space-x-4 mt-1",children:[a.jsxs("div",{className:"flex items-center text-xs text-gray-500",children:[a.jsx(qe,{className:"h-3 w-3 mr-1"}),e.employee]}),e.time&&a.jsxs("div",{className:"flex items-center text-xs text-gray-500",children:[a.jsx(u,{className:"h-3 w-3 mr-1"}),new Date(e.time).toLocaleString()]}),e.device_id&&a.jsxs("span",{className:"text-xs bg-gray-100 text-gray-700 px-2 py-0.5 rounded",children:["Device: ",e.device_id]})]})]})]})})})},e.name);var s})}),0===L.length&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(u,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"No check-in records found."})]})]})]})},Es=()=>{const[e,s]=H.useState(""),[r,l]=H.useState(""),[n,d]=H.useState((new Date).getFullYear().toString()),[i,c]=H.useState("salary-slips"),[o,x]=H.useState([]),{data:m}=t({queryKey:["instructors"],queryFn:async()=>{const e=await p.get("/frappe/Instructor");return e.data.data||e.data||[]}});H.useEffect(()=>{if(m){const e=m.map(e=>e.employee).filter(e=>e&&"N/A"!==e);x(e)}},[m]);const{data:u,isLoading:h,error:g}=t({queryKey:["salary-slips"],queryFn:async()=>{try{const e=await p.get("/frappe/Salary Slip");let s=[];e.data&&e.data.data&&Array.isArray(e.data.data)?s=e.data.data:e.data&&Array.isArray(e.data)&&(s=e.data);return s.filter(e=>o.includes(e.employee))||[]}catch(e){return[]}},enabled:o.length>0}),{data:j,isLoading:y,error:b}=t({queryKey:["payroll-entries"],queryFn:async()=>{try{const e=await p.get("/frappe/Payroll Entry");let s=[];return e.data&&e.data.data&&Array.isArray(e.data.data)?s=e.data.data:e.data&&Array.isArray(e.data)&&(s=e.data),s||[]}catch(e){return[]}}}),f=j||[],v=(u||[]).filter(s=>{const t=""===e||s.employee?.toLowerCase().includes(e.toLowerCase())||s.employee_name?.toLowerCase().includes(e.toLowerCase())||s.department?.toLowerCase().includes(e.toLowerCase())||s.designation?.toLowerCase().includes(e.toLowerCase());let a=!0;if(r||n){const e=new Date(s.start_date||s.posting_date);r&&e.getMonth()!==parseInt(r)-1&&(a=!1),n&&e.getFullYear()!==parseInt(n)&&(a=!1)}return t&&a}),w=f.filter(s=>{const t=""===e||s.department?.toLowerCase().includes(e.toLowerCase())||s.designation?.toLowerCase().includes(e.toLowerCase());let a=!0;if(r||n){const e=new Date(s.start_date||s.posting_date);r&&e.getMonth()!==parseInt(r)-1&&(a=!1),n&&e.getFullYear()!==parseInt(n)&&(a=!1)}return t&&a}),_="salary-slips"===i?g:b;if("salary-slips"===i?h:y)return a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})});if(_)return a.jsx("div",{className:"text-center py-12",children:a.jsx("p",{className:"text-red-600",children:"Error loading payroll data. Please try again."})});const C=e=>{switch(e?.toLowerCase()){case"submitted":case"paid":return"bg-green-100 text-green-700";case"draft":return"bg-yellow-100 text-yellow-700";case"cancelled":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},S=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:2}).format(e||0);return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Instructor Payroll"}),a.jsxs("p",{className:"text-gray-600 mt-1",children:["Manage instructor salary and payroll","salary-slips"===i?` (${v.length} salary slips)`:` (${w.length} payroll entries)`]})]}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsxs("button",{onClick:()=>c("salary-slips"),className:"px-4 py-2 rounded-lg transition-colors flex items-center "+("salary-slips"===i?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:[a.jsx(E,{className:"h-5 w-5 mr-2"}),"Salary Slips"]}),a.jsxs("button",{onClick:()=>c("payroll-entries"),className:"px-4 py-2 rounded-lg transition-colors flex items-center "+("payroll-entries"===i?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:[a.jsx(U,{className:"h-5 w-5 mr-2"}),"Payroll Entries"]})]})]}),a.jsx("div",{className:"space-y-4",children:a.jsxs("div",{className:"flex flex-wrap gap-3",children:[a.jsxs("div",{className:"relative flex-1 min-w-[200px]",children:[a.jsx(N,{className:"h-5 w-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Search by employee, name, or department...",value:e,onChange:e=>s(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("select",{value:r,onChange:e=>l(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"All Months"}),a.jsx("option",{value:"1",children:"January"}),a.jsx("option",{value:"2",children:"February"}),a.jsx("option",{value:"3",children:"March"}),a.jsx("option",{value:"4",children:"April"}),a.jsx("option",{value:"5",children:"May"}),a.jsx("option",{value:"6",children:"June"}),a.jsx("option",{value:"7",children:"July"}),a.jsx("option",{value:"8",children:"August"}),a.jsx("option",{value:"9",children:"September"}),a.jsx("option",{value:"10",children:"October"}),a.jsx("option",{value:"11",children:"November"}),a.jsx("option",{value:"12",children:"December"})]}),a.jsxs("select",{value:n,onChange:e=>d(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"2025",children:"2025"}),a.jsx("option",{value:"2024",children:"2024"}),a.jsx("option",{value:"2023",children:"2023"})]})]})}),"salary-slips"===i&&a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:v.map(e=>a.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6 hover:shadow-lg transition-shadow",children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center mb-2",children:[a.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center mr-3",children:a.jsx($,{className:"h-5 w-5 text-green-600"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900",children:e.employee_name}),a.jsx("p",{className:"text-sm text-gray-500",children:e.designation})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center text-sm",children:[a.jsx(qe,{className:"h-4 w-4 mr-2 text-gray-400"}),a.jsx("span",{className:"text-gray-600",children:e.employee})]}),e.department&&a.jsxs("div",{className:"text-sm text-gray-600",children:["Dept: ",e.department]}),a.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[a.jsx(k,{className:"h-4 w-4 mr-2 text-gray-400"}),new Date(e.start_date).toLocaleDateString()," - ",new Date(e.end_date).toLocaleDateString()]})]})]}),a.jsx("span",{className:`px-2 py-1 text-xs rounded ${C(e.status||"Draft")}`,children:e.status||"Draft"})]}),a.jsxs("div",{className:"border-t pt-4 space-y-2",children:[a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-gray-600",children:"Working Days:"}),a.jsxs("span",{className:"font-medium",children:[e.payment_days||0," / ",e.total_working_days||0]})]}),a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-gray-600",children:"Gross Pay:"}),a.jsx("span",{className:"font-medium text-green-600",children:S(e.gross_pay)})]}),a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-gray-600",children:"Deductions:"}),a.jsx("span",{className:"font-medium text-red-600",children:S(e.total_deduction)})]}),a.jsxs("div",{className:"border-t pt-2 flex justify-between",children:[a.jsx("span",{className:"font-semibold text-gray-900",children:"Net Pay:"}),a.jsx("span",{className:"font-bold text-lg text-blue-600",children:S(e.net_pay)})]})]}),a.jsxs("div",{className:"flex space-x-2 mt-4 pt-4 border-t",children:[a.jsxs("button",{className:"flex-1 flex items-center justify-center px-3 py-2 bg-blue-50 text-blue-600 rounded hover:bg-blue-100 transition-colors text-sm",children:[a.jsx(We,{className:"h-4 w-4 mr-1"}),"Print"]}),a.jsxs("button",{className:"flex-1 flex items-center justify-center px-3 py-2 bg-gray-50 text-gray-600 rounded hover:bg-gray-100 transition-colors text-sm",children:[a.jsx(de,{className:"h-4 w-4 mr-1"}),"Download"]})]})]},e.name))}),"payroll-entries"===i&&a.jsx("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:a.jsx("ul",{className:"divide-y divide-gray-200",children:w.map(e=>a.jsx("li",{children:a.jsx("div",{className:"px-4 py-4 sm:px-6 hover:bg-gray-50",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0 h-10 w-10 bg-blue-100 rounded-full flex items-center justify-center",children:a.jsx(U,{className:"h-5 w-5 text-blue-600"})}),a.jsxs("div",{className:"ml-4",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsxs("p",{className:"text-sm font-medium text-gray-900",children:["Payroll for ",new Date(e.start_date).toLocaleDateString()," - ",new Date(e.end_date).toLocaleDateString()]}),a.jsx("span",{className:`ml-2 px-2 py-0.5 text-xs rounded ${C(e.status)}`,children:e.status})]}),a.jsxs("div",{className:"flex items-center space-x-4 mt-1",children:[e.department&&a.jsxs("span",{className:"text-sm text-gray-600",children:["Dept: ",e.department]}),e.payroll_frequency&&a.jsxs("span",{className:"text-sm text-gray-600",children:["Frequency: ",e.payroll_frequency]}),a.jsxs("span",{className:"text-sm text-gray-600",children:["Employees: ",e.total_employees||0]}),a.jsxs("span",{className:"text-sm font-medium text-green-600",children:["Total: ",S(e.total_salary)]})]}),a.jsxs("div",{className:"flex items-center text-xs text-gray-500 mt-1",children:[a.jsx(k,{className:"h-3 w-3 mr-1"}),"Posted: ",new Date(e.posting_date).toLocaleDateString()]})]})]}),a.jsx("div",{className:"flex space-x-2",children:a.jsx("button",{className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:a.jsx(T,{className:"h-4 w-4"})})})]})})},e.name))})}),("salary-slips"===i&&0===v.length||"payroll-entries"===i&&0===w.length)&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(U,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"salary-slips"===i?"No salary slips found for instructors.":"No payroll entries found."}),0===o.length&&a.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"No instructors have Employee IDs assigned in ERPNext."})]})]})},Ps=({isOpen:e,onClose:s,student:t,onSave:r})=>{const[l,n]=H.useState({first_name:"",last_name:"",student_email_id:"",student_mobile_number:"",program:"",batch:"",date_of_birth:"",gender:"",guardian_name:"",guardian_mobile_number:"",guardian_email_id:""});Q.useEffect(()=>{n(t?{first_name:t.first_name||"",last_name:t.last_name||"",student_email_id:t.student_email_id||"",student_mobile_number:t.student_mobile_number||"",program:t.program||"",batch:t.batch||"",date_of_birth:t.date_of_birth||"",gender:t.gender||"",guardian_name:t.guardian_name||"",guardian_mobile_number:t.guardian_mobile_number||"",guardian_email_id:t.guardian_email_id||""}:{first_name:"",last_name:"",student_email_id:"",student_mobile_number:"",program:"",batch:"",date_of_birth:"",gender:"",guardian_name:"",guardian_mobile_number:"",guardian_email_id:""})},[t]);return e?a.jsx(V,{children:a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsx(W.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:a.jsxs("form",{onSubmit:e=>{e.preventDefault(),r(l)},className:"p-6 space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:t?"Edit Student":"Add Student"}),a.jsx("button",{type:"button",onClick:s,className:"text-gray-400 hover:text-gray-600",children:a.jsx(v,{className:"h-6 w-6"})})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name *"}),a.jsx("input",{type:"text",required:!0,value:l.first_name,onChange:e=>n({...l,first_name:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name *"}),a.jsx("input",{type:"text",required:!0,value:l.last_name,onChange:e=>n({...l,last_name:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email *"}),a.jsx("input",{type:"email",required:!0,value:l.student_email_id,onChange:e=>n({...l,student_email_id:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mobile Number"}),a.jsx("input",{type:"tel",value:l.student_mobile_number,onChange:e=>n({...l,student_mobile_number:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Program"}),a.jsxs("select",{value:l.program,onChange:e=>n({...l,program:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"Select Program"}),a.jsx("option",{value:"10 STD",children:"10 STD"}),a.jsx("option",{value:"9 STD",children:"9 STD"}),a.jsx("option",{value:"8 STD",children:"8 STD"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Batch"}),a.jsx("input",{type:"text",value:l.batch,onChange:e=>n({...l,batch:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g., 2025"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date of Birth"}),a.jsx("input",{type:"date",value:l.date_of_birth,onChange:e=>n({...l,date_of_birth:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Gender"}),a.jsxs("select",{value:l.gender,onChange:e=>n({...l,gender:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"Select Gender"}),a.jsx("option",{value:"Male",children:"Male"}),a.jsx("option",{value:"Female",children:"Female"}),a.jsx("option",{value:"Other",children:"Other"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Guardian Name"}),a.jsx("input",{type:"text",value:l.guardian_name,onChange:e=>n({...l,guardian_name:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Guardian Mobile"}),a.jsx("input",{type:"tel",value:l.guardian_mobile_number,onChange:e=>n({...l,guardian_mobile_number:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Guardian Email"}),a.jsx("input",{type:"email",value:l.guardian_email_id,onChange:e=>n({...l,guardian_email_id:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),a.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[a.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:t?"Update":"Create"})]})]})})})}):null},qs=({readOnly:e=!1})=>{const{user:s}=n(),t="teacher"===s?.role,[d,i]=H.useState(""),[c,o]=H.useState(!1),[x,u]=H.useState(null),h=r(),{data:g,isLoading:j,error:b}=os("students",{admin:"/admin/students",teacher:"/teacher/students/{instructorId}"}),f=l({mutationFn:async({id:e,...s})=>(await p.put(`/students/${e}`,s)).data,onSuccess:e=>{e&&e.data?h.setQueryData(["students"],e.data):h.invalidateQueries({queryKey:["students"]}),_.success("Student updated successfully"),o(!1),u(null)},onError:e=>{_.error("Failed to update student")}}),v=Array.isArray(g)?g:[],w=v.filter(e=>e.first_name?.toLowerCase().includes(d.toLowerCase())||e.last_name?.toLowerCase().includes(d.toLowerCase())||e.student_email_id?.toLowerCase().includes(d.toLowerCase())||e.program?.toLowerCase().includes(d.toLowerCase())||e.student_name?.toLowerCase().includes(d.toLowerCase()));return j?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):b?a.jsx("div",{className:"text-center py-12",children:a.jsx("p",{className:"text-red-600",children:"Error loading students. Please try again."})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Students"}),a.jsxs("p",{className:"text-gray-600 mt-1",children:["Manage students from ERPNext (",v.length," total)"]})]}),a.jsx("div",{className:"text-sm text-gray-500",children:"Note: Creating new students requires ERPNext user management setup"})]}),a.jsxs("div",{className:"relative",children:[a.jsx(N,{className:"h-5 w-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Search students...",value:d,onChange:e=>i(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:w.map((s,r)=>a.jsx(W.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*r},className:"bg-white rounded-lg border border-gray-200 p-6 hover:shadow-lg transition-shadow",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center mb-3",children:[a.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center mr-3",children:a.jsx(ss,{className:"h-5 w-5 text-purple-600"})}),a.jsxs("div",{children:[a.jsxs("h3",{className:"font-semibold text-gray-900",children:[s.first_name," ",s.last_name]}),a.jsx("p",{className:"text-sm text-gray-600",children:s.student_email_id})]})]}),a.jsxs("div",{className:"space-y-2",children:[s.program&&a.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[a.jsx(y,{className:"h-4 w-4 mr-2"}),a.jsxs("span",{children:["Program: ",s.program]})]}),s.batch&&a.jsxs("div",{className:"inline-block bg-gray-100 text-gray-700 px-2 py-1 rounded text-xs",children:["Batch: ",s.batch]}),s.student_mobile_number&&a.jsxs("div",{className:"text-sm text-gray-600",children:["Mobile: ",s.student_mobile_number]}),a.jsx("div",{className:"flex items-center",children:1===s.enabled?a.jsxs("div",{className:"flex items-center text-green-600 text-sm",children:[a.jsx(m,{className:"h-4 w-4 mr-1"}),"Active"]}):a.jsxs("div",{className:"flex items-center text-red-600 text-sm",children:[a.jsx(ls,{className:"h-4 w-4 mr-1"}),"Inactive"]})})]})]}),!t&&!e&&a.jsx("div",{className:"flex space-x-2",children:a.jsx("button",{onClick:()=>(e=>{u(e),o(!0)})(s),className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Edit Student",children:a.jsx(Oe,{className:"h-4 w-4"})})})]})},s.id))}),0===w.length&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(ss,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"No students found matching your search."})]}),a.jsx(Ps,{isOpen:c,onClose:()=>{o(!1),u(null)},student:x,onSave:e=>{x&&f.mutate({...x,...e,id:x.id})}})]})},Fs=()=>{const[e,s]=H.useState(""),{data:r,isLoading:l,error:n}=t({queryKey:["student-applicants"],queryFn:async()=>{try{const e=await p.get("/frappe/Student Applicant");let s=[];return e.data&&e.data.data&&Array.isArray(e.data.data)?s=e.data.data:e.data&&Array.isArray(e.data)?s=e.data:e.data&&e.data.message&&(s=e.data.message),s||[]}catch(e){return[]}}}),d=(r||[]).filter(s=>s.first_name?.toLowerCase().includes(e.toLowerCase())||s.last_name?.toLowerCase().includes(e.toLowerCase())||s.email_id?.toLowerCase().includes(e.toLowerCase())),i=e=>{switch(e?.toLowerCase()){case"approved":return"bg-green-100 text-green-700";case"rejected":return"bg-red-100 text-red-700";case"pending":return"bg-yellow-100 text-yellow-700";default:return"bg-gray-100 text-gray-700"}};return l?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):n?a.jsx("div",{className:"text-center py-12",children:a.jsx("p",{className:"text-red-600",children:"Error loading applicants. Please try again."})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Student Applicants"}),a.jsx("p",{className:"text-gray-600 mt-1",children:"Review and manage admission applications"})]}),a.jsxs("button",{className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center",children:[a.jsx(Ke,{className:"h-5 w-5 mr-2"}),"Add Applicant"]})]}),a.jsxs("div",{className:"relative",children:[a.jsx(N,{className:"h-5 w-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Search applicants...",value:e,onChange:e=>s(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:d.map(e=>a.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6 hover:shadow-lg transition-shadow",children:a.jsx("div",{className:"flex items-start justify-between",children:a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center mb-3",children:[a.jsx("div",{className:"w-10 h-10 bg-orange-100 rounded-lg flex items-center justify-center mr-3",children:a.jsx(D,{className:"h-5 w-5 text-orange-600"})}),a.jsxs("div",{children:[a.jsxs("h3",{className:"font-semibold text-gray-900",children:[e.first_name," ",e.last_name]}),a.jsx("span",{className:`text-xs px-2 py-0.5 rounded ${i(e.application_status)}`,children:e.application_status})]})]}),a.jsxs("div",{className:"space-y-1 text-sm text-gray-600",children:[a.jsxs("p",{children:["Program: ",e.program]}),a.jsx("p",{children:e.email_id}),a.jsx("p",{children:e.mobile_no})]}),a.jsxs("div",{className:"mt-3 flex space-x-2",children:[a.jsxs("button",{className:"text-xs bg-green-50 text-green-600 px-3 py-1 rounded hover:bg-green-100",children:[a.jsx(je,{className:"h-3 w-3 inline mr-1"}),"Approve"]}),a.jsxs("button",{className:"text-xs bg-red-50 text-red-600 px-3 py-1 rounded hover:bg-red-100",children:[a.jsx(v,{className:"h-3 w-3 inline mr-1"}),"Reject"]})]})]})})},e.name))}),0===d.length&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(D,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"No applicants found."})]})]})},Is=()=>{const[e,s]=H.useState(""),{data:r,isLoading:l,error:n}=t({queryKey:["student-admissions"],queryFn:async()=>{try{const e=await p.get("/frappe/Student Admission");let s=[];return e.data&&e.data.data&&Array.isArray(e.data.data)?s=e.data.data:e.data&&Array.isArray(e.data)?s=e.data:e.data&&e.data.message&&(s=e.data.message),s||[]}catch(e){return[]}}}),d=r||[],i=d.filter(s=>s.student_name?.toLowerCase().includes(e.toLowerCase())||s.application_no?.toLowerCase().includes(e.toLowerCase())||s.program?.toLowerCase().includes(e.toLowerCase())||s.status?.toLowerCase().includes(e.toLowerCase()));if(l)return a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})});if(n)return a.jsx("div",{className:"text-center py-12",children:a.jsx("p",{className:"text-red-600",children:"Error loading student admissions. Please try again."})});const c=e=>{switch(e?.toLowerCase()){case"approved":return"bg-green-100 text-green-700";case"pending":return"bg-yellow-100 text-yellow-700";case"rejected":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Student Admissions"}),a.jsxs("p",{className:"text-gray-600 mt-1",children:["Manage student admission records (",d.length," total)"]})]}),a.jsxs("button",{className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center",children:[a.jsx(Ke,{className:"h-5 w-5 mr-2"}),"Add Admission"]})]}),a.jsxs("div",{className:"relative",children:[a.jsx(N,{className:"h-5 w-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Search admissions...",value:e,onChange:e=>s(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsx("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:a.jsx("ul",{className:"divide-y divide-gray-200",children:i.map(e=>a.jsx("li",{children:a.jsx("div",{className:"px-4 py-4 sm:px-6 hover:bg-gray-50",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0 h-10 w-10 bg-green-100 rounded-full flex items-center justify-center",children:a.jsx(y,{className:"h-6 w-6 text-green-600"})}),a.jsxs("div",{className:"ml-4",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("p",{className:"text-sm font-medium text-gray-900",children:e.student_name}),a.jsx("span",{className:`ml-2 px-2 py-0.5 text-xs rounded ${c(e.status)}`,children:e.status})]}),a.jsxs("p",{className:"text-sm text-gray-500",children:["App No: ",e.application_no]}),a.jsxs("div",{className:"flex items-center space-x-4 mt-1",children:[e.program&&a.jsx("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-0.5 rounded",children:e.program}),e.student_batch&&a.jsxs("span",{className:"text-xs bg-gray-100 text-gray-700 px-2 py-0.5 rounded",children:["Batch: ",e.student_batch]}),e.admission_date&&a.jsxs("div",{className:"flex items-center text-xs text-gray-500",children:[a.jsx(k,{className:"h-3 w-3 mr-1"}),new Date(e.admission_date).toLocaleDateString()]})]})]})]}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:a.jsx(Oe,{className:"h-4 w-4"})}),a.jsx("button",{className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:a.jsx(w,{className:"h-4 w-4"})})]})]})})},e.name))})}),0===i.length&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(y,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"No student admissions found."})]})]})},Ms=()=>{const[e,s]=H.useState(""),{data:r,isLoading:l,error:n}=t({queryKey:["student-batches"],queryFn:async()=>{try{const e=await p.get("/frappe/Student Batch Name");let s=[];return e.data&&e.data.data&&Array.isArray(e.data.data)?s=e.data.data:e.data&&Array.isArray(e.data)?s=e.data:e.data&&e.data.message&&(s=e.data.message),s||[]}catch(e){return[]}}}),d=r||[],i=d.filter(s=>(s.batch_name||s.name||"")?.toLowerCase().includes(e.toLowerCase())||(s.program||"")?.toLowerCase().includes(e.toLowerCase())||(s.academic_year||"")?.toLowerCase().includes(e.toLowerCase()));return l?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):n?a.jsx("div",{className:"text-center py-12",children:a.jsx("p",{className:"text-red-600",children:"Error loading student batches. Please try again."})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Student Batches"}),a.jsxs("p",{className:"text-gray-600 mt-1",children:["Manage student batch groups (",d.length," total)"]})]}),a.jsxs("button",{className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center",children:[a.jsx(Ke,{className:"h-5 w-5 mr-2"}),"Add Batch"]})]}),a.jsxs("div",{className:"relative",children:[a.jsx(N,{className:"h-5 w-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Search batches...",value:e,onChange:e=>s(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:i.map(e=>a.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6 hover:shadow-lg transition-shadow",children:a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center mb-2",children:[a.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center mr-3",children:a.jsx(o,{className:"h-5 w-5 text-purple-600"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900",children:e.batch_name||e.name}),a.jsx("p",{className:"text-sm text-gray-500",children:e.program||"No program assigned"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[a.jsx(y,{className:"h-4 w-4 mr-2 text-gray-400"}),a.jsxs("span",{children:[e.academic_year||"N/A"," ",e.academic_term?`- ${e.academic_term}`:""]})]}),e.start_date&&a.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[a.jsx(k,{className:"h-4 w-4 mr-2 text-gray-400"}),a.jsx("span",{children:new Date(e.start_date).toLocaleDateString()}),e.end_date&&a.jsxs("span",{children:[" - ",new Date(e.end_date).toLocaleDateString()]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("span",{className:"text-sm text-gray-600",children:["Strength: ",e.current_strength||0,"/",e.max_strength||"-"]}),0===e.disabled||void 0===e.disabled?a.jsx("span",{className:"px-2 py-0.5 bg-green-100 text-green-700 text-xs rounded",children:"Active"}):a.jsx("span",{className:"px-2 py-0.5 bg-red-100 text-red-700 text-xs rounded",children:"Disabled"})]})]})]}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:a.jsx(Oe,{className:"h-4 w-4"})}),a.jsx("button",{className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:a.jsx(w,{className:"h-4 w-4"})})]})]})},e.name))}),0===i.length&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(o,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"No student batches found."})]})]})},Rs=()=>{const[e,s]=H.useState(""),{data:r,isLoading:l,error:n}=t({queryKey:["student-categories"],queryFn:async()=>{try{const e=await p.get("/frappe/Student Category");let s=[];return e.data&&e.data.data&&Array.isArray(e.data.data)?s=e.data.data:e.data&&Array.isArray(e.data)?s=e.data:e.data&&e.data.message&&(s=e.data.message),s||[]}catch(e){return[]}}}),d=r||[],i=d.filter(s=>(s.category_name||s.category||s.name||"")?.toLowerCase().includes(e.toLowerCase())||(s.description||"")?.toLowerCase().includes(e.toLowerCase()));return l?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):n?a.jsx("div",{className:"text-center py-12",children:a.jsx("p",{className:"text-red-600",children:"Error loading student categories. Please try again."})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Student Categories"}),a.jsxs("p",{className:"text-gray-600 mt-1",children:["Manage student classification categories (",d.length," total)"]})]}),a.jsxs("button",{className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center",children:[a.jsx(Ke,{className:"h-5 w-5 mr-2"}),"Add Category"]})]}),a.jsxs("div",{className:"relative",children:[a.jsx(N,{className:"h-5 w-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Search categories...",value:e,onChange:e=>s(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:i.map(e=>a.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6 hover:shadow-lg transition-shadow",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center mb-3",children:[a.jsx("div",{className:"w-10 h-10 bg-indigo-100 rounded-lg flex items-center justify-center mr-3",children:a.jsx(Xe,{className:"h-5 w-5 text-indigo-600"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900",children:e.category_name||e.category||e.name}),a.jsx("div",{className:"flex items-center mt-1",children:0===e.disabled||void 0===e.disabled?a.jsx("span",{className:"px-2 py-0.5 bg-green-100 text-green-700 text-xs rounded",children:"Active"}):a.jsx("span",{className:"px-2 py-0.5 bg-red-100 text-red-700 text-xs rounded",children:"Disabled"})})]})]}),e.description&&a.jsx("div",{className:"mb-4",children:a.jsx("p",{className:"text-sm text-gray-600 line-clamp-3",children:e.description})}),a.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[a.jsx(Ee,{className:"h-4 w-4 mr-1"}),a.jsx("span",{className:"font-mono text-xs",children:e.name})]})]}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:a.jsx(Oe,{className:"h-4 w-4"})}),a.jsx("button",{className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:a.jsx(w,{className:"h-4 w-4"})})]})]})},e.name))}),0===i.length&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Xe,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"No student categories found."})]})]})},Bs=()=>{const[e,s]=H.useState(""),{data:r,isLoading:l,error:n}=t({queryKey:["guardians"],queryFn:async()=>{try{const e=await p.get("/frappe/Guardian");let s=[];return e.data&&e.data.data&&Array.isArray(e.data.data)?s=e.data.data:e.data&&Array.isArray(e.data)?s=e.data:e.data&&e.data.message&&(s=e.data.message),s||[]}catch(e){return[]}}}),d=r||[],i=d.filter(s=>(s.guardian_name||s.name||"")?.toLowerCase().includes(e.toLowerCase())||(s.email_address||"")?.toLowerCase().includes(e.toLowerCase())||(s.relation||"")?.toLowerCase().includes(e.toLowerCase())||(s.occupation||"")?.toLowerCase().includes(e.toLowerCase()));return l?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):n?a.jsx("div",{className:"text-center py-12",children:a.jsx("p",{className:"text-red-600",children:"Error loading guardians. Please try again."})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Guardians"}),a.jsxs("p",{className:"text-gray-600 mt-1",children:["Manage student guardians and parents (",d.length," total)"]})]}),a.jsxs("button",{className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center",children:[a.jsx(Ke,{className:"h-5 w-5 mr-2"}),"Add Guardian"]})]}),a.jsxs("div",{className:"relative",children:[a.jsx(N,{className:"h-5 w-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Search guardians...",value:e,onChange:e=>s(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:i.map(e=>a.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6 hover:shadow-lg transition-shadow",children:a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center mb-3",children:[a.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center mr-3",children:a.jsx(ss,{className:"h-5 w-5 text-blue-600"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900",children:e.guardian_name||"Unknown Guardian"}),a.jsxs("p",{className:"text-xs text-gray-500 mt-0.5",children:["ID: ",e.name]}),e.relation&&a.jsx("span",{className:"mt-1 inline-block px-2 py-0.5 bg-gray-100 text-gray-700 text-xs rounded",children:e.relation})]})]}),a.jsxs("div",{className:"space-y-2",children:[e.email_address&&a.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[a.jsx(re,{className:"h-4 w-4 mr-2 text-gray-400"}),a.jsx("span",{className:"truncate",children:e.email_address})]}),e.mobile_number&&a.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[a.jsx(le,{className:"h-4 w-4 mr-2 text-gray-400"}),a.jsx("span",{children:e.mobile_number})]}),e.occupation&&a.jsxs("div",{className:"text-sm text-gray-600",children:[a.jsx("span",{className:"font-medium",children:"Occupation:"})," ",e.occupation,e.organization&&a.jsxs("span",{className:"block text-xs text-gray-500 mt-1",children:["at ",e.organization]})]}),e.address&&a.jsxs("div",{className:"flex items-start text-sm text-gray-600",children:[a.jsx(K,{className:"h-4 w-4 mr-2 text-gray-400 flex-shrink-0 mt-0.5"}),a.jsx("span",{className:"text-xs line-clamp-2",children:e.address})]}),e.alternate_number&&a.jsxs("div",{className:"text-xs text-gray-500",children:["Alt: ",e.alternate_number]})]})]}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:a.jsx(Oe,{className:"h-4 w-4"})}),a.jsx("button",{className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:a.jsx(w,{className:"h-4 w-4"})})]})]})},e.name))}),0===i.length&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(ss,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"No guardians found."})]})]})},Os=()=>{const[e,s]=H.useState(""),{data:r,isLoading:l,error:n}=t({queryKey:["student-logs"],queryFn:async()=>{try{const e=await p.get("/frappe/Student Log");let s=[];return e.data&&e.data.data&&Array.isArray(e.data.data)?s=e.data.data:e.data&&Array.isArray(e.data)?s=e.data:e.data&&e.data.message&&(s=e.data.message),s||[]}catch(e){return[]}}}),d=r||[],i=d.filter(s=>(s.student_name||s.name||"")?.toLowerCase().includes(e.toLowerCase())||(s.student||"")?.toLowerCase().includes(e.toLowerCase())||(s.type||"")?.toLowerCase().includes(e.toLowerCase())||(s.log||"")?.toLowerCase().includes(e.toLowerCase()));if(l)return a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})});if(n)return a.jsx("div",{className:"text-center py-12",children:a.jsx("p",{className:"text-red-600",children:"Error loading student logs. Please try again."})});const c=e=>{switch(e?.toLowerCase()){case"achievement":return"bg-green-100 text-green-700";case"incident":return"bg-red-100 text-red-700";case"behavior":return"bg-yellow-100 text-yellow-700";case"academic":return"bg-blue-100 text-blue-700";case"attendance":return"bg-purple-100 text-purple-700";default:return"bg-gray-100 text-gray-700"}};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Student Logs"}),a.jsxs("p",{className:"text-gray-600 mt-1",children:["Track student activities and incidents (",d.length," total)"]})]}),a.jsxs("button",{className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center",children:[a.jsx(Ke,{className:"h-5 w-5 mr-2"}),"Add Log Entry"]})]}),a.jsxs("div",{className:"relative",children:[a.jsx(N,{className:"h-5 w-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Search logs...",value:e,onChange:e=>s(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsx("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:a.jsx("ul",{className:"divide-y divide-gray-200",children:i.map(e=>a.jsx("li",{children:a.jsx("div",{className:"px-4 py-4 sm:px-6 hover:bg-gray-50",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center mb-2",children:[a.jsx("div",{className:"flex-shrink-0 h-10 w-10 bg-indigo-100 rounded-full flex items-center justify-center mr-3",children:a.jsx(E,{className:"h-6 w-6 text-indigo-600"})}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("h3",{className:"text-sm font-medium text-gray-900",children:e.student_name||e.name||"Unknown Student"}),e.type&&a.jsx("span",{className:`ml-2 px-2 py-0.5 text-xs rounded ${c(e.type)}`,children:e.type})]}),a.jsxs("div",{className:"flex items-center space-x-4 mt-1",children:[e.date&&a.jsxs("div",{className:"flex items-center text-xs text-gray-500",children:[a.jsx(k,{className:"h-3 w-3 mr-1"}),new Date(e.date).toLocaleDateString()]}),e.time&&a.jsxs("div",{className:"flex items-center text-xs text-gray-500",children:[a.jsx(u,{className:"h-3 w-3 mr-1"}),e.time]}),e.student&&a.jsxs("div",{className:"flex items-center text-xs text-gray-500",children:[a.jsx(ss,{className:"h-3 w-3 mr-1"}),e.student]})]})]})]}),e.log&&a.jsx("div",{className:"ml-13 mb-2",children:a.jsx("p",{className:"text-sm text-gray-700 bg-gray-50 p-3 rounded-md",children:e.log})}),a.jsxs("div",{className:"ml-13 flex items-center space-x-4",children:[e.academic_year&&a.jsx("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-0.5 rounded",children:e.academic_year}),e.academic_term&&a.jsx("span",{className:"text-xs bg-gray-100 text-gray-700 px-2 py-0.5 rounded",children:e.academic_term})]})]}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:a.jsx(Oe,{className:"h-4 w-4"})}),a.jsx("button",{className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:a.jsx(w,{className:"h-4 w-4"})})]})]})})},e.name))})}),0===i.length&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(E,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"No student logs found."})]})]})},Us=()=>{const[e,s]=H.useState(""),[r,l]=H.useState(""),[n,d]=H.useState("all"),[i,c]=H.useState(""),[o,x]=H.useState(""),{data:h,isLoading:g,error:j}=t({queryKey:["student-attendance"],queryFn:async()=>{try{const e=await p.get("/frappe/Student Attendance");let s=[];return e.data&&e.data.data&&Array.isArray(e.data.data)?s=e.data.data:e.data&&Array.isArray(e.data)?s=e.data:e.data&&e.data.message&&(s=e.data.message),s||[]}catch(e){return[]}}}),y=h||[],b=y.filter(s=>{const t=""===e||s.student_name?.toLowerCase().includes(e.toLowerCase())||s.student?.toLowerCase().includes(e.toLowerCase())||s.status?.toLowerCase().includes(e.toLowerCase())||s.student_group?.toLowerCase().includes(e.toLowerCase());let a=!0;if(s.date){const e=new Date(s.date);if("single"===n&&r){const s=new Date(r);a=e.toDateString()===s.toDateString()}else if("range"===n&&i&&o){const s=new Date(i),t=new Date(o);t.setHours(23,59,59,999),a=e>=s&&e<=t}}return t&&a});if(g)return a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})});if(j)return a.jsx("div",{className:"text-center py-12",children:a.jsx("p",{className:"text-red-600",children:"Error loading student attendance. Please try again."})});const f=e=>{switch(e?.toLowerCase()){case"present":return a.jsx(m,{className:"h-5 w-5 text-green-600"});case"absent":return a.jsx(ls,{className:"h-5 w-5 text-red-600"});case"half day":return a.jsx(u,{className:"h-5 w-5 text-yellow-600"});default:return a.jsx(O,{className:"h-5 w-5 text-gray-600"})}},v=e=>{switch(e?.toLowerCase()){case"present":return"bg-green-100 text-green-700";case"absent":return"bg-red-100 text-red-700";case"half day":return"bg-yellow-100 text-yellow-700";default:return"bg-gray-100 text-gray-700"}};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Student Attendance"}),a.jsxs("p",{className:"text-gray-600 mt-1",children:["Track student attendance records",b.length!==y.length?a.jsxs("span",{children:[" (Showing ",b.length," of ",y.length,")"]}):a.jsxs("span",{children:[" (",y.length," total)"]})]})]}),a.jsxs("button",{className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center",children:[a.jsx(Ke,{className:"h-5 w-5 mr-2"}),"Mark Attendance"]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx(N,{className:"h-5 w-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Search attendance records...",value:e,onChange:e=>s(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(k,{className:"h-5 w-5 text-gray-500"}),a.jsxs("select",{value:n,onChange:e=>{d(e.target.value),l(""),c(""),x("")},className:"px-3 py-1.5 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"all",children:"All Dates"}),a.jsx("option",{value:"single",children:"Specific Date"}),a.jsx("option",{value:"range",children:"Date Range"})]})]}),"single"===n&&a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Date:"}),a.jsx("input",{type:"date",value:r,onChange:e=>l(e.target.value),className:"px-3 py-1.5 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),"range"===n&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700",children:"From:"}),a.jsx("input",{type:"date",value:i,onChange:e=>c(e.target.value),className:"px-3 py-1.5 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700",children:"To:"}),a.jsx("input",{type:"date",value:o,onChange:e=>x(e.target.value),min:i,className:"px-3 py-1.5 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),("all"!==n||e)&&a.jsxs("button",{onClick:()=>{d("all"),l(""),c(""),x(""),s("")},className:"px-3 py-1.5 bg-gray-100 text-gray-700 rounded-md text-sm hover:bg-gray-200 transition-colors flex items-center",children:[a.jsx(ls,{className:"h-4 w-4 mr-1"}),"Clear Filters"]})]}),a.jsxs("div",{className:"mt-3 flex flex-wrap gap-2",children:["single"===n&&r&&a.jsxs("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 rounded text-xs flex items-center",children:[a.jsx(k,{className:"h-3 w-3 mr-1"}),new Date(r).toLocaleDateString()]}),"range"===n&&i&&o&&a.jsxs("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 rounded text-xs flex items-center",children:[a.jsx(k,{className:"h-3 w-3 mr-1"}),new Date(i).toLocaleDateString()," - ",new Date(o).toLocaleDateString()]}),e&&a.jsxs("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 rounded text-xs flex items-center",children:[a.jsx(N,{className:"h-3 w-3 mr-1"}),'"',e,'"']})]})]})]}),a.jsx("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:a.jsx("ul",{className:"divide-y divide-gray-200",children:b.map(e=>a.jsx("li",{children:a.jsx("div",{className:"px-4 py-4 sm:px-6 hover:bg-gray-50",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0 h-10 w-10 bg-blue-100 rounded-full flex items-center justify-center",children:f(e.status)}),a.jsxs("div",{className:"ml-4",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("p",{className:"text-sm font-medium text-gray-900",children:e.student_name}),a.jsx("span",{className:`ml-2 px-2 py-0.5 text-xs rounded ${v(e.status)}`,children:e.status}),1===e.late&&a.jsx("span",{className:"ml-2 px-2 py-0.5 text-xs bg-orange-100 text-orange-700 rounded",children:"Late"})]}),a.jsxs("div",{className:"flex items-center space-x-4 mt-1",children:[e.date&&a.jsxs("div",{className:"flex items-center text-xs text-gray-500",children:[a.jsx(k,{className:"h-3 w-3 mr-1"}),new Date(e.date).toLocaleDateString()]}),e.student&&a.jsxs("div",{className:"flex items-center text-xs text-gray-500",children:[a.jsx(ss,{className:"h-3 w-3 mr-1"}),e.student]}),e.student_group&&a.jsx("span",{className:"text-xs bg-gray-100 text-gray-700 px-2 py-0.5 rounded",children:e.student_group})]}),e.excuse&&a.jsx("div",{className:"mt-2",children:a.jsxs("p",{className:"text-xs text-gray-600 italic",children:["Excuse: ",e.excuse]})}),e.leave_application&&a.jsx("div",{className:"mt-1",children:a.jsxs("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-0.5 rounded",children:["Leave App: ",e.leave_application]})})]})]}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:a.jsx(Oe,{className:"h-4 w-4"})}),a.jsx("button",{className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:a.jsx(w,{className:"h-4 w-4"})})]})]})})},e.name))})}),0===b.length&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(O,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"No attendance records found."})]})]})},$s=()=>{const[e,s]=H.useState(""),{data:r,isLoading:l,error:n}=t({queryKey:["attendance-tools"],queryFn:async()=>(await p.get("/frappe/Attendance Tool")).data.data||[]}),d=r||[],i=d.filter(s=>s.student_group?.toLowerCase().includes(e.toLowerCase())||s.instructor?.toLowerCase().includes(e.toLowerCase())||s.course_schedule?.toLowerCase().includes(e.toLowerCase())||s.status?.toLowerCase().includes(e.toLowerCase()));if(l)return a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})});if(n)return a.jsx("div",{className:"text-center py-12",children:a.jsx("p",{className:"text-red-600",children:"Error loading attendance tools. Please try again."})});const c=e=>{switch(e?.toLowerCase()){case"draft":return"bg-yellow-100 text-yellow-700";case"submitted":return"bg-green-100 text-green-700";case"cancelled":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},x=(e,s)=>s&&0!==s?Math.round(e/s*100):0;return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Attendance Tools"}),a.jsxs("p",{className:"text-gray-600 mt-1",children:["Manage attendance marking sessions (",d.length," total)"]})]}),a.jsxs("button",{className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center",children:[a.jsx(Ke,{className:"h-5 w-5 mr-2"}),"Create Attendance Session"]})]}),a.jsxs("div",{className:"relative",children:[a.jsx(N,{className:"h-5 w-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Search attendance tools...",value:e,onChange:e=>s(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:i.map(e=>a.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6 hover:shadow-lg transition-shadow",children:a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center mb-3",children:[a.jsx("div",{className:"w-10 h-10 bg-indigo-100 rounded-lg flex items-center justify-center mr-3",children:a.jsx(L,{className:"h-5 w-5 text-indigo-600"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900",children:e.student_group}),a.jsx("div",{className:"flex items-center mt-1",children:a.jsx("span",{className:`px-2 py-0.5 text-xs rounded ${c(e.status)}`,children:e.status})})]})]}),a.jsxs("div",{className:"space-y-2",children:[e.date&&a.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[a.jsx(k,{className:"h-4 w-4 mr-2 text-gray-400"}),a.jsx("span",{children:new Date(e.date).toLocaleDateString()})]}),e.instructor&&a.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[a.jsx(o,{className:"h-4 w-4 mr-2 text-gray-400"}),a.jsx("span",{className:"truncate",children:e.instructor})]}),(e.from_time||e.to_time)&&a.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[a.jsx(u,{className:"h-4 w-4 mr-2 text-gray-400"}),a.jsx("span",{children:e.from_time&&e.to_time?`${e.from_time} - ${e.to_time}`:e.from_time||e.to_time})]}),e.course_schedule&&a.jsxs("div",{className:"text-sm text-gray-600",children:[a.jsx("span",{className:"font-medium",children:"Schedule:"}),a.jsx("span",{className:"block text-xs text-gray-500 mt-1",children:e.course_schedule})]}),e.total_students>0&&a.jsxs("div",{className:"mt-3 p-3 bg-gray-50 rounded-lg",children:[a.jsxs("div",{className:"flex justify-between items-center text-sm",children:[a.jsx("span",{className:"text-gray-600",children:"Attendance"}),a.jsxs("span",{className:"font-medium text-gray-900",children:[x(e.total_present,e.total_students),"%"]})]}),a.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:["Present: ",e.total_present||0," | Absent: ",e.total_absent||0," | Total: ",e.total_students]}),a.jsx("div",{className:"mt-2 w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:`${x(e.total_present,e.total_students)}%`}})})]})]})]}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:a.jsx(Oe,{className:"h-4 w-4"})}),a.jsx("button",{className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:a.jsx(w,{className:"h-4 w-4"})})]})]})},e.name))}),0===i.length&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(L,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"No attendance tools found."})]})]})},Ts=()=>{const[e,s]=H.useState(""),{data:r,isLoading:l,error:n}=t({queryKey:["leave-applications"],queryFn:async()=>(await p.get("/frappe/Leave Application")).data.data||[]}),d=r||[],i=d.filter(s=>s.student_name?.toLowerCase().includes(e.toLowerCase())||s.student?.toLowerCase().includes(e.toLowerCase())||s.leave_type?.toLowerCase().includes(e.toLowerCase())||s.status?.toLowerCase().includes(e.toLowerCase())||s.reason?.toLowerCase().includes(e.toLowerCase()));if(l)return a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})});if(n)return a.jsx("div",{className:"text-center py-12",children:a.jsx("p",{className:"text-red-600",children:"Error loading leave applications. Please try again."})});const c=e=>{switch(e?.toLowerCase()){case"approved":return a.jsx(m,{className:"h-5 w-5 text-green-600"});case"rejected":return a.jsx(ls,{className:"h-5 w-5 text-red-600"});case"open":case"pending":return a.jsx(u,{className:"h-5 w-5 text-yellow-600"});default:return a.jsx(E,{className:"h-5 w-5 text-gray-600"})}},o=e=>{switch(e?.toLowerCase()){case"approved":return"bg-green-100 text-green-700";case"rejected":return"bg-red-100 text-red-700";case"open":case"pending":return"bg-yellow-100 text-yellow-700";default:return"bg-gray-100 text-gray-700"}},x=e=>{switch(e?.toLowerCase()){case"sick leave":return"bg-red-100 text-red-700";case"casual leave":return"bg-blue-100 text-blue-700";case"medical leave":return"bg-purple-100 text-purple-700";case"emergency leave":return"bg-orange-100 text-orange-700";default:return"bg-gray-100 text-gray-700"}};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Leave Applications"}),a.jsxs("p",{className:"text-gray-600 mt-1",children:["Manage student leave requests (",d.length," total)"]})]}),a.jsxs("button",{className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center",children:[a.jsx(Ke,{className:"h-5 w-5 mr-2"}),"New Leave Application"]})]}),a.jsxs("div",{className:"relative",children:[a.jsx(N,{className:"h-5 w-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Search leave applications...",value:e,onChange:e=>s(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsx("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:a.jsx("ul",{className:"divide-y divide-gray-200",children:i.map(e=>a.jsx("li",{children:a.jsx("div",{className:"px-4 py-4 sm:px-6 hover:bg-gray-50",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center mb-2",children:[a.jsx("div",{className:"flex-shrink-0 h-10 w-10 bg-indigo-100 rounded-full flex items-center justify-center mr-3",children:c(e.status)}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("h3",{className:"text-sm font-medium text-gray-900",children:e.student_name}),a.jsx("span",{className:`ml-2 px-2 py-0.5 text-xs rounded ${o(e.status)}`,children:e.status}),e.leave_type&&a.jsx("span",{className:`ml-2 px-2 py-0.5 text-xs rounded ${x(e.leave_type)}`,children:e.leave_type})]}),a.jsxs("div",{className:"flex items-center space-x-4 mt-1",children:[e.from_date&&e.to_date&&a.jsxs("div",{className:"flex items-center text-xs text-gray-500",children:[a.jsx(k,{className:"h-3 w-3 mr-1"}),new Date(e.from_date).toLocaleDateString()," - ",new Date(e.to_date).toLocaleDateString()]}),e.total_leave_days&&a.jsxs("div",{className:"flex items-center text-xs text-gray-500",children:[a.jsx(u,{className:"h-3 w-3 mr-1"}),e.total_leave_days," days"]}),e.student&&a.jsxs("div",{className:"flex items-center text-xs text-gray-500",children:[a.jsx(ss,{className:"h-3 w-3 mr-1"}),e.student]})]})]})]}),e.reason&&a.jsx("div",{className:"ml-13 mb-2",children:a.jsxs("p",{className:"text-sm text-gray-700 bg-gray-50 p-3 rounded-md",children:[a.jsx("span",{className:"font-medium",children:"Reason:"})," ",e.reason]})}),a.jsxs("div",{className:"ml-13 flex items-center space-x-4 text-xs text-gray-500",children:[e.posting_date&&a.jsxs("span",{children:["Applied: ",new Date(e.posting_date).toLocaleDateString()]}),e.leave_approver&&a.jsxs("span",{children:["Approver: ",e.leave_approver]}),e.attachment&&a.jsx("span",{className:"text-blue-600",children:"📎 Attachment"})]})]}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:a.jsx(Oe,{className:"h-4 w-4"})}),a.jsx("button",{className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:a.jsx(w,{className:"h-4 w-4"})})]})]})})},e.name))})}),0===i.length&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(E,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"No leave applications found."})]})]})},Ks=()=>{const[e,s]=H.useState(""),{data:r,isLoading:l,error:n}=t({queryKey:["assessment-plans"],queryFn:async()=>(await p.get("/frappe/Assessment Plan")).data.data||[]}),d=r||[],i=d.filter(s=>s.assessment_name?.toLowerCase().includes(e.toLowerCase())||s.program?.toLowerCase().includes(e.toLowerCase())||s.course?.toLowerCase().includes(e.toLowerCase())||s.assessment_group?.toLowerCase().includes(e.toLowerCase())||s.examiner?.toLowerCase().includes(e.toLowerCase()));return l?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):n?a.jsx("div",{className:"text-center py-12",children:a.jsx("p",{className:"text-red-600",children:"Error loading assessment plans. Please try again."})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Assessment Plans"}),a.jsxs("p",{className:"text-gray-600 mt-1",children:["Manage assessment schedules and plans (",d.length," total)"]})]}),a.jsxs("button",{className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center",children:[a.jsx(Ke,{className:"h-5 w-5 mr-2"}),"Create Assessment Plan"]})]}),a.jsxs("div",{className:"relative",children:[a.jsx(N,{className:"h-5 w-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Search assessment plans...",value:e,onChange:e=>s(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:i.map(e=>a.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6 hover:shadow-lg transition-shadow",children:a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center mb-3",children:[a.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center mr-3",children:a.jsx(O,{className:"h-5 w-5 text-green-600"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900",children:e.assessment_name}),a.jsx("div",{className:"flex items-center mt-1",children:0===e.disabled?a.jsx("span",{className:"px-2 py-0.5 bg-green-100 text-green-700 text-xs rounded",children:"Active"}):a.jsx("span",{className:"px-2 py-0.5 bg-red-100 text-red-700 text-xs rounded",children:"Disabled"})})]})]}),a.jsxs("div",{className:"space-y-2",children:[e.program&&a.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[a.jsx(y,{className:"h-4 w-4 mr-2 text-gray-400"}),a.jsx("span",{children:e.program})]}),e.course&&a.jsxs("div",{className:"text-sm text-gray-600",children:[a.jsx("span",{className:"font-medium",children:"Course:"})," ",e.course]}),e.assessment_group&&a.jsxs("div",{className:"text-sm text-gray-600",children:[a.jsx("span",{className:"font-medium",children:"Group:"})," ",e.assessment_group]}),e.schedule_date&&a.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[a.jsx(k,{className:"h-4 w-4 mr-2 text-gray-400"}),a.jsx("span",{children:new Date(e.schedule_date).toLocaleDateString()}),(e.from_time||e.to_time)&&a.jsxs("span",{className:"ml-2 flex items-center",children:[a.jsx(u,{className:"h-3 w-3 mr-1"}),e.from_time&&e.to_time?`${e.from_time} - ${e.to_time}`:e.from_time||e.to_time]})]}),e.room&&a.jsxs("div",{className:"text-sm text-gray-600",children:[a.jsx("span",{className:"font-medium",children:"Room:"})," ",e.room]}),e.examiner&&a.jsxs("div",{className:"text-sm text-gray-600",children:[a.jsx("span",{className:"font-medium",children:"Examiner:"})," ",e.examiner]}),e.supervisor&&a.jsxs("div",{className:"text-sm text-gray-600",children:[a.jsx("span",{className:"font-medium",children:"Supervisor:"})," ",e.supervisor]}),a.jsxs("div",{className:"mt-3 p-3 bg-gray-50 rounded-lg",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.maximum_assessment_score&&a.jsxs("div",{children:[a.jsx("span",{className:"font-medium text-gray-700",children:"Max Score:"}),a.jsx("span",{className:"block text-gray-600",children:e.maximum_assessment_score})]}),e.grading_scale&&a.jsxs("div",{children:[a.jsx("span",{className:"font-medium text-gray-700",children:"Grading Scale:"}),a.jsx("span",{className:"block text-gray-600 text-xs",children:e.grading_scale})]})]}),e.assessment_criteria&&a.jsxs("div",{className:"mt-2",children:[a.jsx("span",{className:"font-medium text-gray-700 text-sm",children:"Criteria:"}),a.jsx("span",{className:"block text-gray-600 text-xs",children:e.assessment_criteria})]})]})]})]}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:a.jsx(Oe,{className:"h-4 w-4"})}),a.jsx("button",{className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:a.jsx(w,{className:"h-4 w-4"})})]})]})},e.name))}),0===i.length&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(O,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"No assessment plans found."})]})]})},Gs=()=>{const[e,s]=H.useState(""),{data:r,isLoading:l,error:n}=t({queryKey:["assessment-groups"],queryFn:async()=>(await p.get("/frappe/Assessment Group")).data.data||[]}),d=r||[],i=d.filter(s=>s.assessment_group_name?.toLowerCase().includes(e.toLowerCase())||s.description?.toLowerCase().includes(e.toLowerCase())||s.parent_assessment_group?.toLowerCase().includes(e.toLowerCase()));return l?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):n?a.jsx("div",{className:"text-center py-12",children:a.jsx("p",{className:"text-red-600",children:"Error loading assessment groups. Please try again."})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Assessment Groups"}),a.jsxs("p",{className:"text-gray-600 mt-1",children:["Manage assessment group categories (",d.length," total)"]})]}),a.jsxs("button",{className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center",children:[a.jsx(Ke,{className:"h-5 w-5 mr-2"}),"Add Assessment Group"]})]}),a.jsxs("div",{className:"relative",children:[a.jsx(N,{className:"h-5 w-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Search assessment groups...",value:e,onChange:e=>s(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:i.map(e=>a.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6 hover:shadow-lg transition-shadow",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center mb-3",children:[a.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center mr-3",children:a.jsx(o,{className:"h-5 w-5 text-purple-600"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900",children:e.assessment_group_name}),a.jsxs("div",{className:"flex items-center mt-1 space-x-2",children:[0===e.disabled?a.jsx("span",{className:"px-2 py-0.5 bg-green-100 text-green-700 text-xs rounded",children:"Active"}):a.jsx("span",{className:"px-2 py-0.5 bg-red-100 text-red-700 text-xs rounded",children:"Disabled"}),1===e.is_group&&a.jsx("span",{className:"px-2 py-0.5 bg-blue-100 text-blue-700 text-xs rounded",children:"Group"})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[e.description&&a.jsx("div",{className:"text-sm text-gray-600",children:a.jsx("p",{className:"line-clamp-2",children:e.description})}),e.parent_assessment_group&&a.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[a.jsx(y,{className:"h-4 w-4 mr-2 text-gray-400"}),a.jsxs("span",{className:"truncate",children:["Parent: ",e.parent_assessment_group]})]}),e.weightage&&a.jsxs("div",{className:"text-sm text-gray-600",children:[a.jsx("span",{className:"font-medium",children:"Weightage:"})," ",e.weightage,"%"]}),a.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[a.jsx(Ee,{className:"h-4 w-4 mr-1"}),a.jsx("span",{className:"font-mono text-xs",children:e.name})]})]})]}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:a.jsx(Oe,{className:"h-4 w-4"})}),a.jsx("button",{className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:a.jsx(w,{className:"h-4 w-4"})})]})]})},e.name))}),0===i.length&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(o,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"No assessment groups found."})]})]})},Ws=()=>{const[e,s]=H.useState(""),{data:r,isLoading:l,error:n}=t({queryKey:["assessment-results"],queryFn:async()=>(await p.get("/frappe/Assessment Result")).data.data||[]}),d=r||[],i=d.filter(s=>s.student_name?.toLowerCase().includes(e.toLowerCase())||s.student?.toLowerCase().includes(e.toLowerCase())||s.course?.toLowerCase().includes(e.toLowerCase())||s.assessment_plan?.toLowerCase().includes(e.toLowerCase())||s.grade?.toLowerCase().includes(e.toLowerCase()));if(l)return a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})});if(n)return a.jsx("div",{className:"text-center py-12",children:a.jsx("p",{className:"text-red-600",children:"Error loading assessment results. Please try again."})});const o=e=>{switch(e?.toUpperCase()){case"A+":case"A":return"bg-green-100 text-green-700";case"B+":case"B":return"bg-blue-100 text-blue-700";case"C+":case"C":return"bg-yellow-100 text-yellow-700";case"D":case"F":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},x=(e,s)=>s&&0!==s?Math.round(e/s*100):0,m=e=>{switch(e){case 1:return"bg-green-100 text-green-700";case 0:return"bg-yellow-100 text-yellow-700";case 2:return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},u=e=>{switch(e){case 1:return"Submitted";case 0:return"Draft";case 2:return"Cancelled";default:return"Unknown"}};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Assessment Results"}),a.jsxs("p",{className:"text-gray-600 mt-1",children:["View and manage student assessment results (",d.length," total)"]})]}),a.jsxs("button",{className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center",children:[a.jsx(Ke,{className:"h-5 w-5 mr-2"}),"Add Result"]})]}),a.jsxs("div",{className:"relative",children:[a.jsx(N,{className:"h-5 w-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Search assessment results...",value:e,onChange:e=>s(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsx("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:a.jsx("ul",{className:"divide-y divide-gray-200",children:i.map(e=>a.jsx("li",{children:a.jsx("div",{className:"px-4 py-4 sm:px-6 hover:bg-gray-50",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center flex-1",children:[a.jsx("div",{className:"flex-shrink-0 h-12 w-12 bg-indigo-100 rounded-full flex items-center justify-center",children:a.jsx(c,{className:"h-6 w-6 text-indigo-600"})}),a.jsxs("div",{className:"ml-4 flex-1",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("h3",{className:"text-sm font-medium text-gray-900",children:e.student_name}),e.grade&&a.jsx("span",{className:`ml-2 px-2 py-0.5 text-xs rounded font-semibold ${o(e.grade)}`,children:e.grade}),a.jsx("span",{className:`ml-2 px-2 py-0.5 text-xs rounded ${m(e.docstatus)}`,children:u(e.docstatus)})]}),a.jsxs("div",{className:"flex items-center space-x-4 mt-1",children:[e.student&&a.jsxs("div",{className:"flex items-center text-xs text-gray-500",children:[a.jsx(ss,{className:"h-3 w-3 mr-1"}),e.student]}),e.course&&a.jsxs("div",{className:"flex items-center text-xs text-gray-500",children:[a.jsx(y,{className:"h-3 w-3 mr-1"}),e.course]}),e.creation&&a.jsxs("div",{className:"flex items-center text-xs text-gray-500",children:[a.jsx(k,{className:"h-3 w-3 mr-1"}),new Date(e.creation).toLocaleDateString()]})]}),a.jsxs("div",{className:"mt-2",children:[a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsx("span",{className:"text-gray-600",children:"Score"}),a.jsxs("span",{className:"font-medium text-gray-900",children:[e.result||0,"/",e.maximum_score||0," (",x(e.result,e.maximum_score),"%)"]})]}),a.jsx("div",{className:"mt-1 w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:`${x(e.result,e.maximum_score)}%`}})})]}),a.jsxs("div",{className:"flex items-center space-x-4 mt-2",children:[e.assessment_plan&&a.jsx("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-0.5 rounded",children:e.assessment_plan}),e.assessment_group&&a.jsx("span",{className:"text-xs bg-gray-100 text-gray-700 px-2 py-0.5 rounded",children:e.assessment_group})]}),e.comment&&a.jsx("div",{className:"mt-2",children:a.jsx("p",{className:"text-xs text-gray-600 italic bg-gray-50 p-2 rounded",children:e.comment})})]})]}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:a.jsx(Oe,{className:"h-4 w-4"})}),a.jsx("button",{className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:a.jsx(w,{className:"h-4 w-4"})})]})]})})},e.name))})}),0===i.length&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(c,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"No assessment results found."})]})]})},Vs=()=>{const[e,s]=H.useState(""),{data:r,isLoading:l,error:n}=t({queryKey:["assessment-criteria"],queryFn:async()=>(await p.get("/frappe/Assessment Criteria")).data.data||[]}),d=r||[],i=d.filter(s=>s.criteria_name?.toLowerCase().includes(e.toLowerCase())||s.description?.toLowerCase().includes(e.toLowerCase())||s.assessment_criteria_group?.toLowerCase().includes(e.toLowerCase()));return l?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):n?a.jsx("div",{className:"text-center py-12",children:a.jsx("p",{className:"text-red-600",children:"Error loading assessment criteria. Please try again."})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Assessment Criteria"}),a.jsxs("p",{className:"text-gray-600 mt-1",children:["Manage assessment evaluation criteria (",d.length," total)"]})]}),a.jsxs("button",{className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center",children:[a.jsx(Ke,{className:"h-5 w-5 mr-2"}),"Add Criteria"]})]}),a.jsxs("div",{className:"relative",children:[a.jsx(N,{className:"h-5 w-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Search assessment criteria...",value:e,onChange:e=>s(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:i.map(e=>a.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6 hover:shadow-lg transition-shadow",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center mb-3",children:[a.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center mr-3",children:a.jsx(m,{className:"h-5 w-5 text-green-600"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900",children:e.criteria_name}),a.jsx("div",{className:"flex items-center mt-1",children:0===e.disabled?a.jsx("span",{className:"px-2 py-0.5 bg-green-100 text-green-700 text-xs rounded",children:"Active"}):a.jsx("span",{className:"px-2 py-0.5 bg-red-100 text-red-700 text-xs rounded",children:"Disabled"})})]})]}),a.jsxs("div",{className:"space-y-2",children:[e.description&&a.jsx("div",{className:"text-sm text-gray-600",children:a.jsx("p",{className:"line-clamp-3",children:e.description})}),e.assessment_criteria_group&&a.jsxs("div",{className:"text-sm text-gray-600",children:[a.jsx("span",{className:"font-medium",children:"Group:"})," ",e.assessment_criteria_group]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-3",children:[e.weightage&&a.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[a.jsx(Ye,{className:"h-4 w-4 mr-1 text-yellow-500"}),a.jsxs("span",{children:[e.weightage,"% weight"]})]}),e.maximum_score&&a.jsxs("div",{className:"text-sm text-gray-600",children:[a.jsx("span",{className:"font-medium",children:"Max Score:"})," ",e.maximum_score]})]}),a.jsxs("div",{className:"flex items-center text-sm text-gray-500 mt-2",children:[a.jsx(Ee,{className:"h-4 w-4 mr-1"}),a.jsx("span",{className:"font-mono text-xs",children:e.name})]})]})]}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:a.jsx(Oe,{className:"h-4 w-4"})}),a.jsx("button",{className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:a.jsx(w,{className:"h-4 w-4"})})]})]})},e.name))}),0===i.length&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(m,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"No assessment criteria found."})]})]})},Hs=()=>{const[e,s]=H.useState(""),{data:r,isLoading:l,error:n}=t({queryKey:["grading-scales"],queryFn:async()=>(await p.get("/frappe/Grading Scale")).data.data||[]}),d=r||[],i=d.filter(s=>s.grading_scale_name?.toLowerCase().includes(e.toLowerCase())||s.description?.toLowerCase().includes(e.toLowerCase()));return l?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):n?a.jsx("div",{className:"text-center py-12",children:a.jsx("p",{className:"text-red-600",children:"Error loading grading scales. Please try again."})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Grading Scales"}),a.jsxs("p",{className:"text-gray-600 mt-1",children:["Manage grading and marking scales (",d.length," total)"]})]}),a.jsxs("button",{className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center",children:[a.jsx(Ke,{className:"h-5 w-5 mr-2"}),"Add Grading Scale"]})]}),a.jsxs("div",{className:"relative",children:[a.jsx(N,{className:"h-5 w-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Search grading scales...",value:e,onChange:e=>s(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:i.map(e=>a.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6 hover:shadow-lg transition-shadow",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center mb-3",children:[a.jsx("div",{className:"w-10 h-10 bg-yellow-100 rounded-lg flex items-center justify-center mr-3",children:a.jsx(ze,{className:"h-5 w-5 text-yellow-600"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900",children:e.grading_scale_name}),a.jsx("div",{className:"flex items-center mt-1",children:0===e.disabled?a.jsx("span",{className:"px-2 py-0.5 bg-green-100 text-green-700 text-xs rounded",children:"Active"}):a.jsx("span",{className:"px-2 py-0.5 bg-red-100 text-red-700 text-xs rounded",children:"Disabled"})})]})]}),a.jsxs("div",{className:"space-y-2",children:[e.description&&a.jsx("div",{className:"text-sm text-gray-600",children:a.jsx("p",{className:"line-clamp-3",children:e.description})}),a.jsxs("div",{className:"flex items-center text-sm text-gray-500 mt-3",children:[a.jsx(Ee,{className:"h-4 w-4 mr-1"}),a.jsx("span",{className:"font-mono text-xs",children:e.name})]})]})]}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:a.jsx(Oe,{className:"h-4 w-4"})}),a.jsx("button",{className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:a.jsx(w,{className:"h-4 w-4"})})]})]})},e.name))}),0===i.length&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(ze,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"No grading scales found."})]})]})},Qs=()=>{const[e,s]=H.useState(""),{data:r,isLoading:l,error:n}=t({queryKey:["fee-categories"],queryFn:async()=>{try{const e=await p.get("/frappe/Fee Category");let s=[];return e.data&&e.data.data&&Array.isArray(e.data.data)?s=e.data.data:e.data&&Array.isArray(e.data)?s=e.data:e.data&&e.data.message&&(s=e.data.message),s||[]}catch(e){return[]}}}),d=r||[],i=d.filter(s=>(s.category_name||s.name||"")?.toLowerCase().includes(e.toLowerCase())||(s.description||"")?.toLowerCase().includes(e.toLowerCase()));return l?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):n?a.jsx("div",{className:"text-center py-12",children:a.jsx("p",{className:"text-red-600",children:"Error loading fee categories. Please try again."})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Fee Categories"}),a.jsxs("p",{className:"text-gray-600 mt-1",children:["Manage fee classification categories (",d.length," total)"]})]}),a.jsxs("button",{className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center",children:[a.jsx(Ke,{className:"h-5 w-5 mr-2"}),"Add Fee Category"]})]}),a.jsxs("div",{className:"relative",children:[a.jsx(N,{className:"h-5 w-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Search fee categories...",value:e,onChange:e=>s(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:i.map(e=>a.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6 hover:shadow-lg transition-shadow",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center mb-3",children:[a.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center mr-3",children:a.jsx(Xe,{className:"h-5 w-5 text-green-600"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900",children:e.category_name||e.name}),a.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[0===e.disabled||void 0===e.disabled?a.jsx("span",{className:"px-2 py-0.5 bg-green-100 text-green-700 text-xs rounded",children:"Active"}):a.jsx("span",{className:"px-2 py-0.5 bg-red-100 text-red-700 text-xs rounded",children:"Disabled"}),1===e.is_refundable&&a.jsx("span",{className:"px-2 py-0.5 bg-blue-100 text-blue-700 text-xs rounded",children:"Refundable"})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[e.description&&a.jsx("div",{className:"text-sm text-gray-600",children:a.jsx("p",{className:"line-clamp-3",children:e.description})}),a.jsxs("div",{className:"flex items-center text-sm text-gray-500 mt-3",children:[a.jsx(Ee,{className:"h-4 w-4 mr-1"}),a.jsx("span",{className:"font-mono text-xs",children:e.name})]})]})]}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:a.jsx(Oe,{className:"h-4 w-4"})}),a.jsx("button",{className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:a.jsx(w,{className:"h-4 w-4"})})]})]})},e.name))}),0===i.length&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Xe,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"No fee categories found."})]})]})},zs=()=>{const[e,s]=H.useState(""),{data:r,isLoading:l,error:n}=t({queryKey:["fee-structures"],queryFn:async()=>{try{const e=await p.get("/frappe/Fee Structure");let s=[];return e.data&&e.data.data&&Array.isArray(e.data.data)?s=e.data.data:e.data&&Array.isArray(e.data)?s=e.data:e.data&&e.data.message&&(s=e.data.message),s||[]}catch(e){return[]}}}),d=r||[],i=d.filter(s=>(s.fee_structure_name||s.name||"")?.toLowerCase().includes(e.toLowerCase())||(s.program||"")?.toLowerCase().includes(e.toLowerCase())||(s.academic_year||"")?.toLowerCase().includes(e.toLowerCase())||(s.academic_term||"")?.toLowerCase().includes(e.toLowerCase()));if(l)return a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})});if(n)return a.jsx("div",{className:"text-center py-12",children:a.jsx("p",{className:"text-red-600",children:"Error loading fee structures. Please try again."})});return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Fee Structures"}),a.jsxs("p",{className:"text-gray-600 mt-1",children:["Manage program fee structures and amounts (",d.length," total)"]})]}),a.jsxs("button",{className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center",children:[a.jsx(Ke,{className:"h-5 w-5 mr-2"}),"Create Fee Structure"]})]}),a.jsxs("div",{className:"relative",children:[a.jsx(N,{className:"h-5 w-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Search fee structures...",value:e,onChange:e=>s(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:i.map(e=>{return a.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6 hover:shadow-lg transition-shadow",children:a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center mb-3",children:[a.jsx("div",{className:"w-10 h-10 bg-indigo-100 rounded-lg flex items-center justify-center mr-3",children:a.jsx(G,{className:"h-5 w-5 text-indigo-600"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900",children:e.fee_structure_name||e.program||"Fee Structure"}),a.jsxs("p",{className:"text-xs text-gray-500 mt-0.5",children:["ID: ",e.name]}),a.jsx("div",{className:"flex items-center mt-1",children:0===e.disabled||void 0===e.disabled?a.jsx("span",{className:"px-2 py-0.5 bg-green-100 text-green-700 text-xs rounded",children:"Active"}):a.jsx("span",{className:"px-2 py-0.5 bg-red-100 text-red-700 text-xs rounded",children:"Disabled"})})]})]}),a.jsxs("div",{className:"space-y-3",children:[e.program&&a.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[a.jsx(y,{className:"h-4 w-4 mr-2 text-gray-400"}),a.jsx("span",{children:e.program})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.academic_year&&a.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[a.jsx(k,{className:"h-4 w-4 mr-2 text-gray-400"}),a.jsx("span",{children:e.academic_year})]}),e.academic_term&&a.jsxs("div",{className:"text-sm text-gray-600",children:[a.jsx("span",{className:"font-medium",children:"Term:"})," ",e.academic_term]})]}),e.total_amount&&a.jsxs("div",{className:"flex items-center text-lg font-semibold text-green-600 bg-green-50 p-3 rounded-lg",children:[a.jsx("span",{className:"text-green-600 font-bold mr-2",children:"₹"}),a.jsx("span",{children:(s=e.total_amount,new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(s||0))})]}),a.jsxs("div",{className:"grid grid-cols-1 gap-2 text-sm",children:[e.receivable_account&&a.jsxs("div",{className:"text-gray-600",children:[a.jsx("span",{className:"font-medium",children:"Receivable:"}),a.jsx("span",{className:"block text-xs text-gray-500 mt-1",children:e.receivable_account})]}),e.income_account&&a.jsxs("div",{className:"text-gray-600",children:[a.jsx("span",{className:"font-medium",children:"Income:"}),a.jsx("span",{className:"block text-xs text-gray-500 mt-1",children:e.income_account})]})]}),e.company&&a.jsxs("div",{className:"text-sm text-gray-600",children:[a.jsx("span",{className:"font-medium",children:"Company:"})," ",e.company]})]})]}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:a.jsx(Oe,{className:"h-4 w-4"})}),a.jsx("button",{className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:a.jsx(w,{className:"h-4 w-4"})})]})]})},e.name);var s})}),0===i.length&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(G,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"No fee structures found."})]})]})},Zs=()=>{const[e,s]=H.useState(""),{data:r,isLoading:l,error:n}=t({queryKey:["fees"],queryFn:async()=>(await p.get("/frappe/Fees")).data.data||[]}),d=r||[],i=d.filter(s=>s.student_name?.toLowerCase().includes(e.toLowerCase())||s.student?.toLowerCase().includes(e.toLowerCase())||s.program?.toLowerCase().includes(e.toLowerCase())||s.status?.toLowerCase().includes(e.toLowerCase())||s.fee_structure?.toLowerCase().includes(e.toLowerCase()));if(l)return a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})});if(n)return a.jsx("div",{className:"text-center py-12",children:a.jsx("p",{className:"text-red-600",children:"Error loading fees. Please try again."})});const c=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(e||0),o=e=>{switch(e?.toLowerCase()){case"paid":return a.jsx(m,{className:"h-5 w-5 text-green-600"});case"unpaid":case"pending":return a.jsx(u,{className:"h-5 w-5 text-yellow-600"});case"overdue":return a.jsx(ls,{className:"h-5 w-5 text-red-600"});default:return a.jsx($,{className:"h-5 w-5 text-gray-600"})}},x=e=>{switch(e?.toLowerCase()){case"paid":return"bg-green-100 text-green-700";case"unpaid":case"pending":return"bg-yellow-100 text-yellow-700";case"overdue":return"bg-red-100 text-red-700";case"partially paid":return"bg-blue-100 text-blue-700";default:return"bg-gray-100 text-gray-700"}},h=(e,s)=>s&&0!==s?Math.round(e/s*100):0;return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Student Fees"}),a.jsxs("p",{className:"text-gray-600 mt-1",children:["Manage student fee payments and records (",d.length," total)"]})]}),a.jsxs("button",{className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center",children:[a.jsx(Ke,{className:"h-5 w-5 mr-2"}),"Create Fee Record"]})]}),a.jsxs("div",{className:"relative",children:[a.jsx(N,{className:"h-5 w-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Search fees...",value:e,onChange:e=>s(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsx("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:a.jsx("ul",{className:"divide-y divide-gray-200",children:i.map(e=>a.jsx("li",{children:a.jsx("div",{className:"px-4 py-4 sm:px-6 hover:bg-gray-50",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center flex-1",children:[a.jsx("div",{className:"flex-shrink-0 h-12 w-12 bg-green-100 rounded-full flex items-center justify-center",children:o(e.status)}),a.jsxs("div",{className:"ml-4 flex-1",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("h3",{className:"text-sm font-medium text-gray-900",children:e.student_name}),a.jsx("span",{className:`ml-2 px-2 py-0.5 text-xs rounded ${x(e.status)}`,children:e.status})]}),a.jsxs("div",{className:"flex items-center space-x-4 mt-1",children:[e.student&&a.jsxs("div",{className:"flex items-center text-xs text-gray-500",children:[a.jsx(ss,{className:"h-3 w-3 mr-1"}),e.student]}),e.program&&a.jsx("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-0.5 rounded",children:e.program}),e.due_date&&a.jsxs("div",{className:"flex items-center text-xs text-gray-500",children:[a.jsx(k,{className:"h-3 w-3 mr-1"}),"Due: ",new Date(e.due_date).toLocaleDateString()]})]}),a.jsxs("div",{className:"mt-2",children:[a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsx("span",{className:"text-gray-600",children:"Payment Progress"}),a.jsxs("span",{className:"font-medium text-gray-900",children:[c(e.paid_amount||0)," / ",c(e.total_amount||0)]})]}),a.jsx("div",{className:"mt-1 w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:`${h(e.paid_amount,e.total_amount)}%`}})}),a.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[a.jsxs("span",{children:["Paid: ",h(e.paid_amount,e.total_amount),"%"]}),e.outstanding_amount>0&&a.jsxs("span",{className:"text-red-600 font-medium",children:["Outstanding: ",c(e.outstanding_amount)]})]})]}),a.jsxs("div",{className:"flex items-center space-x-4 mt-2",children:[e.academic_year&&a.jsx("span",{className:"text-xs bg-gray-100 text-gray-700 px-2 py-0.5 rounded",children:e.academic_year}),e.academic_term&&a.jsx("span",{className:"text-xs bg-gray-100 text-gray-700 px-2 py-0.5 rounded",children:e.academic_term}),e.fee_structure&&a.jsx("span",{className:"text-xs bg-purple-100 text-purple-700 px-2 py-0.5 rounded",children:e.fee_structure})]}),e.posting_date&&a.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Created: ",new Date(e.posting_date).toLocaleDateString()]})]})]}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:a.jsx(Oe,{className:"h-4 w-4"})}),a.jsx("button",{className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:a.jsx(w,{className:"h-4 w-4"})})]})]})})},e.name))})}),0===i.length&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx($,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"No fee records found."})]})]})},Ys=()=>{const[e,s]=H.useState(""),{data:r,isLoading:l,error:n}=t({queryKey:["fee-schedules"],queryFn:async()=>{try{const e=await p.get("/frappe/Fee Schedule");let s=[];return e.data&&e.data.data&&Array.isArray(e.data.data)?s=e.data.data:e.data&&Array.isArray(e.data)?s=e.data:e.data&&e.data.message&&(s=e.data.message),s||[]}catch(e){return[]}}}),{data:d}=t({queryKey:["sales-invoices"],queryFn:async()=>{try{const e=await p.get("/frappe/Sales Invoice");let s=[];return e.data&&e.data.data&&Array.isArray(e.data.data)?s=e.data.data:e.data&&Array.isArray(e.data)?s=e.data:e.data&&e.data.message&&(s=e.data.message),s||[]}catch(e){return[]}}}),i=r||[],c=d||[],o=e=>c.filter(s=>s.fee_schedule===e||s.project===e||s.remarks?.includes(e)),x=i.filter(s=>(s.fee_schedule_name||s.name||"")?.toLowerCase().includes(e.toLowerCase())||(s.program||"")?.toLowerCase().includes(e.toLowerCase())||(s.academic_year||"")?.toLowerCase().includes(e.toLowerCase())||(s.academic_term||"")?.toLowerCase().includes(e.toLowerCase())||(s.student_category||"")?.toLowerCase().includes(e.toLowerCase()));if(l)return a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})});if(n)return a.jsx("div",{className:"text-center py-12",children:a.jsx("p",{className:"text-red-600",children:"Error loading fee schedules. Please try again."})});const m=e=>{if(!e)return null;const s=new Date,t=new Date(e).getTime()-s.getTime();return Math.ceil(t/864e5)},h=e=>{const s=m(e);return null===s?"text-gray-600":s<0?"text-red-600":s<=7?"text-orange-600":"text-green-600"},g=e=>{const s=m(e);return null===s?"":s<0?`Overdue by ${Math.abs(s)} days`:0===s?"Due today":`Due in ${s} days`};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Fee Schedules"}),a.jsxs("p",{className:"text-gray-600 mt-1",children:["Manage fee payment schedules and deadlines (",i.length," total)"]})]}),a.jsxs("button",{className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center",children:[a.jsx(Ke,{className:"h-5 w-5 mr-2"}),"Create Fee Schedule"]})]}),a.jsxs("div",{className:"relative",children:[a.jsx(N,{className:"h-5 w-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Search fee schedules...",value:e,onChange:e=>s(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:x.map(e=>a.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6 hover:shadow-lg transition-shadow",children:a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center mb-3",children:[a.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center mr-3",children:a.jsx(S,{className:"h-5 w-5 text-blue-600"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900",children:e.fee_schedule_name||e.program||"Fee Schedule"}),a.jsxs("p",{className:"text-xs text-gray-500 mt-0.5",children:["ID: ",e.name]}),a.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[2===e.docstatus?a.jsx("span",{className:"px-2 py-0.5 bg-red-100 text-red-700 text-xs rounded",children:"Cancelled"}):1===e.docstatus?a.jsx("span",{className:"px-2 py-0.5 bg-green-100 text-green-700 text-xs rounded",children:"Active"}):0===e.docstatus?a.jsx("span",{className:"px-2 py-0.5 bg-yellow-100 text-yellow-700 text-xs rounded",children:"Draft"}):a.jsx("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-700 text-xs rounded",children:"Unknown"}),e.status&&a.jsx("span",{className:"px-2 py-0.5 bg-blue-100 text-blue-700 text-xs rounded",children:e.status})]})]})]}),a.jsxs("div",{className:"space-y-3",children:[e.program&&a.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[a.jsx(y,{className:"h-4 w-4 mr-2 text-gray-400"}),a.jsx("span",{children:e.program})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.academic_year&&a.jsxs("div",{className:"text-sm text-gray-600",children:[a.jsx("span",{className:"font-medium",children:"Year:"})," ",e.academic_year]}),e.academic_term&&a.jsxs("div",{className:"text-sm text-gray-600",children:[a.jsx("span",{className:"font-medium",children:"Term:"})," ",e.academic_term]})]}),e.student_category&&a.jsxs("div",{className:"text-sm text-gray-600",children:[a.jsx("span",{className:"font-medium",children:"Category:"}),a.jsx("span",{className:"ml-2 px-2 py-0.5 bg-gray-100 text-gray-700 text-xs rounded",children:e.student_category})]}),e.student_group&&a.jsxs("div",{className:"text-sm text-gray-600",children:[a.jsx("span",{className:"font-medium",children:"Group:"})," ",e.student_group]}),e.fee_structure&&a.jsxs("div",{className:"text-sm text-gray-600",children:[a.jsx("span",{className:"font-medium",children:"Fee Structure:"}),a.jsx("span",{className:"block text-xs text-blue-600 mt-1",children:e.fee_structure})]}),e.due_date&&a.jsxs("div",{className:"p-3 rounded-lg border-l-4 "+(m(e.due_date)&&m(e.due_date)<0?"bg-red-50 border-red-400":m(e.due_date)&&m(e.due_date)<=7?"bg-orange-50 border-orange-400":"bg-green-50 border-green-400"),children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(k,{className:"h-4 w-4 mr-2 text-gray-400"}),a.jsxs("span",{className:"text-sm font-medium text-gray-900",children:["Due: ",new Date(e.due_date).toLocaleDateString()]})]}),a.jsx("div",{className:`text-xs mt-1 ${h(e.due_date)}`,children:g(e.due_date)})]}),e.posting_date&&a.jsxs("div",{className:"flex items-center text-xs text-gray-500",children:[a.jsx(u,{className:"h-3 w-3 mr-1"}),"Created: ",new Date(e.posting_date).toLocaleDateString()]}),o(e.name).length>0&&a.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[a.jsxs("div",{className:"flex items-center mb-2",children:[a.jsx(Re,{className:"h-4 w-4 mr-2 text-blue-500"}),a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Linked Sales Invoices"})]}),a.jsx("div",{className:"space-y-1",children:o(e.name).map(e=>a.jsxs(Z,{to:"/admin/sales-invoice",className:"flex items-center justify-between p-2 bg-blue-50 rounded text-xs hover:bg-blue-100 transition-colors",children:[a.jsxs("div",{children:[a.jsx("span",{className:"font-medium text-blue-700",children:e.name}),a.jsxs("span",{className:"text-gray-600 ml-2",children:[e.status," - ₹",(e.grand_total||0).toLocaleString()]})]}),a.jsx(ge,{className:"h-3 w-3 text-blue-500"})]},e.name))})]})]})]}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:a.jsx(Oe,{className:"h-4 w-4"})}),a.jsx("button",{className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:a.jsx(w,{className:"h-4 w-4"})})]})]})},e.name))}),0===x.length&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(S,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"No fee schedules found."})]})]})},Js=()=>{const[e,s]=H.useState(""),{data:r,isLoading:l,error:n}=t({queryKey:["sales-invoices"],queryFn:async()=>{try{const e=await p.get("/frappe/Sales Invoice");let s=[];return e.data&&e.data.data&&Array.isArray(e.data.data)?s=e.data.data:e.data&&Array.isArray(e.data)?s=e.data:e.data&&e.data.message&&(s=e.data.message),s&&s.length,s||[]}catch(e){return[]}}}),{data:d}=t({queryKey:["payment-entries"],queryFn:async()=>{try{const e=await p.get("/frappe/Payment Entry");let s=[];return e.data&&e.data.data&&Array.isArray(e.data.data)?s=e.data.data:e.data&&Array.isArray(e.data)?s=e.data:e.data&&e.data.message&&(s=e.data.message),s||[]}catch(e){return[]}}}),i=r||[],c=d||[],o=e=>c.filter(s=>s.sales_invoice===e||s.reference_no===e||s.remarks?.includes(e)),x=i.filter(s=>(s.name||"")?.toLowerCase().includes(e.toLowerCase())||(s.customer||"")?.toLowerCase().includes(e.toLowerCase())||(s.customer_name||"")?.toLowerCase().includes(e.toLowerCase())||(s.fee_schedule||"")?.toLowerCase().includes(e.toLowerCase()));if(l)return a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})});if(n)return a.jsx("div",{className:"text-center py-12",children:a.jsx("p",{className:"text-red-600",children:"Error loading sales invoices. Please try again."})});const u=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(e||0),h=(e,s)=>{if(2===s)return"bg-red-100 text-red-700";if(0===s)return"bg-yellow-100 text-yellow-700";switch(e?.toLowerCase()){case"paid":return"bg-green-100 text-green-700";case"unpaid":case"overdue":return"bg-red-100 text-red-700";case"partly paid":return"bg-orange-100 text-orange-700";default:return"bg-gray-100 text-gray-700"}},g=(e,s)=>{if(2===s)return a.jsx(se,{className:"h-4 w-4"});if(0===s)return a.jsx(se,{className:"h-4 w-4"});switch(e?.toLowerCase()){case"paid":return a.jsx(m,{className:"h-4 w-4"});case"unpaid":return a.jsx(se,{className:"h-4 w-4"});case"partly paid":return a.jsx(U,{className:"h-4 w-4"});default:return a.jsx(E,{className:"h-4 w-4"})}};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Sales Invoices"}),a.jsxs("p",{className:"text-gray-600 mt-1",children:["Manage fee-related sales invoices (",i.length," total)"]})]}),a.jsxs("button",{className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center",children:[a.jsx(Ke,{className:"h-5 w-5 mr-2"}),"Create Sales Invoice"]})]}),a.jsxs("div",{className:"relative",children:[a.jsx(N,{className:"h-5 w-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Search sales invoices...",value:e,onChange:e=>s(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:x.map(e=>a.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6 hover:shadow-lg transition-shadow",children:a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center mb-3",children:[a.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center mr-3",children:a.jsx(E,{className:"h-5 w-5 text-blue-600"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900",children:e.title||e.customer_name||e.party_name||e.customer||e.party||e.name||"Sales Invoice"}),a.jsxs("p",{className:"text-xs text-gray-500 mt-0.5",children:["ID: ",e.name]}),a.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[a.jsxs("span",{className:`px-2 py-0.5 text-xs rounded flex items-center ${h(e.status,e.docstatus)}`,children:[g(e.status,e.docstatus),a.jsx("span",{className:"ml-1",children:2===e.docstatus?"Cancelled":0===e.docstatus?"Draft":1===e.docstatus?"Submitted":e.status||e.workflow_state||"Unknown"})]}),1===e.is_return&&a.jsx("span",{className:"px-2 py-0.5 bg-purple-100 text-purple-700 text-xs rounded",children:"Return"})]})]})]}),a.jsxs("div",{className:"space-y-3",children:[(e.customer||e.customer_name||e.party||e.party_name)&&a.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[a.jsx(ss,{className:"h-4 w-4 mr-2 text-gray-400"}),a.jsx("span",{children:e.customer_name||e.party_name||e.customer||e.party||"Customer"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.posting_date&&a.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[a.jsx(k,{className:"h-4 w-4 mr-2 text-gray-400"}),a.jsxs("span",{children:["Posted: ",new Date(e.posting_date).toLocaleDateString()]})]}),e.due_date&&a.jsxs("div",{className:"text-sm text-gray-600",children:[a.jsx("span",{className:"font-medium",children:"Due:"})," ",new Date(e.due_date).toLocaleDateString()]})]}),e.fee_schedule&&a.jsxs("div",{className:"text-sm text-gray-600",children:[a.jsx("span",{className:"font-medium",children:"Fee Schedule:"}),a.jsx("span",{className:"block text-xs text-blue-600 mt-1",children:e.fee_schedule})]}),(e.academic_year||e.academic_term)&&a.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-gray-600",children:[e.academic_year&&a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Year:"})," ",e.academic_year]}),e.academic_term&&a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Term:"})," ",e.academic_term]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"bg-green-50 p-3 rounded-lg",children:[a.jsxs("div",{className:"flex items-center text-sm font-medium text-green-800",children:[a.jsx("span",{className:"text-green-600 font-bold mr-2",children:"₹"}),"Total Amount"]}),a.jsx("div",{className:"text-lg font-semibold text-green-600",children:u(e.grand_total||e.total||e.base_grand_total||e.net_total||e.base_total||0)})]}),a.jsxs("div",{className:"p-3 rounded-lg "+((e.outstanding_amount||0)>0?"bg-red-50":"bg-green-50"),children:[a.jsxs("div",{className:"flex items-center text-sm font-medium "+((e.outstanding_amount||0)>0?"text-red-800":"text-green-800"),children:[a.jsx("span",{className:"font-bold mr-2 "+((e.outstanding_amount||0)>0?"text-red-600":"text-green-600"),children:"₹"}),"Outstanding"]}),a.jsx("div",{className:"text-lg font-semibold "+((e.outstanding_amount||0)>0?"text-red-600":"text-green-600"),children:u(e.outstanding_amount||0)})]})]}),e.company&&a.jsxs("div",{className:"text-sm text-gray-600",children:[a.jsx("span",{className:"font-medium",children:"Company:"})," ",e.company]}),e.remarks&&a.jsxs("div",{className:"text-sm text-gray-600",children:[a.jsx("span",{className:"font-medium",children:"Remarks:"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:e.remarks})]}),o(e.name).length>0&&a.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[a.jsxs("div",{className:"flex items-center mb-2",children:[a.jsx(Re,{className:"h-4 w-4 mr-2 text-green-500"}),a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Linked Payment Entries"})]}),a.jsx("div",{className:"space-y-1",children:o(e.name).map(e=>a.jsxs(Z,{to:"/admin/payment-entry",className:"flex items-center justify-between p-2 bg-green-50 rounded text-xs hover:bg-green-100 transition-colors",children:[a.jsxs("div",{children:[a.jsx("span",{className:"font-medium text-green-700",children:e.name}),a.jsxs("span",{className:"text-gray-600 ml-2",children:[e.payment_type," - ₹",(e.received_amount||e.paid_amount||0).toLocaleString()]})]}),a.jsx(ge,{className:"h-3 w-3 text-green-500"})]},e.name))})]})]})]}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:a.jsx(Oe,{className:"h-4 w-4"})}),a.jsx("button",{className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:a.jsx(w,{className:"h-4 w-4"})})]})]})},e.name))}),0===x.length&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(E,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"No sales invoices found."})]})]})},Xs=()=>{const[e,s]=H.useState(""),{data:r,isLoading:l,error:n}=t({queryKey:["payment-entries"],queryFn:async()=>{try{const e=await p.get("/frappe/Payment Entry");let s=[];return e.data&&e.data.data&&Array.isArray(e.data.data)?s=e.data.data:e.data&&Array.isArray(e.data)?s=e.data:e.data&&e.data.message&&(s=e.data.message),s&&s.length,s||[]}catch(e){return[]}}}),d=r||[],i=d.filter(s=>(s.name||"")?.toLowerCase().includes(e.toLowerCase())||(s.party||"")?.toLowerCase().includes(e.toLowerCase())||(s.party_name||"")?.toLowerCase().includes(e.toLowerCase())||(s.sales_invoice||"")?.toLowerCase().includes(e.toLowerCase())||(s.mode_of_payment||"")?.toLowerCase().includes(e.toLowerCase()));if(l)return a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})});if(n)return a.jsx("div",{className:"text-center py-12",children:a.jsx("p",{className:"text-red-600",children:"Error loading payment entries. Please try again."})});const c=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(e||0),o=(e,s)=>{if(2===s)return"bg-red-100 text-red-700";if(0===s)return"bg-yellow-100 text-yellow-700";switch(e?.toLowerCase()){case"submitted":return"bg-green-100 text-green-700";case"draft":return"bg-yellow-100 text-yellow-700";case"cancelled":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},x=e=>{switch(e?.toLowerCase()){case"receive":return"bg-green-100 text-green-700";case"pay":return"bg-blue-100 text-blue-700";case"internal transfer":return"bg-purple-100 text-purple-700";default:return"bg-gray-100 text-gray-700"}};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Payment Entries"}),a.jsxs("p",{className:"text-gray-600 mt-1",children:["Manage fee payments and receipts (",d.length," total)"]})]}),a.jsxs("button",{className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center",children:[a.jsx(Ke,{className:"h-5 w-5 mr-2"}),"Create Payment Entry"]})]}),a.jsxs("div",{className:"relative",children:[a.jsx(N,{className:"h-5 w-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Search payment entries...",value:e,onChange:e=>s(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:i.map(e=>{return a.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6 hover:shadow-lg transition-shadow",children:a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center mb-3",children:[a.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center mr-3",children:a.jsx(U,{className:"h-5 w-5 text-green-600"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900",children:e.title||e.party_name||e.party||e.name||"Payment Entry"}),a.jsxs("p",{className:"text-xs text-gray-500 mt-0.5",children:["ID: ",e.name]}),a.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[a.jsxs("span",{className:`px-2 py-0.5 text-xs rounded flex items-center ${o(e.status,e.docstatus)}`,children:[(e.status,s=e.docstatus,2===s||0===s?a.jsx(se,{className:"h-4 w-4"}):1===s?a.jsx(m,{className:"h-4 w-4"}):a.jsx(E,{className:"h-4 w-4"})),a.jsx("span",{className:"ml-1",children:2===e.docstatus?"Cancelled":0===e.docstatus?"Draft":1===e.docstatus?"Submitted":e.status||e.workflow_state||"Unknown"})]}),e.payment_type&&a.jsx("span",{className:`px-2 py-0.5 text-xs rounded ${x(e.payment_type)}`,children:e.payment_type})]})]})]}),a.jsxs("div",{className:"space-y-3",children:[(e.party||e.party_name)&&a.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[a.jsx(ss,{className:"h-4 w-4 mr-2 text-gray-400"}),a.jsx("span",{children:e.party_name||e.party||"Party"}),e.party_type&&a.jsxs("span",{className:"text-xs text-gray-400 ml-2",children:["(",e.party_type,")"]})]}),e.posting_date&&a.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[a.jsx(k,{className:"h-4 w-4 mr-2 text-gray-400"}),a.jsxs("span",{children:["Posted: ",new Date(e.posting_date).toLocaleDateString()]})]}),e.sales_invoice&&a.jsxs("div",{className:"text-sm text-gray-600",children:[a.jsx("span",{className:"font-medium",children:"Sales Invoice:"}),a.jsx("span",{className:"block text-xs text-blue-600 mt-1",children:e.sales_invoice})]}),(e.paid_from||e.paid_to)&&a.jsx("div",{className:"bg-gray-50 p-3 rounded-lg",children:a.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.paid_from&&a.jsxs("div",{className:"flex items-center",children:[a.jsx(G,{className:"h-4 w-4 mr-1 text-gray-400"}),a.jsx("span",{className:"text-xs",children:e.paid_from})]}),e.paid_from&&e.paid_to&&a.jsx(ue,{className:"h-4 w-4 mx-2 text-gray-400"}),e.paid_to&&a.jsxs("div",{className:"flex items-center",children:[a.jsx(G,{className:"h-4 w-4 mr-1 text-gray-400"}),a.jsx("span",{className:"text-xs",children:e.paid_to})]})]})}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[(e.paid_amount||0)>0&&a.jsxs("div",{className:"bg-red-50 p-3 rounded-lg",children:[a.jsxs("div",{className:"flex items-center text-sm font-medium text-red-800",children:[a.jsx("span",{className:"text-red-600 font-bold mr-2",children:"₹"}),"Paid Amount"]}),a.jsx("div",{className:"text-lg font-semibold text-red-600",children:c(e.paid_amount||0)})]}),(e.received_amount||0)>0&&a.jsxs("div",{className:"bg-green-50 p-3 rounded-lg",children:[a.jsxs("div",{className:"flex items-center text-sm font-medium text-green-800",children:[a.jsx("span",{className:"text-green-600 font-bold mr-2",children:"₹"}),"Received Amount"]}),a.jsx("div",{className:"text-lg font-semibold text-green-600",children:c(e.received_amount||0)})]}),(e.total_allocated_amount||0)>0&&a.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg",children:[a.jsxs("div",{className:"flex items-center text-sm font-medium text-blue-800",children:[a.jsx("span",{className:"text-blue-600 font-bold mr-2",children:"₹"}),"Allocated Amount"]}),a.jsx("div",{className:"text-lg font-semibold text-blue-600",children:c(e.total_allocated_amount||0)})]})]}),e.mode_of_payment&&a.jsxs("div",{className:"text-sm text-gray-600",children:[a.jsx("span",{className:"font-medium",children:"Payment Mode:"})," ",e.mode_of_payment]}),(e.reference_no||e.reference_date)&&a.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-gray-600",children:[e.reference_no&&a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Ref No:"})," ",e.reference_no]}),e.reference_date&&a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Ref Date:"})," ",new Date(e.reference_date).toLocaleDateString()]})]}),e.company&&a.jsxs("div",{className:"text-sm text-gray-600",children:[a.jsx("span",{className:"font-medium",children:"Company:"})," ",e.company]}),e.remarks&&a.jsxs("div",{className:"text-sm text-gray-600",children:[a.jsx("span",{className:"font-medium",children:"Remarks:"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:e.remarks})]})]})]}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:a.jsx(Oe,{className:"h-4 w-4"})}),a.jsx("button",{className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:a.jsx(w,{className:"h-4 w-4"})})]})]})},e.name);var s})}),0===i.length&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(U,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"No payment entries found."})]})]})},et=()=>{const{user:e}=n(),s="teacher"===e?.role,t=s?"/teacher":"/admin";return a.jsxs(Y,{children:[a.jsx(J,{index:!0,element:a.jsx(ns,{})}),a.jsx(J,{path:"dashboard",element:a.jsx(ns,{})}),!s&&a.jsxs(a.Fragment,{children:[a.jsx(J,{path:"users",element:a.jsx(cs,{})}),a.jsx(J,{path:"user-management",element:a.jsx(cs,{})})]}),a.jsx(J,{path:"courses",element:a.jsx(hs,{readOnly:s})}),a.jsx(J,{path:"program-management",element:a.jsx(gs,{readOnly:s})}),a.jsx(J,{path:"student-groups",element:a.jsx(ps,{readOnly:s})}),!s&&a.jsxs(a.Fragment,{children:[a.jsx(J,{path:"program-enrollment",element:a.jsx(ys,{})}),a.jsx(J,{path:"program-enrollment-tool",element:a.jsx(bs,{})}),a.jsx(J,{path:"course-enrollment",element:a.jsx(Ns,{})}),a.jsx(J,{path:"course-scheduling-tool",element:a.jsx(ws,{})})]}),a.jsx(J,{path:"course-schedule",element:a.jsx(fs,{readOnly:s})}),a.jsx(J,{path:"topic",element:a.jsx(vs,{readOnly:s})}),a.jsx(J,{path:"knowledge-base/*",element:a.jsx(_s,{})}),a.jsx(J,{path:"ai-chat",element:a.jsx(Cs,{})}),a.jsx(J,{path:"academic-year",element:a.jsx(Ss,{})}),a.jsx(J,{path:"academic-term",element:a.jsx(ks,{})}),a.jsx(J,{path:"room",element:a.jsx(Ls,{})}),!s&&a.jsxs(a.Fragment,{children:[a.jsx(J,{path:"instructor",element:a.jsx(As,{})}),a.jsx(J,{path:"instructor-attendance",element:a.jsx(Ds,{})}),a.jsx(J,{path:"instructor-payroll",element:a.jsx(Es,{})})]}),a.jsx(J,{path:"student",element:a.jsx(qs,{readOnly:s})}),!s&&a.jsxs(a.Fragment,{children:[a.jsx(J,{path:"student-applicant",element:a.jsx(Fs,{})}),a.jsx(J,{path:"student-admission",element:a.jsx(Is,{})}),a.jsx(J,{path:"student-batch",element:a.jsx(Ms,{})}),a.jsx(J,{path:"student-category",element:a.jsx(Rs,{})}),a.jsx(J,{path:"guardian",element:a.jsx(Bs,{})}),a.jsx(J,{path:"student-log",element:a.jsx(Os,{})})]}),a.jsx(J,{path:"student-attendance",element:a.jsx(Us,{})}),a.jsx(J,{path:"student-attendance-tool",element:a.jsx($s,{})}),a.jsx(J,{path:"student-leave-application",element:a.jsx(Ts,{})}),a.jsx(J,{path:"assessment-plan",element:a.jsx(Ks,{})}),a.jsx(J,{path:"assessment-group",element:a.jsx(Gs,{})}),a.jsx(J,{path:"assessment-result",element:a.jsx(Ws,{})}),a.jsx(J,{path:"assessment-criteria",element:a.jsx(Vs,{})}),a.jsx(J,{path:"grading-scale",element:a.jsx(Hs,{})}),!s&&a.jsxs(a.Fragment,{children:[a.jsx(J,{path:"fee-category",element:a.jsx(Qs,{})}),a.jsx(J,{path:"fee-structure",element:a.jsx(zs,{})}),a.jsx(J,{path:"fees",element:a.jsx(Zs,{})}),a.jsx(J,{path:"fee-schedule",element:a.jsx(Ys,{})}),a.jsx(J,{path:"sales-invoice",element:a.jsx(Js,{})}),a.jsx(J,{path:"payment-entry",element:a.jsx(Xs,{})})]}),a.jsx(J,{path:"system-health",element:a.jsx(ds,{})}),a.jsx(J,{path:"*",element:a.jsx(X,{to:t,replace:!0})})]})};export{et as default};
