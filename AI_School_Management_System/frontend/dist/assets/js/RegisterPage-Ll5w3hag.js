import{u as e,j as a}from"./data-94D1OdVp.js";import{b as s,r,L as t}from"./vendor-BHFNQwN6.js";import{b as l,F as n,c as o,z as d,a as i}from"./index-BKaJI5T2.js";import{m as c}from"./ui-DvwotSXL.js";import{F as m}from"./EyeSlashIcon-CNIZdlHI.js";import{F as u}from"./EyeIcon-BVRVrNvG.js";const x=()=>{const x=s(),[p,h]=r.useState(!1),[b,f]=r.useState(!1),[y,g]=r.useState({name:"",email:"",password:"",confirmPassword:"",role:"student",phone:"",additional_info:{}}),j=e({mutationFn:async e=>(await i.post("/auth/register",e)).data,onSuccess:e=>{d.success("Registration successful! Please wait for admin approval."),x("/auth/login")},onError:e=>{const a=e.response?.data?.message||"Registration failed. Please try again.";d.error(a)}}),N=e=>{const{name:a,value:s}=e.target;if(a.startsWith("additional_")){const e=a.replace("additional_","");g(a=>({...a,additional_info:{...a.additional_info,[e]:s}}))}else g(e=>({...e,[a]:s}))};return a.jsxs("div",{className:"min-h-screen bg-gray-100 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[a.jsx("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:a.jsxs(c.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"text-center",children:[a.jsx("div",{className:"mx-auto h-16 w-16 bg-blue-600 rounded-lg flex items-center justify-center mb-4",children:a.jsx(l,{className:"h-10 w-10 text-white"})}),a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Join Our School"}),a.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Create your account to get started"})]})}),a.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:a.jsxs(c.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white py-8 px-4 shadow-sm border border-gray-300 rounded-lg sm:px-10",children:[a.jsxs("form",{className:"space-y-6",onSubmit:e=>{if(e.preventDefault(),!y.name||!y.email||!y.password)return void d.error("Please fill in all required fields");if(y.password!==y.confirmPassword)return void d.error("Passwords do not match");if(y.password.length<8)return void d.error("Password must be at least 8 characters long");const{confirmPassword:a,...s}=y;j.mutate(s)},children:[a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"role",className:"block text-sm font-medium text-gray-700",children:["I am a ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("div",{className:"mt-1",children:a.jsxs("select",{id:"role",name:"role",value:y.role,onChange:N,className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-sm",children:[a.jsx("option",{value:"student",children:"Student"}),a.jsx("option",{value:"teacher",children:"Teacher"}),a.jsx("option",{value:"parent",children:"Parent"})]})})]}),a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:["Full Name ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("div",{className:"mt-1",children:a.jsx("input",{id:"name",name:"name",type:"text",required:!0,value:y.name,onChange:N,className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-sm",placeholder:"Enter your full name"})})]}),a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:["Email address ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("div",{className:"mt-1",children:a.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:y.email,onChange:N,className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-sm",placeholder:"Enter your email"})})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700",children:"Phone Number"}),a.jsx("div",{className:"mt-1",children:a.jsx("input",{id:"phone",name:"phone",type:"tel",value:y.phone||"",onChange:N,className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-sm",placeholder:"Enter your phone number"})})]}),(()=>{switch(y.role){case"student":return a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"additional_student_id",className:"block text-sm font-medium text-gray-700",children:"Student ID (Optional)"}),a.jsx("div",{className:"mt-1",children:a.jsx("input",{id:"additional_student_id",name:"additional_student_id",type:"text",value:y.additional_info?.student_id||"",onChange:N,className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-sm",placeholder:"Enter your student ID"})})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"additional_grade",className:"block text-sm font-medium text-gray-700",children:"Grade/Class (Optional)"}),a.jsx("div",{className:"mt-1",children:a.jsx("input",{id:"additional_grade",name:"additional_grade",type:"text",value:y.additional_info?.grade||"",onChange:N,className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-sm",placeholder:"Enter your grade/class"})})]})]});case"teacher":return a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"additional_employee_id",className:"block text-sm font-medium text-gray-700",children:"Employee ID (Optional)"}),a.jsx("div",{className:"mt-1",children:a.jsx("input",{id:"additional_employee_id",name:"additional_employee_id",type:"text",value:y.additional_info?.employee_id||"",onChange:N,className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-sm",placeholder:"Enter your employee ID"})})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"additional_department",className:"block text-sm font-medium text-gray-700",children:"Department (Optional)"}),a.jsx("div",{className:"mt-1",children:a.jsx("input",{id:"additional_department",name:"additional_department",type:"text",value:y.additional_info?.department||"",onChange:N,className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-sm",placeholder:"Enter your department"})})]})]});case"parent":return a.jsxs("div",{children:[a.jsx("label",{htmlFor:"additional_child_name",className:"block text-sm font-medium text-gray-700",children:"Child's Name (Optional)"}),a.jsx("div",{className:"mt-1",children:a.jsx("input",{id:"additional_child_name",name:"additional_child_name",type:"text",value:y.additional_info?.child_name||"",onChange:N,className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-sm",placeholder:"Enter your child's name"})})]});default:return null}})(),a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:["Password ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("div",{className:"mt-1 relative",children:[a.jsx("input",{id:"password",name:"password",type:p?"text":"password",required:!0,value:y.password,onChange:N,className:"appearance-none block w-full px-3 py-2 pr-10 border border-gray-300 rounded-md placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-sm",placeholder:"Create a password"}),a.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>h(!p),children:p?a.jsx(m,{className:"h-4 w-4 text-gray-400"}):a.jsx(u,{className:"h-4 w-4 text-gray-400"})})]}),a.jsx("div",{className:"mt-1 text-xs text-gray-500",children:"Password must be at least 8 characters long"})]}),a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700",children:["Confirm Password ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("div",{className:"mt-1 relative",children:[a.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:b?"text":"password",required:!0,value:y.confirmPassword,onChange:N,className:"appearance-none block w-full px-3 py-2 pr-10 border border-gray-300 rounded-md placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-sm",placeholder:"Confirm your password"}),a.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>f(!b),children:b?a.jsx(m,{className:"h-4 w-4 text-gray-400"}):a.jsx(u,{className:"h-4 w-4 text-gray-400"})})]})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx("input",{id:"terms",name:"terms",type:"checkbox",required:!0,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),a.jsxs("label",{htmlFor:"terms",className:"ml-2 block text-sm text-gray-900",children:["I agree to the"," ",a.jsx(t,{to:"/terms",className:"text-blue-600 hover:text-blue-500",children:"Terms of Service"})," ","and"," ",a.jsx(t,{to:"/privacy",className:"text-blue-600 hover:text-blue-500",children:"Privacy Policy"})]})]}),a.jsx("div",{children:a.jsx(c.button,{whileHover:{scale:1.01},whileTap:{scale:.99},type:"submit",disabled:j.isPending,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:j.isPending?a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Creating account..."]}):"Create account"})}),j.error&&a.jsx(c.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"rounded-md bg-red-50 p-4 border border-red-200",children:a.jsxs("div",{className:"flex",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx(n,{className:"h-5 w-5 text-red-400"})}),a.jsxs("div",{className:"ml-3",children:[a.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Registration Error"}),a.jsx("div",{className:"mt-2 text-sm text-red-700",children:j.error?.response?.data?.message||"An error occurred during registration."})]})]})}),j.isSuccess&&a.jsx(c.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"rounded-md bg-green-50 p-4 border border-green-200",children:a.jsxs("div",{className:"flex",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx(o,{className:"h-5 w-5 text-green-400"})}),a.jsxs("div",{className:"ml-3",children:[a.jsx("h3",{className:"text-sm font-medium text-green-800",children:"Registration Successful!"}),a.jsx("div",{className:"mt-2 text-sm text-green-700",children:"Your account has been created. Please wait for admin approval before logging in."})]})]})})]}),a.jsxs("div",{className:"mt-6",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-0 flex items-center",children:a.jsx("div",{className:"w-full border-t border-gray-300"})}),a.jsx("div",{className:"relative flex justify-center text-sm",children:a.jsx("span",{className:"px-2 bg-white text-gray-500",children:"Already have an account?"})})]}),a.jsx("div",{className:"mt-4 text-center",children:a.jsx(t,{to:"/auth/login",className:"font-medium text-blue-600 hover:text-blue-500",children:"Sign in to your account"})})]})]})}),a.jsx(c.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[a.jsx("h4",{className:"text-sm font-medium text-blue-800 mb-2",children:"Account Approval"}),a.jsx("p",{className:"text-xs text-blue-700",children:"All new registrations require approval from a school administrator. You will receive an email notification once your account is approved."})]})})]})};export{x as default};
